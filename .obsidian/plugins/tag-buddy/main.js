/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => TagBuddy
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// settings.ts
var import_obsidian = require("obsidian");
var TBSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    function isValidTag(tag) {
      const tagPattern = /^#[\w]+$/;
      return tagPattern.test(tag);
    }
    function filterAndJoinTags(tagsString) {
      const tagsArray = tagsString.split(", ");
      const validTags = tagsArray.filter(isValidTag);
      return validTags.join(", ");
    }
    containerEl.createEl("h3", { text: "General" });
    new import_obsidian.Setting(containerEl).setName("Recent tags").setDesc("The most recent tags added via Tag Buddy are stored here. These will show up first in the list when adding.").addText((text) => {
      text.setPlaceholder(this.plugin.settings.recentlyAddedTags).setValue(this.plugin.settings.recentlyAddedTags).onChange(async (value) => {
        this.plugin.settings.recentlyAddedTags = filterAndJoinTags(value);
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Lock recent tags").setDesc("Toggle ON to lock the recent tags list. Recent tags will not be updated. Instead, the tags above will act like a favorites list.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.lockRecentTags).onChange(async (value) => {
        this.plugin.settings.lockRecentTags = value;
        await this.plugin.saveSettings();
      })
    );
    containerEl.createEl("h3", { text: "Desktop" });
    new import_obsidian.Setting(containerEl).setName("Action when clicking a tag:").setDesc("What should happen when you click a tag?").addDropdown(
      (opt) => opt.addOption("remove", "Remove tag").addOption("hash", "Remove hash").addOption("edit", "Edit tag").addOption("native", "Search tag").setValue(this.plugin.settings.desktopClickTag).onChange(
        async (value) => {
          this.plugin.settings.desktopClickTag = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Action when clicking a tag with CMD/CTRL modifier key:").setDesc("What should happen when you click a tag while holding the CMD or CTRL key?").addDropdown(
      (opt) => opt.addOption("remove", "Remove tag").addOption("hash", "Remove hash").addOption("edit", "Edit tag").addOption("native", "Search tag").setValue(this.plugin.settings.desktopCMDClickTag).onChange(
        async (value) => {
          this.plugin.settings.desktopCMDClickTag = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Action when clicking a tag with OPT/ALT modifier key:").setDesc("What should happen when you click a tag while holding the OPT or ALT key?").addDropdown(
      (opt) => opt.addOption("remove", "Remove tag").addOption("hash", "Remove hash").addOption("edit", "Edit tag").addOption("native", "Search tag").setValue(this.plugin.settings.desktopOPTClickTag).onChange(
        async (value) => {
          this.plugin.settings.desktopOPTClickTag = value;
          await this.plugin.saveSettings();
        }
      )
    );
    containerEl.createEl("h3", { text: "Mobile" });
    new import_obsidian.Setting(containerEl).setName("Show mobile notices").setDesc("Toggle OFF to hide notices.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.mobileNotices).onChange(
        async (value) => {
          this.plugin.settings.mobileNotices = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Action when DOUBLE-TAPPING a tag:").setDesc("What should happen when you DOUBLE-TAP a tag?").addDropdown(
      (opt) => opt.addOption("remove", "Remove tag").addOption("hash", "Remove hash").addOption("edit", "Edit tag").addOption("native", "Search tag").setValue(this.plugin.settings.mobileDoubleTapTag).onChange(
        async (value) => {
          this.plugin.settings.mobileDoubleTapTag = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Action when LONG-PRESSING a tag:").setDesc("What should happen when you LONG-PRESS a tag?").addDropdown(
      (opt) => opt.addOption("remove", "Remove tag").addOption("hash", "Remove hash").addOption("edit", "Edit tag").setValue(this.plugin.settings.mobileLongPressTag).onChange(
        async (value) => {
          this.plugin.settings.mobileLongPressTag = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("TRIPLE-TAP non-tag, non-link text to add a tag:").setDesc("Toggle OFF to disable triple-tap.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.mobileTripleTapText).onChange(
        async (value) => {
          this.plugin.settings.mobileTripleTapText = value;
          await this.plugin.saveSettings();
        }
      )
    );
    containerEl.createEl("h3", { text: "Tag Summaries" });
    new import_obsidian.Setting(containerEl).setName("Show tag summary buttons").setDesc("Toggle OFF to hide these buttons.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.showSummaryButtons).onChange(
        async (value) => {
          this.plugin.settings.showSummaryButtons = value;
          await this.plugin.saveSettings();
        }
      )
    );
    containerEl.createEl("h5", { text: "Tag Summaries Items" });
    new import_obsidian.Setting(containerEl).setName("Remove tag button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.removeTagBtn).onChange(
        async (value) => {
          this.plugin.settings.removeTagBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Copy to clipboard button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.copyToCBBtn).onChange(
        async (value) => {
          this.plugin.settings.copyToCBBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Move to section button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.moveToSectionBtn).onChange(
        async (value) => {
          this.plugin.settings.moveToSectionBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Copy to section button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.copyToSectionBtn).onChange(
        async (value) => {
          this.plugin.settings.copyToSectionBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Copy link to section button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.copyLinkToSectionBtn).onChange(
        async (value) => {
          this.plugin.settings.copyLinkToSectionBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    new import_obsidian.Setting(containerEl).setName("Copy to note button:").addDropdown(
      (opt) => opt.addOption("always", "Desktop and mobile").addOption("desktop", "Only desktop").addOption("mobile", "Only mobile").addOption("hide", "Hide").setValue(this.plugin.settings.copyToNoteBtn).onChange(
        async (value) => {
          this.plugin.settings.copyToNoteBtn = value;
          await this.plugin.saveSettings();
        }
      )
    );
    containerEl.createEl("hr");
    containerEl.createEl("h1", { text: "Support a buddy" });
    const donateLink = containerEl.createEl("a");
    donateLink.setAttribute("href", "https://www.buymeacoffee.com/moremeyou");
    const donateButton = createEl("img");
    donateButton.setAttribute("src", "https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png");
    donateButton.setAttribute("alt", "Buy Me A Coffee");
    donateButton.style = "height: 40px !important;width: 150px !important;";
    donateLink.appendChild(donateButton);
    containerEl.createEl("br");
    containerEl.createEl("br");
    containerEl.createEl("br");
    new import_obsidian.Setting(containerEl).setName("Debug mode").setDesc("Output to console.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.debugMode).onChange(async (value) => {
        this.plugin.settings.debugMode = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// gui.ts
var import_obsidian6 = require("obsidian");

// utils.ts
var import_obsidian2 = require("obsidian");
function getTagElement(paragraphEl2, tagText) {
  const els = paragraphEl2.querySelectorAll(".tag");
  let tagElText = "";
  let tagElHasSub;
  for (let el of els) {
    tagElText = el.innerText.trim();
    if (tagElText === tagText) {
      return el;
    }
  }
  return null;
}
function platformSettingCheck(app2, value) {
  return value == "always" || value == "desktop" && !app2.isMobile || value == "mobile" && app2.isMobile;
}
function platformSettingCheckMultiple(app2, values) {
  for (let value of values) {
    if (platformSettingCheck(app2, value)) {
      return true;
    }
  }
  return false;
}
function isWordNearEnd(str, word, charDistance = 0) {
  const lastIndex = str.lastIndexOf(word);
  if (lastIndex === -1)
    return false;
  const wordEndIndex = lastIndex + word.length;
  const distanceToEnd = str.length - wordEndIndex;
  return distanceToEnd === 0 || distanceToEnd <= charDistance;
}
function getWordObjFromString(sourceText, offset) {
  let wordRegex = /[^\s]+(?=[.,:!?]?(\s|$))/g;
  let match;
  let index;
  let word = null;
  while ((match = wordRegex.exec(sourceText)) !== null) {
    if (match.index <= offset && offset <= match.index + match[0].length) {
      word = match[0];
      index = match.index;
      break;
    }
  }
  return {
    text: word,
    index
  };
}
function getClickedTextObjFromDoc(x, y, minNodeLength = 10) {
  let range, nodeText, offset;
  if (document.caretRangeFromPoint) {
    range = document.caretRangeFromPoint(x, y);
    if (range.startContainer.nodeType === Node.TEXT_NODE) {
      nodeText = range.startContainer.nodeValue.trim();
    } else {
      return null;
    }
    offset = range.startOffset;
  }
  if (nodeText.length < minNodeLength) {
    return null;
  }
  return {
    text: nodeText,
    index: offset,
    el: range.startContainer.parentNode
  };
}
function getMarkdownHeadings(bodyLines, headingFilter = "") {
  const headers = [];
  let accumulatedIndex = 0;
  bodyLines.forEach((line, index) => {
    const match = line.match(/^(#+)[\s]?(.*)$/);
    if (match && (headingFilter == "" || match[2] == headingFilter)) {
      headers.push({
        fullText: match[0],
        level: match[1].length,
        text: match[2],
        line: index,
        startIndex: accumulatedIndex,
        endIndex: accumulatedIndex + match[0].length - 1
      });
    }
    accumulatedIndex += line.length + 1;
  });
  return headers;
}
function fileContainsHeading(fileContent, heading) {
  const fileContentLines = getLinesInString(fileContent);
  const mdHeadings = getMarkdownHeadings(fileContentLines, heading);
  return mdHeadings.length > 0;
}
function findFirstLineAfterFrontMatter(markdown) {
  const lines = getLinesInString(markdown);
  let inFrontMatter = false;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    if (line === "---") {
      inFrontMatter = !inFrontMatter;
      if (!inFrontMatter) {
        return i;
      }
    }
  }
  return 0;
}
function getLinesInString(input) {
  const lines = input.split("\n");
  if (lines.length > 0 && lines[lines.length - 1] === "") {
    lines.pop();
  }
  return lines;
}
function insertTextAfterLine(text, body, line, filePath) {
  const splitContent = body.split("\n");
  const pre = splitContent.slice(0, line + 1).join("\n");
  const post = splitContent.slice(line + 1).join("\n");
  return `${pre}
${text}
${post}`;
}
function getListTypeFromLineNumber(fullText, lineNumber) {
  const lines = fullText.split("\n");
  if (lineNumber >= 0 && lineNumber < lines.length) {
    const line = lines[lineNumber];
    const leadingWhitespace = line.match(/^\s*/)[0];
    if (/^\s*-\s\[\s\]\s/.test(line)) {
      return leadingWhitespace + "- [ ] ";
    } else if (/^\s*-\s\[x\]\s/.test(line)) {
      return leadingWhitespace + "- [ ] ";
    } else if (/^\s*-\s/.test(line)) {
      return leadingWhitespace + "- ";
    } else if (/^\s*\d+\.\s/.test(line)) {
      const num = parseInt(line.match(/^\s*(\d+)\./)[1], 10);
      return leadingWhitespace + `${num}. `;
    } else if (/^\s*>\s/.test(line)) {
      return leadingWhitespace + "> ";
    }
  } else {
  }
  return "";
}
function removeTagFromString(inputText, hashtagToRemove, all = true) {
  const regex = new RegExp(
    "\\s?" + hashtagToRemove.replace(/#/g, "\\#") + "(?!\\w|\\/)",
    all ? "gi" : "i"
  );
  return inputText.replace(regex, "").trim();
}
function insertTextInString(newText, sourceText, charPos) {
  return sourceText.substring(0, charPos) + newText + " " + sourceText.substring(charPos);
}
function replaceTextInString(replaceText, sourceText, newText, all = false) {
  const escapedReplaceText = escapeRegExp(replaceText.trim()).replace(/\n/g, "\\s*\\n\\s*");
  const regex = new RegExp(escapedReplaceText, all ? "gsi" : "si");
  return sourceText.trim().replace(regex, newText.trim()).trim();
}
function truncateStringAtWord(str, maxChars = 16) {
  if (str.length <= maxChars)
    return str;
  let truncated = str.substr(0, maxChars);
  const lastSpace = truncated.lastIndexOf(" ");
  if (lastSpace > 0)
    truncated = truncated.substr(0, lastSpace);
  return truncated;
}
function contentChangedTooMuch(original, modified, tag, buffer = 5) {
  const expectedChange = tag.length;
  const threshold = expectedChange + buffer;
  const actualChange = Math.abs(original.length - modified.length);
  return actualChange > threshold;
}
function fileObjFromTags(tags) {
  let tagsArray = tags.map((tag) => tag.replace(/#/g, "").toLowerCase());
  tagsArray = tagsArray.filter((tag, index, self) => self.indexOf(tag) === index);
  const tagsPart = tagsArray.join("+");
  const currentDate = /* @__PURE__ */ new Date();
  const datePart = currentDate.getDate().toString().padStart(2, "0") + //'-' +
  (currentDate.getMonth() + 1).toString().padStart(2, "0") + //'-' +
  currentDate.getFullYear().toString().slice(-2);
  const timePart = (
    //currentDate.getHours().toString().padStart(2, '0') + '-' +
    //currentDate.getMinutes().toString().padStart(2, '0') + '-' +
    currentDate.getSeconds().toString().padStart(2, "0")
  );
  const fileName = `Tag Summary (${datePart} ${timePart}).md`;
  const titleTagsPart = tagsArray.map((tag) => tag.charAt(0).toUpperCase() + tag.slice(1)).join(" + ");
  const title = `${titleTagsPart} Tag Summary`;
  return {
    fileName,
    title
  };
}
function getActiveFileFolder(activeFile) {
  if (!activeFile)
    return null;
  let folderPath;
  if (activeFile.path.includes("\\") || activeFile.path.includes("/")) {
    const pathSeparator = activeFile.path.includes("\\") ? "\\" : "/";
    const pathParts = activeFile.path.split(pathSeparator);
    pathParts.pop();
    folderPath = pathParts.join(pathSeparator);
    if (!folderPath.endsWith(pathSeparator)) {
      folderPath += pathSeparator;
    }
  } else {
    folderPath = "";
  }
  return folderPath;
}
function getTagsFromApp(app2, recentTags) {
  const tagsObject = app2.metadataCache.getTags();
  const tagsArray = Object.entries(tagsObject);
  tagsArray.sort((a, b) => b[1] - a[1]);
  if (recentTags.length > 0) {
    const recentTagsAsTuples = recentTags.map((tag) => [tag, 0]);
    const recentAndAllTags = recentTagsAsTuples.concat(tagsArray);
    return recentAndAllTags.map(([tag, _]) => tag.replace(/^#/, ""));
  } else {
    return tagsArray.map(([tag, _]) => tag.replace(/^#/, ""));
  }
}
async function validateFilePath(filePath) {
  const matchingFiles = await app.vault.getFiles().filter((file) => file.name === filePath);
  if (matchingFiles.length === 1) {
    const filePath2 = matchingFiles[0].path;
    const file = await this.app.vault.getAbstractFileByPath(filePath2);
    return file;
  } else if (matchingFiles.length > 1) {
    new Notice("Tag Buddy: Multiple files found with the same name. Can't safely edit tag.");
    return null;
  } else {
    new Notice("Tag Buddy: No file found. Try again, or this tag might be in an unsupported embed type.");
    return null;
  }
}
function ctrlCmdKey(event) {
  const isMac = import_obsidian2.Platform.isMacOS;
  if (isMac)
    return event.metaKey;
  else
    return event.ctrlKey;
}
function tagsInString(string, tag) {
  let regex;
  if (tag) {
    regex = new RegExp(tag.replace(/\//g, "\\/") + "(?![\\w\\/\\#])", "g");
  } else {
    regex = /#(\w+)(?![\w\/#])/g;
  }
  const matches = string.match(regex);
  return matches || [];
}
function countOccurrences(summaryTags, contentTags) {
  let count = 0;
  for (let tag of summaryTags) {
    count += contentTags.filter((item) => item === tag).length;
  }
  return count;
}
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
async function getEmbedFile(el) {
  let filePath = el.getAttribute("src");
  const linkArray = filePath.split("#");
  filePath = linkArray[0].trim() + ".md";
  const file = await validateFilePath(filePath);
  return file;
}
function isTagValid(tag, fullTag = false) {
  let tagPattern;
  if (fullTag)
    tagPattern = /^#[a-zA-Z0-9_\-\/]*[a-zA-Z_\-\/][a-zA-Z0-9_\-\/]*$/;
  else
    tagPattern = /^[a-zA-Z0-9_\-\/]*[a-zA-Z_\-\/][a-zA-Z0-9_\-\/]*$/;
  return tagPattern.test(tag);
}
function extractValidTags(tagsString) {
  const potentialTags = tagsString.split(",");
  const validTags = potentialTags.map((tag) => tag.trim()).filter((tag) => isTagValid(tag, true));
  return validTags;
}

// Modal.ts
var import_obsidian3 = require("obsidian");
var TagSelector = class extends import_obsidian3.FuzzySuggestModal {
  constructor(app2, plugin, event, onChooseItemCallback) {
    super(app2);
    this.height = 215;
    this.noSelection = false;
    this.app = app2;
    this.plugin = plugin;
    this.tag = "";
    this.onChooseItemCallback = onChooseItemCallback;
    this.inputListener = this.listenInput.bind(this);
    this.tagCache = [];
    if (event != null)
      this.location = { x: event.pageX, y: event.pageY };
  }
  onOpen() {
    this.setPlaceholder("");
    this.inputEl.addEventListener("keyup", this.inputListener);
    if (!this.app.isMobile) {
      this.resultContainerEl.parentNode.style.width = "200px";
      this.resultContainerEl.style.height = "215px";
      this.resultContainerEl.parentNode.style.left = `${this.location.x}px`;
      this.resultContainerEl.parentNode.style.top = `${this.location.y}px`;
    } else {
      setTimeout(() => {
        this.inputEl.focus();
      }, 500);
    }
    super.onOpen();
  }
  onClose() {
    this.inputEl.removeEventListener("keyup", this.inputListener);
    super.onClose();
  }
  listenInput(event) {
    this.noSelection = false;
    if (!this.app.isMobile) {
      const itemsHeight = this.getSuggestions(this.inputEl.value).length * 42;
      const height = Math.min(this.height, Math.max(65, itemsHeight));
      this.resultContainerEl.style.height = `${height}px`;
    }
    if (event.key == "Enter" && !this.noSelection) {
      const text = this.inputEl.value.trim();
      const pattern = /(?=[^\d\s]+)[a-zA-Z0-9_\-\/]+/g;
      if (pattern.test(text)) {
        this.close();
        this.onChooseItem(this.inputEl.value);
      } else {
        new import_obsidian3.Notice("Invalid tag.");
      }
    }
  }
  /*getSuggestions(query: string) : string[]{
          const filteredTags = Utils.getTagsFromApp(
              this.app, 
              this.plugin.getRecentTags()).filter(tag => 
              //tag.toLowerCase().includes(query.toLowerCase())
              query == '' ? true : tag.toLowerCase() == query.toLowerCase()
          );
          return filteredTags;
      }
  
      renderSuggestion(header: string, el: HTMLElement) {
          el.createEl("div", { text: header });
      }*/
  onNoSuggestion() {
    super.onNoSuggestion();
    this.noSelection = true;
  }
  getItems() {
    const filteredTags = getTagsFromApp(
      this.app,
      this.plugin.getRecentTags()
    );
    return filteredTags;
  }
  getItemText(tag) {
    return tag;
  }
  async onChooseItem(result) {
    if (!this.app.isMobile) {
      this.onChooseItemCallback(result);
    } else {
      setTimeout(() => {
        this.onChooseItemCallback(result);
      }, 250);
    }
  }
};

// TagEditorModal.ts
var import_obsidian4 = require("obsidian");
var TBTagEditorModal = class extends import_obsidian4.Modal {
  //constructor(app: App, tag: String, onSubmit: (result: string) => void) {
  constructor(app2, plugin, tag, index, filePath = null, tagEl2 = null) {
    super(app2);
    this.settings = {
      originalTag: "",
      originalIndex: null,
      tagEl: null,
      filePath: null,
      batchAction: "instance",
      newName: "",
      summaryPos: "top",
      action: "rename"
    };
    this.plugin = plugin;
    this.settings.tagEl = tagEl2;
    this.settings.filePath = filePath;
    this.settings.originalTag = tag;
    this.settings.originalIndex = index;
  }
  onOpen() {
    let { contentEl, titleEl, modalEl, containerEl } = this;
    titleEl.setText("Tag Actions");
    this.editDiv = createEl("div");
    this.editDiv.classList.add("tag-editor-edit-div");
    this.optionsDiv = createEl("div");
    this.optionsDiv.classList.add("tag-editor-options");
    this.input = new import_obsidian4.TextComponent(this.editDiv);
    this.input.inputEl.classList.add("tag-editor-input");
    this.tagActionDropdown = new import_obsidian4.DropdownComponent(this.editDiv).addOption("rename", "Rename").addOption("lower", "Convert to lower case").addOption("totext", "Remove hash (#)").addOption("summary", "Create summary");
    this.tagActionDropdown.selectEl.classList.add("tag-editor-dropdown");
    contentEl.appendChild(this.editDiv);
    contentEl.appendChild(this.optionsDiv);
    this.showEditTagOptions("rename");
    const hr = createEl("hr");
    hr.classList.add("tag-editor-hr");
    contentEl.appendChild(hr);
    this.tagActionDropdown.onChange((value) => {
      this.settings.action = value;
      if (value == "summary") {
        this.showSummaryOptions();
      } else {
        this.showEditTagOptions(value);
      }
    });
    const submitBtn = new import_obsidian4.ButtonComponent(contentEl).setClass("tag-editor-submit").setButtonText("Submit").onClick(
      (evt) => {
        this.submitTagEdit();
      }
    );
  }
  submitTagEdit() {
    const isValidTag = isTagValid(this.settings.newName.trim(), true);
    const action = this.settings.action;
    let newName = this.settings.originalTag;
    if (action == "summary") {
      const summaryTags = extractValidTags(this.input.getValue());
      if (summaryTags.length < 1) {
        new import_obsidian4.Notice("Invalid tag format.");
      } else {
        this.plugin.tagSummary.createCodeBlock(summaryTags, this.settings.summaryPos);
        this.close();
      }
    } else if (action == "rename" && !isValidTag) {
      new import_obsidian4.Notice("Invalid tag format.");
    } else {
      if (action == "rename")
        newName = this.settings.newName;
      else if (action == "lower")
        newName = this.settings.originalTag.toLowerCase();
      else if (action == "totext")
        newName = this.settings.originalTag.substring(1);
      this.plugin.tagEditor.renameTag(
        this.settings.originalTag,
        newName,
        this.settings.batchAction == "instance" ? parseInt(this.settings.originalIndex) : this.settings.batchAction,
        this.settings.filePath,
        this.settings.tagEl
        //parseInt(this.settings.originalIndex),
        //((this.settings.batchAction == 'instance') ? parseInt(this.settings.originalIndex) : this.settings.batchAction)
      );
      this.close();
      setTimeout(async () => {
        this.plugin.tagSummary.update(tagEl.closest());
        paragraphEl.remove();
      }, 500);
    }
  }
  showSummaryOptions() {
    this.optionsDiv.empty();
    this.input.setDisabled(false);
    new import_obsidian4.Setting(this.optionsDiv).setName("Where do you want to add the tag summary?").setDesc("Add multiple tags above separated by a comma.").addDropdown(
      (opt) => opt.addOption("top", "Top of this note").addOption("end", "Bottom of this note").addOption("note", "In a new note").onChange(
        (value) => {
          this.settings.summaryPos = value;
        }
      )
    );
  }
  showEditTagOptions(editType) {
    this.optionsDiv.empty();
    this.input.setValue(this.settings.originalTag);
    this.input.setDisabled(true);
    if (editType == "rename") {
      const newName = new import_obsidian4.Setting(this.optionsDiv).setName("New name").setDesc("Tags can include letters, numbers, underscores (_), hyphens (-), and forward slashes (/) for nested tags.").addText(
        (opt) => opt.setValue("").onChange(
          (value) => {
            this.settings.newName = value;
          }
        )
      );
    }
    const whereEditOpt = new import_obsidian4.Setting(this.optionsDiv).setName("Where to make this change?").addDropdown(
      (opt) => opt.addOption("instance", "Just this instance").addOption("note", "All in this note").addOption("vault", "Across entire vault").onChange((value) => {
        if (value == "vault") {
          whereEditOpt.setDesc("WARNING: There is NO UNDO for vault changes. Consider making a backup of your vault first.");
          this.settings.batchAction = "vault";
        } else if (value == "note") {
          whereEditOpt.setDesc("Only tags in this note will be updated. Choose 'Across entire vault' to update this tag everywhere.");
          this.settings.batchAction = "note";
        } else if (value == "instance") {
          whereEditOpt.setDesc("");
          this.settings.batchAction = "instance";
        }
      })
    );
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};

// FindFileModal.ts
var import_obsidian5 = require("obsidian");
var SelectFileModal2 = class extends import_obsidian5.SuggestModal {
  constructor(app2, onSubmit) {
    super(app2);
    this.onSubmit = onSubmit;
    this.fileList = this.app.vault.getMarkdownFiles();
  }
  // Returns all available suggestions.
  getSuggestions(query) {
    return this.fileList.filter(
      (file) => file.path.includes(query)
    );
  }
  // Renders each suggestion item.
  renderSuggestion(file, el) {
    el.createEl("div", { text: file.name });
    el.createEl("small", { text: file.path });
  }
  // Perform action on the selected suggestion.
  onChooseSuggestion(file, evt) {
    this.onSubmit(file);
  }
  //onNoSuggestion(file: TFile, evt: MouseEvent | KeyboardEvent) {
  //new Notice(`No selection`);
  //this.onSubmit(file)
  //}
};

// gui.ts
var GUI = class {
  constructor(app2, plugin) {
    this.app = app2;
    this.plugin = plugin;
  }
  showTagEditor(tagEl2) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    const mode = view == null ? void 0 : view.getMode();
    if (this.app.isMobile) {
    } else {
    }
    const index = parseInt(tagEl2.getAttribute("md-index"));
    const tag = tagEl2.innerText;
    const filePath = tagEl2.getAttribute("file-source");
    const tagContainerType = tagEl2.getAttribute("type");
    if (mode == "preview") {
      const tagEditorModal = new TBTagEditorModal(
        this.app,
        this.plugin,
        tag,
        index,
        filePath,
        tagContainerType == "plugin-summary" ? tagEl2 : null
        //tag,
        //index
        //(tag)=>{
        //	console.log(tag) 
        //}
      ).open();
    }
  }
  /*isTagValid (tag:string):boolean { // including the #
  	const tagPattern = /^#[\w]+$/;
  	return tagPattern.test(tag);
  }*/
  makeButton(lable, clickFn, classId = "tagsummary-button") {
    const button = createEl("button");
    (0, import_obsidian6.setIcon)(button, lable);
    button.className = classId;
    this.plugin.registerDomEvent(
      button,
      "click",
      clickFn
    );
    return button;
  }
  makeBlockSelector(index) {
    const checkboxEl = createEl("div");
    checkboxEl.setAttribute("index", index);
    let checkedBtn;
    let uncheckedBtn;
    const checkBox = function(bool) {
      this.plugin.tagSummary.updateSelection(parseInt(checkboxEl.getAttribute("index")), bool);
      if (bool) {
        uncheckedBtn.remove();
        checkboxEl.appendChild(checkedBtn);
      } else {
        checkedBtn.remove();
        checkboxEl.appendChild(uncheckedBtn);
      }
    }.bind(this);
    checkedBtn = this.makeButton("check-square", (e) => {
      e.stopPropagation();
      checkBox(false);
    }, "tagsummary-button tagsummary-checkbox checked");
    checkedBtn.title = "Unselect this paragraph.";
    uncheckedBtn = this.makeButton("square", (e) => {
      e.stopPropagation();
      checkBox(true);
    }, "tagsummary-button tagsummary-checkbox");
    uncheckedBtn.title = "Select this paragraph.";
    checkBox(false);
    return checkboxEl;
  }
  makeRemoveTagButton(clickFn, paragraphEl2, tag) {
    const button = this.makeButton("list-x", (e) => {
      e.stopPropagation();
      clickFn(e, paragraphEl2, tag);
    });
    button.title = "Removed " + tag + " from paragraph.";
    return button;
  }
  makeSummaryRefreshButton(summaryEl) {
    const button = this.makeButton(
      "refresh-ccw",
      (e) => {
        e.stopPropagation();
        this.plugin.tagSummary.update(summaryEl);
        new import_obsidian6.Notice("Tag Summary updated");
        setTimeout(async () => {
        }, 10);
      }
    );
    button.title = "Refresh tag summary";
    return button;
  }
  makeCopyToSection(clickFn, content, sections, tags, filePath, paragraphEl2, summaryEl) {
    const copyToEl = createEl("span");
    const selectEl = createEl("selectEl");
    let dropdown = new import_obsidian6.DropdownComponent(selectEl);
    sections.forEach((sec) => {
      dropdown.addOption(sec, truncateStringAtWord(sec, 16));
    });
    dropdown.addOption("top", "Note top");
    dropdown.addOption("end", "Note end");
    selectEl.querySelector("select").className = "tagsummary-dropdown";
    if (platformSettingCheck(this.app, this.plugin.settings.copyToNoteBtn)) {
      copyToEl.appendChild(
        this.makeCopyToButton(
          clickFn,
          "note",
          dropdown,
          paragraphEl2,
          summaryEl,
          content,
          tags,
          filePath
        )
      );
    }
    if (platformSettingCheck(this.app, this.plugin.settings.copyLinkToSectionBtn)) {
      copyToEl.appendChild(
        this.makeCopyToButton(
          clickFn,
          "link",
          dropdown,
          paragraphEl2,
          summaryEl,
          content,
          tags,
          filePath
        )
      );
    }
    if (platformSettingCheck(this.app, this.plugin.settings.copyToSectionBtn)) {
      copyToEl.appendChild(
        this.makeCopyToButton(
          clickFn,
          "copy",
          dropdown,
          paragraphEl2,
          summaryEl,
          content,
          tags,
          filePath
        )
      );
    }
    if (platformSettingCheck(this.app, this.plugin.settings.moveToSectionBtn)) {
      copyToEl.appendChild(
        this.makeCopyToButton(
          clickFn,
          "move",
          dropdown,
          paragraphEl2,
          summaryEl,
          content,
          tags,
          filePath
        )
      );
    }
    if (platformSettingCheckMultiple(this.app, [
      this.plugin.settings.moveToSectionBtn,
      this.plugin.settings.copyToSectionBtn,
      this.plugin.settings.copyLinkToSectionBtn,
      this.plugin.settings.copyToNoteBtn
    ])) {
      copyToEl.appendChild(selectEl);
    }
    return copyToEl;
  }
  makeCopyToButton(clickFn, mode, dropdown, paragraphEl2, summaryEl, content, tags, filePath) {
    let buttonLabel;
    if (mode == "link")
      buttonLabel = "link";
    else if (mode == "copy")
      buttonLabel = "copy-plus";
    else if (mode == "move")
      buttonLabel = "replace";
    else if (mode == "note")
      buttonLabel = "file-plus-2";
    const button = this.makeButton(buttonLabel, async (e) => {
      e.stopPropagation();
      if (mode == "note") {
        new SelectFileModal2(this.app, (file) => {
          clickFn(e, mode, dropdown, paragraphEl2, summaryEl, content, tags, filePath, file);
        }).open();
      } else {
        clickFn(e, mode, dropdown, paragraphEl2, summaryEl, content, tags, filePath);
      }
    });
    let buttonHoverText;
    if (mode == "link")
      buttonHoverText = "Copy paragraph link.";
    else if (mode == "copy")
      buttonHoverText = "Copy paragraph.";
    else if (mode == "move")
      buttonHoverText = "Move paragraph.";
    else if (mode == "note")
      buttonHoverText = "Copy paragraph to section in note.";
    button.title = buttonHoverText;
    return button;
  }
  makeBakeButton(clickFn, summaryMd, summaryEl, filePath) {
    const button = this.makeButton(
      "stamp",
      async (e) => {
        e.stopPropagation();
        clickFn(summaryMd, summaryEl, filePath);
      }
    );
    button.title = "Flatten summary (replaces code block).";
    return button;
  }
  makeCopyButton(clickFn, content) {
    const button = this.makeButton("clipboard-list", (e) => {
      e.stopPropagation();
      clickFn(e, content);
    });
    button.title = "Copy paragraph to clipboard.";
    return button;
  }
  makeCopySummaryButton(summaryMd) {
    const button = this.makeButton(
      "clipboard-list",
      (e) => {
        e.stopPropagation();
        navigator.clipboard.writeText(summaryMd);
        new import_obsidian6.Notice("Summary copied to clipboard.");
      }
    );
    button.title = "Copy summary";
    return button;
  }
  makeSummaryNoteButton(clickFn, summaryMd, tags) {
    const button = this.makeButton(
      "file-plus-2",
      async (e) => {
        e.stopPropagation();
        clickFn(summaryMd, tags);
      }
    );
    button.title = "Create note from summary";
    return button;
  }
  showTagSelector(event) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    const mode = view == null ? void 0 : view.getMode();
    let pageX, pageY;
    let nodeType;
    let deepestNode;
    let range;
    if (this.app.isMobile) {
      const touch = event.touches[0] || event.changedTouches[0];
      pageX = Math.round(touch.pageX);
      pageY = Math.round(touch.pageY);
      range = document.caretRangeFromPoint(pageX, pageY);
      nodeType = range.startContainer.nodeType;
    } else {
      pageX = event.pageX;
      pageY = event.pageY;
      range = document.caretRangeFromPoint(pageX, pageY);
      nodeType = range.startContainer.nodeType;
    }
    if (mode == "preview") {
      if (nodeType === Node.TEXT_NODE) {
        const tagSelector = new TagSelector(
          this.app,
          this.plugin,
          event,
          (tag) => {
            this.plugin.tagEditor.add(
              "#" + tag,
              pageX,
              pageY
              //,
              //{range: range, el: deepestNode}
            );
          }
        ).open();
      }
    }
  }
  removeElementWithAnimation(el, callback) {
    const height = el.offsetHeight;
    el.style.height = `${height}px`;
    setTimeout(() => {
      el.style.height = "0px";
      el.style.opacity = "0";
      el.style.margin = "0";
      el.style.padding = "0";
    }, 0);
    el.addEventListener(
      "transitionend",
      function onEnd() {
        el.removeEventListener("transitionend", onEnd);
        callback();
      }
    );
  }
};

// TagSummary.ts
var import_obsidian7 = require("obsidian");
var TagSummary = class {
  constructor(app2, plugin) {
    this.app = app2;
    this.plugin = plugin;
  }
  async bakeSummaryBtnHandler(summaryMd, summaryEl, filePath) {
    const mdSource = summaryEl.getAttribute(
      "codeblock-code"
    );
    if (mdSource) {
      const file = await this.app.vault.getAbstractFileByPath(filePath);
      const fileContent = await this.app.vault.read(file);
      const newFileContent = replaceTextInString(
        mdSource,
        fileContent,
        summaryMd
      );
      this.app.vault.modify(file, newFileContent);
      const notice = new import_obsidian7.Notice("Tag summary flattened to active note.");
    } else {
      new import_obsidian7.Notice("\u26A0\uFE0F Tag Buddy: Can	 find code block source. This is a BUG. \u{1FAB2}");
    }
  }
  /*public static addSummary(file: TFile, summary: HTMLElement): void {
          if (!this.fileSummaries.has(file)) {
              this.fileSummaries.set(file, new Set([summary]));
          } else {
              const summaries = this.fileSummaries.get(file);
              summaries?.add(summary);
          }
      }
  
      // Method to retrieve an array of unique summary elements for a given file
      public static getSummariesByFile(file: TFile): HTMLElement[] {
          const summaries = this.fileSummaries.get(file);
          return summaries ? Array.from(summaries) : [];
      }*/
  copyBtnHandler(e, content) {
    const selection = window.getSelection().toString();
    let notice;
    if (selection != "") {
      navigator.clipboard.writeText(selection);
      notice = new import_obsidian7.Notice("Selection copied to clipboard.");
    } else {
      navigator.clipboard.writeText(content);
      notice = new import_obsidian7.Notice("Tagged paragraph copied to clipboard.");
    }
  }
  removeTagBtnHandler(e, paragraphEl2, tag) {
    const tagEl2 = getTagElement(paragraphEl2, tag);
    this.plugin.tagEditor.edit(tagEl2);
  }
  async copyToBtnHandler(e, mode, dropdown, paragraphEl2, summaryEl, content, tags, filePath, selectedFile) {
    let newContent;
    const selection = window.getSelection().toString();
    if (selection == "")
      newContent = content;
    else
      newContent = selection;
    let notice;
    if (mode == "link") {
      const fileName = filePath.split("/").pop().replace(/\.md$/, "");
      newContent = "[[" + filePath + "|" + fileName + "]]";
    }
    if (mode != "link" && !selection) {
      tags.forEach((tag, i) => {
        newContent = removeTagFromString(newContent, tag).trim();
      });
    }
    const copySuccess = await this.copyTextToSection(
      //this.plugin.settings.taggedParagraphCopyPrefix + 
      newContent,
      dropdown.getValue(),
      filePath,
      mode != "link",
      selectedFile
    );
    if (copySuccess) {
      if (mode == "note") {
        notice = new import_obsidian7.Notice(
          "Copied to section: " + dropdown.getValue() + " in " + selectedFile.name + " \u{1F517}",
          5e3
        );
        this.plugin.registerDomEvent(notice.noticeEl, "click", (e2) => {
          this.app.workspace.openLinkText(selectedFile.path + "#" + dropdown.getValue(), "");
        });
      } else if (mode == "move" && !selection) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        let fileContent = await this.app.vault.read(file);
        fileContent = fileContent.trim();
        const newFileContent = replaceTextInString(
          content.trim(),
          fileContent,
          newContent
        ).trim();
        if (fileContent != newFileContent) {
          this.app.vault.modify(file, newFileContent);
          const copiedToWhere = dropdown.getValue() == "top" ? "top of note" : dropdown.getValue() == "end" ? "end of note" : dropdown.getValue();
          notice = new import_obsidian7.Notice(
            //'Moved to section: ' + dropdown.getValue() +
            //'.\nðŸ”— Open source note.', 
            "Copied to section: " + dropdown.getValue() + ". " + (dropdown.getValue() == "top" || dropdown.getValue() == "end" ? "" : "\u{1F517}"),
            5e3
          );
          this.plugin.gui.removeElementWithAnimation(paragraphEl2, () => {
            setTimeout(async () => {
              this.update(summaryEl);
              paragraphEl2.remove();
            }, 500);
            setTimeout(async () => {
            }, 800);
          });
          if (dropdown.getValue() != "top" || dropdown.getValue() != "end") {
            this.plugin.registerDomEvent(notice.noticeEl, "click", (e2) => {
              this.app.workspace.openLinkText(this.app.workspace.getActiveFile().path + "#" + dropdown.getValue(), "");
            });
          }
        } else {
          new import_obsidian7.Notice("Copied to section: " + dropdown.getValue() + ".\nCan't update source file.");
        }
      } else if (mode == "copy" || mode == "link") {
        notice = new import_obsidian7.Notice("Copied to section: " + dropdown.getValue() + ". " + (dropdown.getValue() == "top" || dropdown.getValue() == "end" ? "" : "\u{1F517}"));
        this.plugin.registerDomEvent(notice.noticeEl, "click", (e2) => {
          this.app.workspace.openLinkText(this.app.workspace.getActiveFile().path + "#" + dropdown.getValue(), "");
        });
      }
    }
  }
  async makeSummaryBtnHandler(summaryMd, tags, code = false, incrementFile = false) {
    const newNoteObj = fileObjFromTags(tags);
    let fileContent = code ? summaryMd : "## " + newNoteObj.title + "\n\n" + summaryMd;
    const view = await this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
    const filePath = getActiveFileFolder(this.app.workspace.getActiveFile());
    const fileName = filePath + newNoteObj.fileName;
    const file = this.app.vault.getAbstractFileByPath(fileName);
    let notice;
    if (!code) {
      tags.forEach((tag) => {
        fileContent = replaceTextInString(tag, fileContent, tag.substring(1), true);
      });
    }
    if (file instanceof import_obsidian7.TFile && !incrementFile) {
      notice = new import_obsidian7.Notice("\u26A0\uFE0F Note already exists.\nClick here to overwrite.", 8e3);
      this.plugin.registerDomEvent(notice.noticeEl, "click", (e) => {
        this.app.vault.modify(file, fileContent);
        notice = new import_obsidian7.Notice("Note updated.\n\u{1F517} Open note.", 5e3);
        this.plugin.registerDomEvent(notice.noticeEl, "click", (e2) => {
          this.app.workspace.openLinkText(fileName, "");
        });
      });
    } else if (!file) {
      this.app.vault.create(fileName, fileContent);
      const notice2 = new import_obsidian7.Notice("Summary note created. \u{1F4DC}\n\u{1F517} Open note.");
      this.plugin.registerDomEvent(notice2.noticeEl, "click", (e) => {
        this.app.workspace.openLinkText(newNoteObj.fileName, "");
      });
    }
  }
  createCodeBlock(tagsArray, pos) {
    const codeBlockString = "```tag-summary\ntags: " + tagsArray.join(" ") + "\n```";
    if (pos == "note") {
      this.makeSummaryBtnHandler(codeBlockString, tagsArray, true);
    } else {
      this.copyTextToSection(
        codeBlockString,
        pos,
        "",
        false
      );
    }
  }
  async codeBlockProcessor(source, el, ctx) {
    let tags = Array();
    let include = Array();
    let exclude = Array();
    let sections = Array();
    let max = 50;
    const maxPattern = /^\s*max:\s*(\d+)\s*$/;
    let match;
    const rows = source.split("\n").filter((row) => row.length > 0);
    rows.forEach((line) => {
      if (line.match(/^\s*tags:[\p{L}0-9_\-/# ]+$/gu)) {
        const content = line.replace(/^\s*tags:/, "").trim();
        let list = content.split(/\s+/).map((tag) => tag.trim());
        list = list.filter((tag) => {
          if (tag.match(/^#[\p{L}]+[^#]*$/u)) {
            return true;
          } else {
            return false;
          }
        });
        tags = list;
      }
      if (line.match(/^\s*include:[\p{L}0-9_\-/# ]+$/gu)) {
        const content = line.replace(/^\s*include:/, "").trim();
        let list = content.split(/\s+/).map((tag) => tag.trim());
        list = list.filter((tag) => {
          if (tag.match(/^#[\p{L}]+[^#]*$/u)) {
            return true;
          } else {
            return false;
          }
        });
        include = list;
      }
      if (line.match(/^\s*exclude:[\p{L}0-9_\-/# ]+$/gu)) {
        const content = line.replace(/^\s*exclude:/, "").trim();
        let list = content.split(/\s+/).map((tag) => tag.trim());
        list = list.filter((tag) => {
          if (tag.match(/^#[\p{L}]+[^#]*$/u)) {
            return true;
          } else {
            return false;
          }
        });
        exclude = list;
      }
      if (line.match(/^\s*sections:[\p{L}0-9_\-/#, ]+$/gu)) {
        const content = line.replace(/^\s*sections:/, "").trim();
        let list = content.split(",").map((sec) => sec.trim());
        sections = list;
      }
      match = line.match(maxPattern);
      if (match) {
        max = Math.min(50, Number(match[1]));
      }
    });
    const codeBlock = "```tag-summary\n" + source.trim() + "\n```";
    if (tags.length > 0 || include.length > 0) {
      await this.create(
        el,
        tags,
        include,
        exclude,
        sections,
        max,
        ctx.sourcePath,
        codeBlock
      );
    } else {
      this.createEmpty(
        el,
        tags ? tags : [],
        include ? include : [],
        exclude ? exclude : [],
        sections ? sections : [],
        max ? max : [],
        ctx.sourcePath ? ctx.sourcePath : "",
        codeBlock
      );
    }
  }
  createEmpty(element, tags, include, exclude, sections, max, fileCtx, mdSource) {
    const container = createEl("div");
    const textDiv = createEl("blockquote");
    textDiv.innerHTML = "There are no notes with tagged paragraphs that match the tags:<br>" + (tags.length > 0 ? tags.join(", ") : "No tags specified.") + "<br>";
    container.appendChild(textDiv);
    container.setAttribute(
      "codeblock-tags",
      tags.length > 0 ? tags.join(",") : ""
    );
    container.setAttribute(
      "codeblock-tags-include",
      include ? include.join(",") : ""
    );
    container.setAttribute(
      "codeblock-tags-exclude",
      exclude ? exclude.join(",") : ""
    );
    container.setAttribute(
      "codeblock-sections",
      sections ? sections.join(",") : ""
    );
    container.setAttribute(
      "codeblock-max",
      max
    );
    container.setAttribute(
      "codeblock-code",
      mdSource
    );
    container.appendChild(this.plugin.gui.makeSummaryRefreshButton(container));
    ;
    element.replaceWith(container);
  }
  async create(element, tags, include, exclude, sections, max, fileCtx, mdSource) {
    const activeFile = await this.app.workspace.getActiveFile();
    const validTags = tags.concat(include);
    const tempComponent = new TempComponent();
    const summaryContainer = createEl("div");
    this.selectedBlocks = [];
    this.blocks = [];
    summaryContainer.setAttribute(
      "class",
      "tag-summary-block"
    );
    let listFiles = this.app.vault.getMarkdownFiles();
    listFiles = listFiles.filter((file) => {
      const cache = this.app.metadataCache.getFileCache(file);
      const tagsInFile = (0, import_obsidian7.getAllTags)(cache);
      if (file.path.includes("_exclude"))
        return false;
      if (validTags.some((value) => tagsInFile == null ? void 0 : tagsInFile.includes(value))) {
        return true;
      }
      return false;
    });
    listFiles = listFiles.sort((file1, file2) => {
      return file2.stat.ctime - file1.stat.ctime;
    });
    let listContents = await this.readFiles(listFiles);
    let count = 0;
    let summary = "";
    listContents.forEach((item) => {
      const fileName = item[0].name.replace(/.md$/g, "");
      const filePath = item[0].path;
      let listParagraphs = Array();
      const blocks = item[1].split(/\n\s*\n/).filter((row) => row.trim().length > 0);
      blocks.forEach((paragraph) => {
        let valid = false;
        let listTags = paragraph.match(/(?<=^|\s)(#[^\s#.,;!?:]+)/g);
        if (listTags != null && listTags.length > 0) {
          if (!paragraph.contains("```") && !paragraph.contains("---")) {
            valid = this.isValidText(listTags, tags, include, exclude);
          }
        }
        if (valid)
          listParagraphs.push(paragraph);
      });
      listParagraphs.forEach(async (paragraph) => {
        if (count++ >= max)
          return;
        paragraph += "\n";
        var regex = new RegExp();
        var tagText = new String();
        var tagSection = null;
        tags.forEach((tag) => {
          tagText = tag.replace("#", "\\#");
          regex = new RegExp(`${tagText}(\\W|$)`, "g");
          if (paragraph.match(regex) != null) {
            tagSection = tag;
          }
        });
        const buttonContainer = createEl("div");
        buttonContainer.setAttribute("class", "tagsummary-buttons");
        const paragraphEl2 = createEl("blockquote");
        paragraphEl2.setAttribute("file-source", filePath);
        paragraphEl2.setAttribute("index", count - 1);
        paragraphEl2.setAttribute("class", "tag-summary-paragraph");
        const blockLink = paragraph.match(/\^[\p{L}0-9_\-/^]+/gu);
        let link;
        if (blockLink)
          link = "[[" + filePath + "#" + blockLink + "|" + fileName + "]]";
        else
          link = "[[" + filePath + "|" + fileName + "]]";
        buttonContainer.appendChild(
          this.plugin.gui.makeCopyToSection(
            this.copyToBtnHandler.bind(this),
            paragraph,
            sections,
            tags,
            blockLink ? filePath + "#" + blockLink[0] : filePath,
            paragraphEl2,
            summaryContainer
          )
        );
        if (platformSettingCheck(this.app, this.plugin.settings.copyToCBBtn)) {
          buttonContainer.appendChild(
            this.plugin.gui.makeCopyButton(
              this.copyBtnHandler.bind(this),
              paragraph.trim()
            )
          );
        }
        if (platformSettingCheck(this.app, this.plugin.settings.removeTagBtn)) {
          buttonContainer.appendChild(
            this.plugin.gui.makeRemoveTagButton(
              this.removeTagBtnHandler.bind(this),
              paragraphEl2,
              tagSection
              //, 
              //(blockLink ? (filePath + '#' + blockLink[0]) : filePath)
            )
          );
        }
        const mdParagraph = paragraph;
        paragraph = "**" + link + "**\n" + paragraph;
        summary += paragraph + "\n";
        paragraphEl2.setAttribute("md-source", mdParagraph);
        blocks.push(mdParagraph);
        await import_obsidian7.MarkdownRenderer.render(this.app, paragraph, paragraphEl2, "", tempComponent);
        const titleEl = createEl("span");
        titleEl.setAttribute("class", "tagsummary-item-title");
        titleEl.appendChild(paragraphEl2.querySelector("strong").cloneNode(true));
        paragraphEl2.appendChild(buttonContainer);
        paragraphEl2.querySelector("strong").replaceWith(titleEl);
        summaryContainer.appendChild(paragraphEl2);
      });
    });
    if (summary != "") {
      setTimeout(async () => {
        if (this.plugin.settings.showSummaryButtons) {
          summaryContainer.appendChild(
            this.plugin.gui.makeSummaryRefreshButton(
              summaryContainer
            )
          );
          summaryContainer.appendChild(
            this.plugin.gui.makeCopySummaryButton(
              summary
            )
          );
          summaryContainer.appendChild(
            this.plugin.gui.makeSummaryNoteButton(
              this.makeSummaryBtnHandler.bind(this),
              summary,
              tags
            )
          );
          summaryContainer.appendChild(
            this.plugin.gui.makeBakeButton(
              this.bakeSummaryBtnHandler.bind(this),
              summary,
              summaryContainer,
              activeFile.path
            )
          );
          summaryContainer.appendChild(createEl("br"));
        }
      }, 0);
      summaryContainer.setAttribute(
        "codeblock-tags",
        tags.join(",")
      );
      summaryContainer.setAttribute(
        "codeblock-tags-include",
        include.length > 0 ? include.join(",") : ""
      );
      summaryContainer.setAttribute(
        "codeblock-tags-exclude",
        exclude.length > 0 ? exclude.join(",") : ""
      );
      summaryContainer.setAttribute(
        "codeblock-sections",
        sections.length > 0 ? sections.join(",") : ""
      );
      summaryContainer.setAttribute(
        "codeblock-max",
        max
      );
      summaryContainer.setAttribute(
        "codeblock-code",
        mdSource
      );
      element.replaceWith(summaryContainer);
    } else {
      this.createEmpty(
        element,
        tags ? tags : [],
        include ? include : [],
        exclude ? exclude : [],
        sections ? sections : [],
        max ? max : [],
        "",
        mdSource
      );
    }
  }
  update(summaryEl) {
    const tagsStr = summaryEl.getAttribute(
      "codeblock-tags"
    );
    const tags = tagsStr ? tagsStr.split(",") : [];
    const tagsIncludeStr = summaryEl.getAttribute(
      "codeblock-tags-include"
    );
    const tagsInclude = tagsIncludeStr ? tagsIncludeStr.split(",") : [];
    const tagsExcludeStr = summaryEl.getAttribute(
      "codeblock-tags-exclude"
    );
    const tagsExclude = tagsExcludeStr ? tagsExcludeStr.split(",") : [];
    const sectionsStr = summaryEl.getAttribute(
      "codeblock-sections"
    );
    const sections = sectionsStr ? sectionsStr.split(",") : [];
    const max = Number(summaryEl.getAttribute(
      "codeblock-max"
    ));
    const mdSource = summaryEl.getAttribute(
      "codeblock-code"
    );
    this.create(
      summaryEl,
      tags,
      tagsInclude,
      tagsExclude,
      sections,
      max,
      "",
      mdSource
    );
  }
  // Not factored yet
  async copyTextToSection(text, section, filePath, addLink = true, selectedFile, detectPrefix = true) {
    const file = selectedFile ? selectedFile : await this.app.workspace.getActiveFile();
    let fileContent = await this.app.vault.read(file);
    const fileContentLines = getLinesInString(fileContent);
    const mdHeadings = getMarkdownHeadings(fileContentLines);
    let targetLine;
    if (mdHeadings.length <= 0 || section == "end" || section == "top") {
      if (section == "top") {
        targetLine = findFirstLineAfterFrontMatter(fileContent);
        if (targetLine == 0)
          fileContent = "\n" + fileContent;
      } else if (section == "end") {
        targetLine = fileContentLines.length - 1;
      }
    } else if (mdHeadings.length > 0) {
      const headingObj = mdHeadings.find((heading) => heading.text.trim() === section);
      if (headingObj) {
        targetLine = headingObj.line;
      } else {
        new import_obsidian7.Notice(`${section} not found.`);
        return false;
      }
    }
    const linePrefix = detectPrefix ? getListTypeFromLineNumber(fileContent, targetLine + 1) : "";
    let finalText;
    if (addLink)
      finalText = linePrefix + text + ` [[${filePath}|\u{1F517}]]`;
    else
      finalText = linePrefix + text;
    let newContent = insertTextAfterLine(finalText, fileContent, targetLine);
    await this.app.vault.modify(file, newContent);
    return true;
  }
  async readFiles(listFiles) {
    let list = [];
    for (let t = 0; t < listFiles.length; t += 1) {
      const file = listFiles[t];
      let content = await this.app.vault.cachedRead(file);
      list.push([file, content]);
    }
    return list;
  }
  isValidText(listTags, tags, include, exclude) {
    let valid = true;
    if (tags.length > 0) {
      valid = valid && tags.some((value) => listTags.includes(value));
    }
    if (include.length > 0) {
      valid = valid && include.every((value) => listTags.includes(value));
    }
    if (valid && exclude.length > 0) {
      valid = !exclude.some((value) => listTags.includes(value));
    }
    return valid;
  }
  static getTagsToCheckFromEl(tagSummaryEl) {
    const tagsStr = tagSummaryEl.getAttribute("codeblock-tags");
    const tags = tagsStr ? tagsStr.split(",") : [];
    const tagsIncludeStr = tagSummaryEl.getAttribute("codeblock-tags-include");
    const tagsInclude = tagsIncludeStr ? tagsIncludeStr.split(",") : [];
    return tags.concat(tagsInclude);
  }
  async getFile(el) {
    const filePath = el.getAttribute("file-source");
    const file = await this.app.vault.getAbstractFileByPath(filePath);
    return file;
  }
  updateSelection(index, bool) {
    if (bool) {
      if (!this.selectedBlocks.includes(index)) {
        this.selectedBlocks.push(index);
      }
    } else {
      this.selectedBlocks = this.selectedBlocks.filter((itemIndex) => itemIndex !== index);
    }
  }
  getSelectedMarkdownBlocks() {
  }
};
TagSummary.fileSummaries = /* @__PURE__ */ new Map();
var TempComponent = class extends import_obsidian7.Component {
  constructor() {
    super(...arguments);
    this.doNotPostProcess = true;
  }
  onload() {
  }
  onunload() {
  }
};

// TagProcessor.ts
var import_obsidian8 = require("obsidian");
var TagProcessor = class {
  constructor(app2, plugin) {
    this.outOfSync = false;
    this.app = app2;
    this.plugin = plugin;
    this.debouncedProcessActiveFileTagEls = (0, import_obsidian8.debounce)(this.processActiveFileTags.bind(this), 500);
    this.debouncedProcessActiveFileTagEls();
  }
  reset() {
    this.outOfSync = false;
  }
  filterActiveFileTagEls(tags) {
    const filteredTagElements = Array.from(tags).filter((tag) => {
      if (tag.closest(".frontmatter-section-data"))
        return false;
      if (tag.parentElement.closest(".markdown-embed"))
        return false;
      if (tag.closest(".markdown-embed"))
        return false;
      if (tag.parentElement.closest(".tag-summary-block"))
        return false;
      return true;
    });
    return filteredTagElements;
  }
  async renderPostProcessor(el, ctx) {
    const processingFile = this.app.vault.getAbstractFileByPath(ctx.sourcePath);
    const activeFile = this.app.workspace.getActiveFile();
    const activeFilePath = activeFile == null ? void 0 : activeFile.path;
    const nativeEmbedEl = el.querySelector(".internal-embed");
    const tags = el.querySelectorAll(".tag");
    if (nativeEmbedEl && ctx.sourcePath == activeFilePath || ctx.sourcePath == activeFilePath && tags.length > 0 || el.classList.contains("tag-summary-paragraph")) {
      if (this.plugin.settings.debugMode)
        console.log("Tag Buddy: renderPostProcessor");
    } else {
      return;
    }
    if (nativeEmbedEl) {
      let nativeEmbedObserver;
      nativeEmbedObserver = new MutationObserver((mutationsList) => {
        const target = mutationsList[0].target;
        if (target.querySelectorAll(".tag").length > 0) {
          nativeEmbedObserver.disconnect();
          this.processNativeEmbed(target);
        }
      });
      nativeEmbedObserver.observe(nativeEmbedEl, { childList: true, subtree: true });
    }
    if (el.classList.contains("tag-summary-paragraph")) {
      this.processTagSummaryParagraph(el);
      return;
    }
    this.debouncedProcessActiveFileTagEls();
  }
  async processActiveFileTags() {
    if (this.plugin.settings.debugMode)
      console.log("Tag Buddy: processing active file tags");
    const view = await this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
    const mode = view == null ? void 0 : view.getMode();
    if (mode == "preview") {
      const activeFile = await this.app.workspace.getActiveFile();
      const fileContent = await this.app.vault.read(activeFile);
      const sections = view.currentMode.renderer.sections;
      const activeFileTagEls = [];
      const activeFileTags = await this.getMarkdownTags(
        activeFile,
        fileContent
      );
      sections.forEach((section) => {
        Array.from(section.el.querySelectorAll(".tag")).forEach((tag) => {
          activeFileTagEls.push(tag);
        });
      });
      const filteredTagElements = this.filterActiveFileTagEls(activeFileTagEls);
      if (filteredTagElements.length > 0) {
        this.assignMarkdownTags(
          activeFileTags,
          filteredTagElements,
          0,
          //startIndex,
          "active"
        );
      }
    }
  }
  async processTagSummaryParagraph(paragraphEl2) {
    if (this.plugin.settings.debugMode)
      console.log("Tag Buddy: processTagSummaryParagraph");
    const filePath = paragraphEl2.getAttribute("file-source");
    const markdownBlock = paragraphEl2.getAttribute("md-source").trim();
    const file = await this.app.vault.getAbstractFileByPath(filePath);
    const fileContent = await this.app.vault.read(file);
    const startIndex = fileContent.indexOf(markdownBlock);
    const mdTags = this.getMarkdownTags(
      file,
      fileContent
    );
    this.assignMarkdownTags(
      mdTags,
      paragraphEl2.querySelectorAll(".tag"),
      startIndex,
      "plugin-summary"
    );
  }
  // adapt this method to use the cache tag info (line, offset, etc)
  getMarkdownTags(file, fileContent) {
    const tagPositions = [];
    let match;
    const regex = /(?<=^|\s)(#(?=[^\s#.'â€™,;!?:]*[^\d\s#.'â€™,;!?:])[^\s#.'â€™,;!?:]+)(?=[.,;!?:'â€™\s]|$)|(?<!`)```(?!`)/g;
    let insideCodeBlock = false;
    while ((match = regex.exec(fileContent)) !== null) {
      if (match[0].trim() === "```") {
        insideCodeBlock = !insideCodeBlock;
        continue;
      }
      if (insideCodeBlock)
        continue;
      const tag = match[0].trim();
      tagPositions.push({ tag, index: match.index, source: file.name });
    }
    return tagPositions;
  }
  async assignMarkdownTags(tagPositions, tagElements, startIndex, type) {
    if (type == "active") {
      if (this.plugin.settings.debugMode) {
        const activeFilePath = this.app.workspace.getActiveFile().path;
        console.log(tagPositions.length, tagElements.length);
        const temp1 = [];
        tagPositions.forEach((nodeObj) => {
          temp1.push(nodeObj.tag);
        });
        const temp2 = [];
        tagElements.forEach((nodeObj) => {
          temp2.push(nodeObj.innerText);
        });
        console.log(temp1, temp2);
      }
      if (tagPositions.length != tagElements.length) {
        this.outOfSync = true;
        new import_obsidian8.Notice("Tag Buddy: Markdown source and preview tags out of sync. Try refreshing this summary. Then check for tag syntax errors or conflicts in metadata. Please report if this error persists.", 1e4);
        if (this.plugin.settings.debugMode)
          this.logDifferences(tagPositions, tagElements);
        return;
      }
    }
    let tagEl2;
    const tagElArray = Array.from(tagElements);
    let tagElIndex = 0;
    let tagPos;
    for (let i = 0; i < tagPositions.length; i++) {
      tagPos = tagPositions[i];
      if (tagPos.index >= startIndex) {
        tagEl2 = tagElArray[tagElIndex];
        if (tagEl2) {
          if (tagEl2.innerText.trim() == tagPos.tag.trim()) {
            tagEl2.setAttribute("md-index", tagPos.index);
            tagEl2.setAttribute("file-source", tagPos.source);
            tagEl2.setAttribute("type", type);
            tagEl2.setAttribute("pos", i);
            tagElIndex++;
          } else {
            this.outOfSync = true;
            new import_obsidian8.Notice("Tag Buddy: Markdown source and preview tags out of sync. Try refreshing this summary. Then check for tag syntax errors or conflicts in metadata. Please report if this error persists.");
            this.logDifferences(tagPositions, tagElements);
            return;
          }
        }
      }
    }
    ;
    return tagElArray;
  }
  async processNativeEmbed(embed, checkDuplicates = false) {
    if (this.plugin.settings.debugMode)
      console.log("Tag Buddy: processNativeEmbed");
    embed = embed.closest(".markdown-embed");
    if (embed == null ? void 0 : embed.getAttribute("src")) {
      const linkElement = embed.getAttribute("src");
      let filePath = embed.getAttribute("src");
      const linkArray = filePath.split("#");
      const hasAnchorLink = linkArray.length > 1;
      let anchorLinkType = "";
      let anchorLink;
      if (hasAnchorLink) {
        anchorLink = linkArray[1];
        anchorLinkType = anchorLink.startsWith("^") ? "block" : "header";
      }
      filePath = linkArray[0].trim() + ".md";
      const file = await validateFilePath(filePath);
      if (file) {
        const fileContent = await this.app.vault.read(file);
        const embededTagFile = await this.getMarkdownTags(file, fileContent);
        if (hasAnchorLink && anchorLinkType != "") {
          if (anchorLinkType == "header" && !fileContainsHeading(fileContent, anchorLink)) {
            embed.setAttribute("embed-success", "false");
            return;
          } else {
            embed.setAttribute("embed-success", "true");
          }
        }
        const tempComponent = new TempComponent2();
        const tempContainerHTML = createEl("div");
        await import_obsidian8.MarkdownRenderer.renderMarkdown(
          fileContent,
          tempContainerHTML,
          "noFile",
          //file.path, 
          tempComponent
        );
        const innerText = await embed.querySelector(".markdown-embed-content").innerText;
        const startIndex = tempContainerHTML.innerText.indexOf(innerText);
        this.assignMarkdownTags(
          embededTagFile,
          embed.querySelectorAll(".tag"),
          startIndex,
          "native-embed"
        );
      }
    }
  }
  logDifferences(tagPositions, tagElements) {
    const tags = tagPositions.map((item) => item.tag);
    const innerTexts1 = tagElements.map((item) => item.innerText);
    let uniqueToTagPositions = [];
    let uniqueToTagElements = [];
    const findUnique = (arr1, arr2) => {
      return arr1.filter((item) => !arr2.includes(item));
    };
    uniqueToTagPositions = findUnique(tags, innerTexts1);
    uniqueToTagElements = findUnique(innerTexts1, tags);
    console.log("differences:", uniqueToTagPositions.length, uniqueToTagElements.length);
    if (uniqueToTagPositions.length) {
      console.log("Unique to tagPositions based on tag:", uniqueToTagPositions);
    }
    if (uniqueToTagElements.length) {
      console.log("Unique to tagElements based on innerText:", uniqueToTagElements);
    }
  }
};
var TempComponent2 = class extends import_obsidian8.Component {
  onload() {
  }
  onunload() {
  }
};

// ReadingModeTagEditor.ts
var import_obsidian9 = require("obsidian");
var ReadingModeTagEditor = class {
  constructor(app2, plugin) {
    this.app = app2;
    this.plugin = plugin;
  }
  //async renameTag (tag, newName, batchAction: string | number, specificFile:TFile = null) {
  async renameTag(tag, newName, batchAction, filePath = null, tagEl2) {
    const activeFile = await this.app.workspace.getActiveFile();
    const file = filePath == null ? activeFile : await validateFilePath(filePath);
    if (!file)
      return;
    const fileContent = await this.app.vault.read(file);
    if (typeof batchAction === "number") {
      const newFileContent = this.renameTagInStringByIndex(
        tag,
        newName,
        parseInt(batchAction),
        fileContent
      );
      this.app.vault.modify(file, newFileContent);
    } else if (batchAction == "note") {
      this.renameTagsInFileByIndex(
        tag,
        newName,
        file
      );
    } else if (batchAction == "vault") {
      this.renameTagsInVaultByIndex(
        tag,
        newName
      );
    }
    if (activeFile != file && tagEl2) {
      new import_obsidian9.Notice("Refresh this summary to see changes.", 5e3);
    }
  }
  async renameTagsInVaultByIndex(tag, newName) {
    const validTags = [tag];
    let listFiles = this.app.vault.getMarkdownFiles();
    listFiles = listFiles.filter((file) => {
      const cache = this.app.metadataCache.getFileCache(file);
      const tagsInFile = (0, import_obsidian9.getAllTags)(cache);
      if (validTags.some((value) => tagsInFile == null ? void 0 : tagsInFile.includes(value))) {
        return true;
      }
      return false;
    });
    let listContents = await this.plugin.tagSummary.readFiles(listFiles);
    listContents.forEach(async (note) => {
      this.renameTagsInFileByIndex(
        tag,
        newName,
        note[0]
      );
    });
  }
  async renameTagsInFileByIndex(tag, newName, file) {
    const fileContent = await this.app.vault.read(file);
    let newFileContent = fileContent;
    const tagPositions = this.plugin.tagProcessor.getMarkdownTags(file, fileContent);
    let filteredTagObjs = tagPositions.filter((tagObj) => tagObj.tag === tag);
    if (filteredTagObjs.length > 0) {
      filteredTagObjs.sort((a, b) => a.index - b.index);
      let offset = 0;
      filteredTagObjs.forEach((tagObj) => {
        const newIndex = tagObj.index + offset;
        newFileContent = newFileContent.substring(0, newIndex) + newName + newFileContent.substring(newIndex + tagObj.tag.length);
        offset += newName.length - tagObj.tag.length;
      });
      this.app.vault.modify(file, newFileContent);
    } else {
    }
  }
  renameTagInStringByIndex(tag, newName, index, fileContent) {
    const newContent = fileContent.substring(0, parseInt(index)) + newName + fileContent.substring(parseInt(index) + parseInt(tag.length));
    return newContent;
  }
  async add(tag, x, y) {
    if (this.plugin.settings.debugMode) {
      console.log("Tag Buddy add " + tag + " at (" + x + ", " + y + ")");
    }
    let fileContent;
    let file;
    const clickedTextObj = getClickedTextObjFromDoc(x, y);
    const clickedText = clickedTextObj == null ? void 0 : clickedTextObj.text;
    const clickedTextIndex = clickedTextObj == null ? void 0 : clickedTextObj.index;
    const clickedTextEl = clickedTextObj == null ? void 0 : clickedTextObj.el;
    let contentSourceType = null;
    let summaryEl = void 0;
    let embedEl = void 0;
    if (clickedTextObj) {
      try {
        summaryEl = clickedTextEl == null ? void 0 : clickedTextEl.closest(".tag-summary-paragraph");
        embedEl = clickedTextEl == null ? void 0 : clickedTextEl.closest(".markdown-embed");
      } catch (e) {
      }
      if (summaryEl) {
        file = await this.plugin.tagSummary.getFile(summaryEl);
        fileContent = await this.app.vault.read(file);
        contentSourceType = "plugin-summary";
      } else if (embedEl) {
        file = await getEmbedFile(embedEl);
        fileContent = await this.app.vault.read(file);
        contentSourceType = "native-embed";
      } else {
        file = await this.app.workspace.getActiveFile();
        fileContent = await this.app.vault.read(file);
        contentSourceType = "active";
      }
    } else {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't find text position or area too busy.\nTry a another text area.");
      return;
    }
    if (clickedText) {
    } else {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't add tag.\nTry a different text area.");
      return;
    }
    const escapedClickedText = escapeRegExp(clickedText);
    const regex = new RegExp(escapedClickedText, "g");
    const matches = fileContent.match(regex);
    if (matches && matches.length > 1) {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't add tag: Clicked text repeated in note. Try a another text block.");
      return;
    } else if (matches && matches.length === 0 || !matches) {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't find text position or area too busy.\nTry a another text area.");
      return;
    }
    if (!this.plugin.settings.lockRecentTags)
      this.plugin.saveRecentTag(tag);
    const startIndex = regex.exec(fileContent).index;
    const endIndex = startIndex + clickedText.length;
    const clickedWordObj = getWordObjFromString(clickedText, clickedTextIndex);
    const clickedWord = clickedWordObj.text;
    const clickedWordIndex = clickedWordObj.index;
    let newContent;
    if (clickedWord) {
      if (isWordNearEnd(clickedText, clickedWord))
        newContent = insertTextInString(" " + tag, fileContent, endIndex);
      else
        newContent = insertTextInString(tag, fileContent, startIndex + clickedWordIndex);
    } else {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't find clicked word.\nPlease try again.");
      return;
    }
    await this.app.vault.modify(file, newContent);
    if (contentSourceType == "plugin-summary") {
      const summaryContainer = summaryEl.closest(".tag-summary-block");
      this.plugin.tagSummary.update(summaryContainer);
    } else if (contentSourceType == "native-embed") {
      setTimeout(async () => {
        this.plugin.tagProcessor.processNativeEmbed(embedEl, true);
      }, 200);
    }
  }
  async edit(tagEl2, event, pragraphEl, editType, newName) {
    let tagContainer;
    const tagContainerType = tagEl2.getAttribute(
      "type"
    );
    const index = tagEl2.getAttribute(
      "md-index"
    );
    const filePath = tagEl2.getAttribute(
      "file-source"
    );
    if (this.plugin.settings.debugMode) {
      console.log("Tag Buddy edit tag: " + tagEl2.innerText + "\nIn file: " + filePath);
    }
    if (tagContainerType == "native-embed")
      tagContainer = tagEl2.closest(".markdown-embed");
    else if (tagContainerType == "plugin-summary")
      tagContainer = tagEl2.closest(".tag-summary-paragraph");
    else
      tagContainer = this.app.workspace.activeLeaf.containerEl.querySelector(".markdown-reading-view");
    if (filePath) {
      const file = await validateFilePath(filePath);
      let fileContent;
      let fileContentBackup;
      const tag = tagEl2.innerText.trim();
      try {
        fileContent = await this.app.vault.read(file);
        fileContentBackup = fileContent;
      } catch (error) {
        new import_obsidian9.Notice("Tag Buddy file read error:\n" + error.message);
        return;
      }
      let safeToEmptyFile = false;
      const tagRegex = /^\s*#(\w+)\s*$/;
      if (tagRegex.test(fileContent.trim())) {
        safeToEmptyFile = true;
      }
      let beforeTag = fileContent.substring(0, index);
      let afterTag = fileContent.substring(
        Number(index) + Number(tag.length)
      );
      let afterTagChr = "";
      if (fileContent[index] === "\n")
        beforeTag += "\n";
      let newContent = "";
      if (editType == "rename") {
      } else if (!event) {
        newContent = beforeTag + afterTagChr + afterTag;
      } else if (editType == "hash") {
        const noHash = tag.substring(1);
        newContent = beforeTag + noHash + afterTagChr + afterTag;
        if (this.app.isMobile && this.plugin.settings.mobileNotices) {
          new import_obsidian9.Notice("Tag Buddy: " + tag + " converted to text.");
        }
      } else if (event.type == "touchend" || this.plugin.settings.mobileTagSearch || editType == "remove") {
        let parentTag = "";
        if (tag.includes("/")) {
          let parts = tag.split("/");
          const removedChild = parts.pop();
          parentTag = parts.join("/");
          newContent = beforeTag + parentTag + afterTagChr + afterTag;
          if (this.app.isMobile && this.plugin.settings.mobileNotices) {
            new import_obsidian9.Notice("Tag Buddy: '" + removedChild + "' removed from parent tag.");
          }
        } else {
          const startsWithPunctuation = /^[.,!:?;]/.test(afterTag.trimStart()[0]);
          if (beforeTag.endsWith(" ") && afterTag.startsWith(" ")) {
            newContent = beforeTag + afterTag.substring(1);
          } else if (startsWithPunctuation) {
            newContent = beforeTag.trimEnd() + afterTag.trimStart();
          } else {
            newContent = beforeTag + afterTag;
          }
          if (this.app.isMobile && this.plugin.settings.mobileNotices) {
            new import_obsidian9.Notice("Tag Buddy: " + tag + " removed.");
          }
        }
      }
      if (tagEl2.getAttribute("type") == "plugin-summary") {
        const summaryEl = tagEl2.closest(".tag-summary-paragraph");
        const mdSource = summaryEl.getAttribute("md-source").trim();
        const escapedText = escapeRegExp(mdSource);
        const regex = new RegExp(escapedText, "g");
        const matches = fileContent.match(regex);
        if (matches && matches.length > 1) {
          new import_obsidian9.Notice("\u26A0\uFE0F Can't safely remove/edit tag:\nSurrounding text repeated in source note.");
          return;
        } else if (matches && matches.length === 0 || !matches) {
          new import_obsidian9.Notice("\u26A0\uFE0F Can't find tag in source note.\n");
          return;
        }
        if (newContent == "" && !safeToEmptyFile || contentChangedTooMuch(
          fileContentBackup,
          newContent,
          tag,
          2
        )) {
          new import_obsidian9.Notice("Tag Buddy: File change error.");
          newContent = fileContentBackup;
        } else if (newContent == "" && safeToEmptyFile) {
          new import_obsidian9.Notice("Tag Buddy: Tag removed. The note is empty.");
        }
        setTimeout(async () => {
          const tagParagraphEl = tagEl2.closest(".tag-summary-paragraph");
          const tagSummaryBlock = tagEl2.closest(".tag-summary-block");
          const tagsToCheck = TagSummary.getTagsToCheckFromEl(tagSummaryBlock);
          const tagsInContent = tagsInString(tagParagraphEl.innerText);
          if (tagsToCheck.includes(tag)) {
            const tagCount = countOccurrences(tagsToCheck, tagsInContent);
            if (tagCount >= 2) {
              this.plugin.tagSummary.update(tagSummaryBlock);
            } else {
              const notice = new import_obsidian9.Notice(tag + " removed from paragraph.\n\u{1F517} Open source note.", 5e3);
              this.plugin.gui.removeElementWithAnimation(
                tagParagraphEl,
                () => {
                  setTimeout(async () => {
                    this.plugin.tagSummary.update(tagSummaryBlock);
                    tagParagraphEl.remove();
                  }, 500);
                }
              );
              this.plugin.registerDomEvent(
                notice.noticeEl,
                "click",
                (e) => {
                  this.app.workspace.openLinkText(filePath, "");
                }
              );
            }
          } else {
            this.plugin.tagSummary.update(tagSummaryBlock);
          }
        }, 200);
      } else if (tagEl2.getAttribute("type") == "native-embed") {
        setTimeout(async () => {
          this.plugin.tagProcessor.processNativeEmbed(tagContainer, true);
        }, 200);
      }
      try {
        await this.app.vault.modify(file, newContent);
      } catch (error) {
        try {
          const backupFileName = String(file.name.substring(0, file.name.indexOf(".md")) + " BACKUP.md");
          this.app.vault.create(backupFileName, fileContentBackup);
          new import_obsidian9.Notice("\u26A0\uFE0F Tag/note editing error: " + error.message + "\n" + backupFileName + " saved to vault root.", 1e4);
        } catch (error2) {
          navigator.clipboard.writeText(fileContentBackup);
          new import_obsidian9.Notice("\u26A0\uFE0F Tag/note editing error: " + error2.message + "\nNote content copied to clipboard.", 1e4);
        }
      }
      this.plugin.tagProcessor.debouncedProcessActiveFileTagEls();
    } else {
      new import_obsidian9.Notice("\u26A0\uFE0F Can't identify tag location. Please try again.");
    }
  }
};

// Mobile.ts
var DoubleTapHandler = class {
  constructor(plugin, element, callback) {
    this.plugin = plugin;
    this.element = element;
    this.callback = callback;
    this.lastTap = 0;
    this.plugin.registerDomEvent(
      this.element,
      "touchend",
      this.handleTouchEnd.bind(this),
      true
    );
  }
  handleTouchEnd(event) {
    const currentTime = (/* @__PURE__ */ new Date()).getTime();
    const tapLength = currentTime - this.lastTap;
    clearTimeout(this.timeout);
    if (tapLength < 500 && tapLength > 0) {
      this.callback(event);
    } else {
      this.timeout = setTimeout(() => {
        clearTimeout(this.timeout);
      }, 500);
    }
    this.lastTap = currentTime;
  }
};
var TripleTapHandler = class {
  constructor(plugin, element, callback) {
    this.plugin = plugin;
    this.element = element;
    this.callback = callback;
    this.lastTap = 0;
    this.tapCount = 0;
    this.plugin.registerDomEvent(
      this.element,
      "touchend",
      this.handleTouchEnd.bind(this),
      true
    );
  }
  handleTouchEnd(event) {
    const currentTime = (/* @__PURE__ */ new Date()).getTime();
    const tapLength = currentTime - this.lastTap;
    clearTimeout(this.timeout);
    if (tapLength < 500 && tapLength > 0) {
      this.tapCount++;
      if (this.tapCount === 2) {
        this.callback(event);
        this.tapCount = 0;
      }
    } else {
      this.tapCount = 0;
    }
    this.timeout = setTimeout(() => {
      clearTimeout(this.timeout);
      this.tapCount = 0;
    }, 500);
    this.lastTap = currentTime;
  }
};
var PressAndHoldHandler = class {
  constructor(plugin, element, callback, duration = 600) {
    this.plugin = plugin;
    this.element = element;
    this.callback = callback;
    this.duration = duration;
    this.timeout = null;
    this.plugin.registerDomEvent(
      this.element,
      "touchstart",
      this.handleTouchStart.bind(this),
      true
    );
    this.plugin.registerDomEvent(
      this.element,
      "touchend",
      this.handleTouchEnd.bind(this),
      true
    );
  }
  handleTouchStart(event) {
    this.timeout = setTimeout(() => {
      this.callback(event);
      this.timeout = null;
    }, this.duration);
  }
  handleTouchEnd(event) {
    if (this.timeout) {
      clearTimeout(this.timeout);
      this.timeout = null;
    }
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  removeOnClick: true,
  removeChildTagsFirst: true,
  optToConvert: true,
  mobileTagSearch: false,
  tagSummaryBlockButtons: false,
  taggedParagraphCopyPrefix: "",
  // new
  desktopClickTag: "remove",
  desktopCMDClickTag: "edit",
  desktopOPTClickTag: "native",
  mobileDoubleTapTag: "remove",
  mobileLongPressTag: "edit",
  mobileTripleTapText: true,
  removeTagBtn: "always",
  copyToCBBtn: "hide",
  moveToSectionBtn: "always",
  copyToSectionBtn: "always",
  copyLinkToSectionBtn: "hide",
  copyToNoteBtn: "always",
  mobileNotices: true,
  recentlyAddedTags: "",
  lockRecentTags: false,
  showSummaryButtons: false,
  debugMode: false
};
var TagBuddy = class extends import_obsidian10.Plugin {
  // onunload() { I think all the cleanup is done automatically the way I register everything. } 
  async onload() {
    console.log("Tag Buddy Plugin loaded on " + (this.app.isMobile ? "mobile at " : "desktop at ") + (/* @__PURE__ */ new Date()).toUTCString().substring(17));
    this.addSettingTab(new TBSettingsTab(this.app, this));
    await this.loadSettings();
    this.app.workspace.onLayoutReady(async () => {
      this.gui = new GUI(this.app, this);
      this.tagSummary = new TagSummary(this.app, this);
      this.tagProcessor = new TagProcessor(this.app, this);
      this.tagEditor = new ReadingModeTagEditor(this.app, this);
      this.registerMarkdownPostProcessor(
        this.tagProcessor.renderPostProcessor.bind(this.tagProcessor)
      );
      try {
        this.registerMarkdownCodeBlockProcessor(
          "tag-summary",
          this.tagSummary.codeBlockProcessor.bind(this.tagSummary)
        );
      } catch (e) {
      }
      this.registerDomEvent(
        document,
        "contextmenu",
        async (event) => {
          const view = await this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
          if (view && ctrlCmdKey(event) && view.getMode() == "preview" && view.containerEl.contains(event.target)) {
            event.preventDefault();
            this.gui.showTagSelector(event);
          }
        }
      );
      this.registerEvent(this.app.on(
        "layout-change",
        async (event) => {
          var _a;
          const mode = (_a = this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView)) == null ? void 0 : _a.getMode();
          if (this.settings.debugMode)
            console.log("Tag Buddy: layout-change:", mode);
          if (mode == "preview") {
            this.tagProcessor.reset();
            this.tagProcessor.debouncedProcessActiveFileTagEls();
          } else if (mode == "source") {
          }
        }
      ));
      this.registerEvent(this.app.workspace.on(
        "file-open",
        //debounce(
        async (event) => {
          var _a, _b;
          const activeFile = await this.app.workspace.getActiveFile();
          if (this.settings.debugMode)
            console.log("Tag Buddy: last active file:", (_a = this.activeFile) == null ? void 0 : _a.name);
          if (this.settings.debugMode)
            console.log("Tag Buddy: file open:", activeFile == null ? void 0 : activeFile.name);
          if ((activeFile == null ? void 0 : activeFile.path) != ((_b = this.activeFile) == null ? void 0 : _b.path)) {
            this.tagProcessor.reset();
            this.activeFile = this.app.workspace.getActiveFile();
            if (this.tagProcessor) {
              this.tagProcessor.processActiveFileTags();
            }
          }
        }
        //, 3000, true)
      ));
      if (!this.app.isMobile) {
        this.registerDomEvent(
          document,
          "click",
          this.onClickEvent.bind(this),
          true
        );
      } else {
        this.registerDomEvent(
          document,
          "click",
          (e) => {
            const isTag = e.target.classList.contains("tag");
            const tag = e.target.closest(".tag");
            if (isTag && this.settings.mobileDoubleTapTag != "native") {
              e.stopPropagation();
            } else if (!isTag) {
            } else {
            }
          },
          true
        );
        new DoubleTapHandler(
          this,
          document,
          (event) => {
            if (event.target.classList.contains("tag")) {
              this.mobileTapHandler(event, this.settings.mobileDoubleTapTag);
            }
          },
          true
          //this.onClickEvent.bind(this)
        );
        new PressAndHoldHandler(
          this,
          document,
          (event) => {
            if (event.target.classList.contains("tag")) {
              this.mobileTapHandler(event, this.settings.mobileLongPressTag);
            }
          }
          /*async (event: MouseEvent) => {	
           			const view = await this.app.workspace.getActiveViewOfType(MarkdownView);
                 if (view && 
                 	(view.getMode() == 'preview') &&
                 	(view.containerEl.contains(event.target))
                	) {         
                 	event.preventDefault();
                 	this.gui.showTagEditor(event.target.closest('.tag').innerText)
                 }
           		}, true*/
          //(event) => {
          //	this.gui.showTagEditor(event.target.closest('.tag').innerText)
          //}
          //this.onClickEvent.bind(this)
        );
        new TripleTapHandler(
          this,
          document,
          async (event) => {
            const view = await this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
            if (view && view.getMode() == "preview" && view.containerEl.contains(event.target)) {
              this.gui.showTagSelector(event);
            }
          },
          true
          //this.gui.showTagSelector.bind(this.gui)
        );
      }
    });
  }
  async mobileTapHandler(event, setting) {
    if (setting == "edit") {
      const view = await this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
      if (view && view.getMode() == "preview" && view.containerEl.contains(event.target)) {
        this.gui.showTagEditor(event.target.closest(".tag"));
      }
    } else if (setting == "remove") {
      this.tagEditor.edit(event.target, event, null, "remove");
    } else if (setting == "hash") {
      this.tagEditor.edit(event.target, event, null, "hash");
    }
  }
  async onClickEvent(event) {
    const target = event.target;
    const view = await this.app.workspace.getActiveViewOfType(import_obsidian10.MarkdownView);
    const modKey = ctrlCmdKey(event) ? "CMD" : event.altKey ? "OPT" : "";
    if (!view && target.matches(".tag")) {
      new import_obsidian10.Notice("Tag Buddy: Can't edit tag. Unsupported view type. Try again within the source note.");
      return;
    }
    if (view) {
      if (view.getMode() != "preview" || !view.containerEl.contains(event.target))
        return;
    }
    if (!this.app.isMobile) {
      if (this.settings.desktopClickTag == "native" && modKey == "" || this.settings.desktopCMDClickTag == "native" && modKey == "CMD" || this.settings.desktopOPTClickTag == "native" && modKey == "OPT") {
        return;
      } else if (this.settings.desktopClickTag == "edit" && modKey == "" || this.settings.desktopCMDClickTag == "edit" && modKey == "CMD" || this.settings.desktopOPTClickTag == "edit" && modKey == "OPT") {
        if (!target.matches(".tag"))
          return;
        event.stopPropagation();
        event.preventDefault();
        this.gui.showTagEditor(event.target.closest(".tag"));
        return;
      }
    } else {
      setTimeout(() => {
        const selection = window.getSelection();
        if (selection)
          selection.removeAllRanges();
      }, 400);
      if (this.settings.mobileTagSearch && event.type == "touchend") {
        return;
      }
    }
    if (target && target.matches(".tag")) {
      if (this.tagProcessor.outOfSync) {
        new import_obsidian10.Notice("Markdown source and HTML tags are out of sync. Check for tag syntax errors.");
        return;
      }
      let editType;
      if (modKey == "")
        editType = this.settings.desktopClickTag;
      else if (modKey == "CMD")
        editType = this.settings.desktopCMDClickTag;
      else if (modKey == "OPT")
        editType = this.settings.desktopOPTClickTag;
      event.stopPropagation();
      event.preventDefault();
      const clickedTag = target.closest(".tag");
      const tag = clickedTag.innerText;
      let tagIndex = clickedTag.getAttribute("md-index");
      let tagFile = clickedTag.getAttribute("file-source");
      if (tagFile) {
        this.tagEditor.edit(
          target,
          event,
          null,
          editType
        );
      } else {
        setTimeout(async () => {
          tagIndex = clickedTag.getAttribute("md-index");
          tagFile = clickedTag.getAttribute("file-source");
          this.tagEditor.edit(
            target,
            event,
            null,
            editType
          );
        }, 300);
      }
    } else if (!view && target.matches(".tag")) {
      new import_obsidian10.Notice("Tag Buddy: Can't edit tag. Might be in an unsupported view type.");
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  getTagsFromApp() {
    const tagsObject = this.app.metadataCache.getTags();
    const tagsArray = Object.entries(tagsObject);
    tagsArray.sort((a, b) => b[1] - a[1]);
    const recentTags = this.getRecentTags();
    if (recentTags.length > 0) {
      const recentTagsAsTuples = recentTags.map((tag) => [tag, 0]);
      const recentAndAllTags = recentTagsAsTuples.concat(tagsArray);
      return recentAndAllTags.map(([tag, _]) => tag.replace(/^#/, ""));
    } else {
      return tagsArray.map(([tag, _]) => tag.replace(/^#/, ""));
    }
  }
  saveRecentTag(tag) {
    if (isTagValid(tag, true)) {
      const recentTagsString = this.settings.recentlyAddedTags;
      let recentTags;
      if (recentTagsString == "") {
        recentTags = [];
      } else if (recentTagsString.indexOf(", ")) {
        recentTags = this.settings.recentlyAddedTags.split(", ");
      } else {
        recentTags = [this.settings.recentlyAddedTags];
      }
      if (recentTags.includes(tag)) {
        recentTags.splice(recentTags.indexOf(tag), 1);
      }
      recentTags.unshift(tag.trim());
      recentTags = recentTags.slice(0, 3);
      this.settings.recentlyAddedTags = recentTags.join(", ");
      this.saveSettings();
    } else {
    }
  }
  getRecentTags() {
    const recentTags = this.settings.recentlyAddedTags == "" ? [] : this.settings.recentlyAddedTags.split(", ");
    return recentTags;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJndWkudHMiLCAidXRpbHMudHMiLCAiTW9kYWwudHMiLCAiVGFnRWRpdG9yTW9kYWwudHMiLCAiRmluZEZpbGVNb2RhbC50cyIsICJUYWdTdW1tYXJ5LnRzIiwgIlRhZ1Byb2Nlc3Nvci50cyIsICJSZWFkaW5nTW9kZVRhZ0VkaXRvci50cyIsICJNb2JpbGUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgRWRpdG9yLCBNYXJrZG93blJlbmRlcmVyLCBkZWJvdW5jZSwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBDb21wb25lbnQsIFRGaWxlLCBnZXRBbGxUYWdzLCBNYXJrZG93blByZXZpZXdWaWV3LCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRCU2V0dGluZ3NUYWIgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgR1VJIH0gZnJvbSBcIi4vZ3VpXCI7XG5pbXBvcnQgeyBUYWdTdW1tYXJ5IH0gZnJvbSAnLi9UYWdTdW1tYXJ5JztcbmltcG9ydCB7IFRhZ1Byb2Nlc3NvciB9IGZyb20gJy4vVGFnUHJvY2Vzc29yJztcbmltcG9ydCB7IFJlYWRpbmdNb2RlVGFnRWRpdG9yIH0gZnJvbSAnLi9SZWFkaW5nTW9kZVRhZ0VkaXRvcic7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL3V0aWxzJztcbmltcG9ydCAqIGFzIE1vYmlsZSBmcm9tICcuL01vYmlsZSc7XG5cbmludGVyZmFjZSBUQlNldHRpbmdzIHtcblx0Ly9yZW1vdmVPbkNsaWNrOiBib29sZWFuOyAvLyBjdHJsXG5cdC8vcmVtb3ZlQ2hpbGRUYWdzRmlyc3Q7IC8vIFxuXHQvL29wdFRvQ29udmVydDogYm9vbGVhbjsgLy9hbHRcblx0Ly9tb2JpbGVUYWdTZWFyY2g6IGJvb2xlYW47IFxuXHQvL3RhZ1N1bW1hcnlCbG9ja0J1dHRvbnM6IGJvb2xlYW47IFxuXHQvL3RhZ2dlZFBhcmFncmFwaENvcHlQcmVmaXg6IHN0cmluZztcblxuXG5cdC8vIG5ldyBzZXR0aW5nc1xuXHRkZXNrdG9wQ2xpY2tUYWc6IFN0cmluZztcblx0ZGVza3RvcENNRENsaWNrVGFnOiBTdHJpbmc7XG5cdGRlc2t0b3BPUFRDbGlja1RhZzogU3RyaW5nO1xuXHRtb2JpbGVEb3VibGVUYXBUYWc6IFN0cmluZztcblx0bW9iaWxlTG9uZ1ByZXNzVGFnOiBTdHJpbmc7XG5cdG1vYmlsZVRyaXBsZVRhcFRleHQ6IEJvb2xlYW47XG5cblx0cmVtb3ZlVGFnQnRuOiBTdHJpbmc7XG5cdGNvcHlUb0NCQnRuOiBTdHJpbmc7XG5cdG1vdmVUb1NlY3Rpb25CdG46IFN0cmluZztcblx0Y29weVRvU2VjdGlvbkJ0bjogU3RyaW5nO1xuXHRjb3B5TGlua1RvU2VjdGlvbkJ0bjogU3RyaW5nO1xuXHRjb3B5VG9Ob3RlQnRuOiBTdHJpbmc7XG5cblx0bW9iaWxlTm90aWNlczogYm9vbGVhbjsgXG5cdHJlY2VudGx5QWRkZWRUYWdzOiBzdHJpbmc7XG5cdGxvY2tSZWNlbnRUYWdzOiBib29sZWFuO1xuXHRzaG93U3VtbWFyeUJ1dHRvbnM6Ym9vbGVhbjtcblx0ZGVidWdNb2RlOiBib29sZWFuOyBcblxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQYXJ0aWFsPFRCU2V0dGluZ3M+ID0ge1xuXHRyZW1vdmVPbkNsaWNrOiB0cnVlLCBcblx0cmVtb3ZlQ2hpbGRUYWdzRmlyc3Q6IHRydWUsIFxuXHRvcHRUb0NvbnZlcnQ6IHRydWUsIFxuXHRtb2JpbGVUYWdTZWFyY2g6IGZhbHNlLCBcblx0dGFnU3VtbWFyeUJsb2NrQnV0dG9uczogZmFsc2UsXG5cdHRhZ2dlZFBhcmFncmFwaENvcHlQcmVmaXg6ICcnLFxuXG5cblx0Ly8gbmV3XG5cdGRlc2t0b3BDbGlja1RhZzogJ3JlbW92ZScsXG5cdGRlc2t0b3BDTURDbGlja1RhZzogJ2VkaXQnLFxuXHRkZXNrdG9wT1BUQ2xpY2tUYWc6ICduYXRpdmUnLFxuXHRtb2JpbGVEb3VibGVUYXBUYWc6ICdyZW1vdmUnLFxuXHRtb2JpbGVMb25nUHJlc3NUYWc6ICdlZGl0Jyxcblx0bW9iaWxlVHJpcGxlVGFwVGV4dDogdHJ1ZSxcblxuXHRyZW1vdmVUYWdCdG46ICdhbHdheXMnLFxuXHRjb3B5VG9DQkJ0bjogJ2hpZGUnLFxuXHRtb3ZlVG9TZWN0aW9uQnRuOiAnYWx3YXlzJyxcblx0Y29weVRvU2VjdGlvbkJ0bjogJ2Fsd2F5cycsXG5cdGNvcHlMaW5rVG9TZWN0aW9uQnRuOiAnaGlkZScsXG5cdGNvcHlUb05vdGVCdG46ICdhbHdheXMnLFxuXG5cdG1vYmlsZU5vdGljZXM6IHRydWUsXG5cdHJlY2VudGx5QWRkZWRUYWdzOiAnJyxcblx0bG9ja1JlY2VudFRhZ3M6IGZhbHNlLFxuXHRzaG93U3VtbWFyeUJ1dHRvbnM6ZmFsc2UsXG5cdGRlYnVnTW9kZTogZmFsc2Vcbn07IFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWdCdWRkeSBleHRlbmRzIFBsdWdpbiB7ICBcblx0c2V0dGluZ3M6IFRCU2V0dGluZ3M7XG5cdGd1aTogR1VJO1xuXHR0YWdTdW1tYXJ5OiBUYWdTdW1tYXJ5O1xuXHR0YWdQcm9jZXNzb3I6IFRhZ1Byb2Nlc3Nvcjtcblx0dGFnRWRpdG9yOiBSZWFkaW5nTW9kZVRhZ0VkaXRvcjtcblx0cHJpdmF0ZSBhY3RpdmVGaWxlOiBURmlsZTtcblxuXHQvLyBvbnVubG9hZCgpIHsgSSB0aGluayBhbGwgdGhlIGNsZWFudXAgaXMgZG9uZSBhdXRvbWF0aWNhbGx5IHRoZSB3YXkgSSByZWdpc3RlciBldmVyeXRoaW5nLiB9IFxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnVGFnIEJ1ZGR5IFBsdWdpbiBsb2FkZWQgb24gJyBcblx0XHRcdCsgKHRoaXMuYXBwLmlzTW9iaWxlID8gJ21vYmlsZSBhdCAnOidkZXNrdG9wIGF0ICcpIFxuXHRcdFx0KyBuZXcgRGF0ZSgpLnRvVVRDU3RyaW5nKCkuc3Vic3RyaW5nKDE3KSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFRCU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1x0XG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYyAoKSA9PiB7XG5cblx0XHRcdHRoaXMuZ3VpID0gbmV3IEdVSSh0aGlzLmFwcCwgdGhpcylcblx0XHRcdHRoaXMudGFnU3VtbWFyeSA9IG5ldyBUYWdTdW1tYXJ5ICh0aGlzLmFwcCwgdGhpcyk7XG5cdFx0XHR0aGlzLnRhZ1Byb2Nlc3NvciA9IG5ldyBUYWdQcm9jZXNzb3IgKHRoaXMuYXBwLCB0aGlzKTtcblx0XHRcdHRoaXMudGFnRWRpdG9yID0gbmV3IFJlYWRpbmdNb2RlVGFnRWRpdG9yICh0aGlzLmFwcCwgdGhpcyk7XHRcblxuXHRcdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3Nvcihcblx0XHRcdHRoaXMudGFnUHJvY2Vzc29yLnJlbmRlclBvc3RQcm9jZXNzb3IuYmluZCh0aGlzLnRhZ1Byb2Nlc3Nvcilcblx0XHRcdClcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3Nvcihcblx0XHRcdFx0XHQndGFnLXN1bW1hcnknLCBcblx0XHRcdFx0XHR0aGlzLnRhZ1N1bW1hcnkuY29kZUJsb2NrUHJvY2Vzc29yLmJpbmQodGhpcy50YWdTdW1tYXJ5KVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBjYXRjaCB7fVxuXHRcdCAgICBcblx0XHQgICAgLy90aGlzLnJlZ2lzdGVyRXZlbnQoIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgYXN5bmMgKCkgPT4geyBjb25zb2xlLmxvZygnYWN0aXZlIGxlYWYgY2hhbmdlJykgfSkpO1xuXHRcdCAgICAvL3RoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCBhc3luYyAoKSA9PiB7IGNvbnNvbGUubG9nKCdlZGl0b3IgY2hhbmdlJyk7ICB9LCB0cnVlKSk7XG5cdFx0ICAgIC8vdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWNoYW5nZScsIGRlYm91bmNlKGFzeW5jICgpID0+IHsgY29uc29sZS5sb2coJ2VkaXRvciBjaGFuZ2UnKTsgdGhpcy5wcm9jZXNzVGFncygpOyB9LCAzMDAwLCB0cnVlKSkpO1xuXHRcdCAgICBcblx0XHQgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KFxuXHRcdCAgICBcdGRvY3VtZW50LCBcblx0XHQgICAgXHQnY29udGV4dG1lbnUnLCBcblx0XHQgICAgXHRhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcdFxuXHQgICAgXHRcdFx0Y29uc3QgdmlldyA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHQgICAgICAgIFxuXHRcdFx0ICAgICAgICBpZiAodmlldyAmJiBcblx0XHRcdCAgICAgICAgXHRVdGlscy5jdHJsQ21kS2V5IChldmVudCkgJiZcblx0XHRcdCAgICAgICAgXHQodmlldy5nZXRNb2RlKCkgPT0gJ3ByZXZpZXcnKSAmJlxuXHRcdFx0ICAgICAgICBcdCh2aWV3LmNvbnRhaW5lckVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpXG5cdFx0ICAgICAgICBcdCkgeyAgICAgICAgIFxuXHRcdFx0ICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdCAgICAgICAgICAgIC8vdGhpcy5ndWkuc2hvd1RhZ1NlbGVjdG9yKGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSk7XG5cdFx0XHQgICAgICAgIFx0dGhpcy5ndWkuc2hvd1RhZ1NlbGVjdG9yKGV2ZW50KVxuXHRcdFx0ICAgICAgICB9XG5cdFx0ICAgIH0pOyBcblx0XHQgICBcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5vbihcblx0XHRcdFx0J2xheW91dC1jaGFuZ2UnLCBcblx0XHRcdFx0YXN5bmMgKGV2ZW50OiBFZGl0b3JFdmVudCkgPT4geyAgXG5cdFx0XHRcdFx0Y29uc3QgbW9kZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKTtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIGNvbnNvbGUubG9nKCdUYWcgQnVkZHk6IGxheW91dC1jaGFuZ2U6JywgbW9kZSk7XG5cdFx0XHRcdFx0aWYgKG1vZGUgPT0gJ3ByZXZpZXcnKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRhZ1Byb2Nlc3Nvci5yZXNldCgpO1xuXHRcdFx0XHRcdFx0dGhpcy50YWdQcm9jZXNzb3IuZGVib3VuY2VkUHJvY2Vzc0FjdGl2ZUZpbGVUYWdFbHMoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vZGUgPT0gJ3NvdXJjZScpIHtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdCkpO1xuXHRcdFx0XG5cdFx0XHQvL2RlYm91bmNlKGFzeW5jICgpID0+IHsgY29uc29sZS5sb2coJ2VkaXRvciBjaGFuZ2UnKTsgdGhpcy5wcm9jZXNzVGFncygpOyB9LCAzMDAwLCB0cnVlKVxuXHRcdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcblx0XHRcdFx0J2ZpbGUtb3BlbicsIFxuXHRcdFx0XHQvL2RlYm91bmNlKFxuXHRcdFx0XHRhc3luYyAoZXZlbnQ6IEVkaXRvckV2ZW50KSA9PiB7IFxuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkgY29uc29sZS5sb2coJ1RhZyBCdWRkeTogbGFzdCBhY3RpdmUgZmlsZTonLCB0aGlzLmFjdGl2ZUZpbGU/Lm5hbWUpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkgY29uc29sZS5sb2coJ1RhZyBCdWRkeTogZmlsZSBvcGVuOicsIGFjdGl2ZUZpbGU/Lm5hbWUpXG5cdFx0XHRcdFx0aWYgKGFjdGl2ZUZpbGU/LnBhdGggIT0gdGhpcy5hY3RpdmVGaWxlPy5wYXRoKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRhZ1Byb2Nlc3Nvci5yZXNldCgpO1xuXHRcdFx0XHRcdFx0dGhpcy5hY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLnRhZ1Byb2Nlc3Nvcikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnRhZ1Byb2Nlc3Nvci5wcm9jZXNzQWN0aXZlRmlsZVRhZ3MoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coJ2ZpbGUgb3BlbjonLCBhY3RpdmVGaWxlLm5hbWUpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8sIDMwMDAsIHRydWUpXG5cdFx0XHQpKTtcblxuXHRcdFx0Ly8gTm90IGRvaW5nIHRoaXMgYmVjYXVzZSB0aGV5IG5lZWQgdG8gb3B0K2NsaWNrIG9uIGEgdGFnIHRvIHBhc3MgaXRcblx0XHRcdC8vIEkgZG9uJ3Qgd2FudCB0byBoYXZlIHRvIGFkZCBhIHRhZyBzZWxlY3RvciBpbiB0aGUgZWRpdG9yXG5cdFx0XHQvLyB0aGluayBvbiBtb2JpbGUuLi4gdG9vIG1hbnkgbGF5ZXJzIG9mIG1vZGFscy5cblx0XHRcdC8qdGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdFx0aWQ6IFwidGFnYnVkZHktdGFnLWFjdGlvbnNcIixcblx0XHRcdFx0bmFtZTogXCJUYWcgQWN0aW9uXCIsXG5cdFx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0Ly90aGlzLmd1aS5zaG93VGFnRWRpdG9yKClcblx0XHRcdFx0XHR0aGlzLmd1aS5zaG93VGFnRWRpdG9yKClcblx0XHRcdFx0fSxcblx0XHRcdH0pOyovXG5cblx0XHRcdC8vdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LmJvZHksICdzY3JvbGwnLCAoZXZlbnQpID0+IHt9LCB0cnVlKTtcblxuXHRcdFx0aWYgKCF0aGlzLmFwcC5pc01vYmlsZSkge1xuXHRcdFx0XHQvLyBUaGlzIGV2ZW50IGhhbmRsZXMgYWxsIHRoZSBpbnRlcmFjdGlvbnMgb24gZGVza3RvcFxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG5cdFx0XHRcdFx0ZG9jdW1lbnQsIFxuXHRcdFx0XHRcdCdjbGljaycsIFxuXHRcdFx0XHRcdHRoaXMub25DbGlja0V2ZW50LmJpbmQodGhpcyksIFxuXHRcdFx0XHRcdHRydWVcblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7IC8vIE1vYmlsZSBpbnRlcmFjdGlvblxuXHRcdFx0XHQvLyBUaGlzIGV2ZW50IGNhdGNoZXMgYWxsIHRhcHMgb24gbW9iaWxlIGJlY2F1c2Ugd2UgaGF2ZSBjdXN0b20gZG91YmxlLXRhcCBhbmQgcHJlc3MtaG9sZCBldmVudHMuXG5cdFx0XHRcdC8vIEJ1dCB3ZSBvbmx5IHN0b3AgYWxsIG90aGVyIG1vYmlsZSBldmVudHMgaWYgdGhpcyBjbGljayB3YXMgb24gYSB0YWcuIFxuXHRcdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG5cdFx0XHRcdFx0ZG9jdW1lbnQsIFxuXHRcdFx0XHRcdCdjbGljaycsIFxuXHRcdFx0XHRcdChlOkV2ZW50KSA9PiB7IFxuXHRcdFx0XHRcdFx0Y29uc3QgaXNUYWcgPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhZycpO1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFnID0gZS50YXJnZXQuY2xvc2VzdCgnLnRhZycpXG5cdFx0XHRcdFx0XHQvL3RhcmdldC5jbG9zZXN0KCcudGFnJylcbi8vbmV3IE5vdGljZSAoaXNUYWcpXHRcdFx0XHRcdFx0XG4vL25ldyBOb3RpY2UgKHRhZy5pbm5lclRleHQpXG4vL25ldyBOb3RpY2UgKHRoaXMuc2V0dGluZ3MubW9iaWxlRG91YmxlVGFwVGFnKVxuXHRcdFx0XHRcdFx0Ly9pZiAoaXNUYWcgJiYgIXRoaXMuc2V0dGluZ3MubW9iaWxlVGFnU2VhcmNoKSB7XG5cdFx0XHRcdFx0XHQvL2lmICh0aGlzLnNldHRpbmdzLm1vYmlsZURvdWJsZVRhcFRhZyA9PSAnbmF0aXZlJykge1xuXHRcdFx0XHRcdFx0aWYgKGlzVGFnICYmIHRoaXMuc2V0dGluZ3MubW9iaWxlRG91YmxlVGFwVGFnICE9ICduYXRpdmUnKSB7XG5cdFx0XHRcdFx0XHQvL2lmIChpc1RhZykgeyBcbi8vbmV3IE5vdGljZSAoaXNUYWcpXHRcdFx0XHRcdFx0XG4vL25ldyBOb3RpY2UgKHRhZy5pbm5lclRleHQpXG4vL25ldyBOb3RpY2UgKHRoaXMuc2V0dGluZ3MubW9iaWxlRG91YmxlVGFwVGFnKVxuLy9uZXcgTm90aWNlICgnaXMgdGFnJylcblx0XHRcdFx0XHRcdC8vaWYgKGlzVGFnICYmICh0aGlzLnNldHRpbmcubW9iaWxlRG91YmxlVGFwVGFnICE9ICduYXRpdmUnLy8gfHxcblx0XHRcdFx0XHRcdFx0XHRcdCAgLy90aGlzLnBsdWdpbi5zZXR0aW5nLm1vYmlsZUxvbmdQcmVzc1RhZyAhPSAnbmF0aXZlJ1xuXHRcdFx0XHRcdFx0Ly9cdFx0XHQgICkpIHtcblx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdFx0Ly9lLnByZXZlbnREZWZhdWx0KCk7XG5cbi8vbmV3IE5vdGljZSAoJ3RhcHBlZCB0YWcgYW5kIHN0b3AgYWxsIG90aGVyIG1vYmlsZSB0b3VjaGVzIGV4Y2VwdCBvdXIgY3VzdG9tIG9uZXMnKVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICghaXNUYWcpIHtcblx0XHRcdFx0XHRcdFx0Ly9lLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdC8vZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly9lLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHQvL2UucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0cnVlXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0XG5cdFx0XHRcdG5ldyBNb2JpbGUuRG91YmxlVGFwSGFuZGxlcihcblx0XHRcdFx0XHR0aGlzLCBcblx0XHRcdFx0XHRkb2N1bWVudCwgIFxuXHRcdFx0XHRcdChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly9uZXcgTm90aWNlICgnZG91YmxlIHRhcCcpXG5cdFx0XHRcdFx0XHQvL2V2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFnJykpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5tb2JpbGVUYXBIYW5kbGVyIChldmVudCwgdGhpcy5zZXR0aW5ncy5tb2JpbGVEb3VibGVUYXBUYWcpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdHJ1ZVxuXHRcdFx0XHRcdC8vdGhpcy5vbkNsaWNrRXZlbnQuYmluZCh0aGlzKVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRuZXcgTW9iaWxlLlByZXNzQW5kSG9sZEhhbmRsZXIoXG5cdFx0XHRcdFx0dGhpcywgXG5cdFx0XHRcdFx0ZG9jdW1lbnQsIFxuXHRcdFx0XHRcdChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly9uZXcgTm90aWNlICgnaG9sZCcpXG5cdFx0XHRcdFx0XHRpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFnJykpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5tb2JpbGVUYXBIYW5kbGVyIChldmVudCwgdGhpcy5zZXR0aW5ncy5tb2JpbGVMb25nUHJlc3NUYWcpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8qYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHRcblx0XHQgICAgXHRcdFx0Y29uc3QgdmlldyA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdCAgICAgICAgaWYgKHZpZXcgJiYgXG5cdFx0XHRcdCAgICAgICAgXHQodmlldy5nZXRNb2RlKCkgPT0gJ3ByZXZpZXcnKSAmJlxuXHRcdFx0XHQgICAgICAgIFx0KHZpZXcuY29udGFpbmVyRWwuY29udGFpbnMoZXZlbnQudGFyZ2V0KSlcblx0XHRcdCAgICAgICAgXHQpIHsgICAgICAgICBcblx0XHRcdFx0ICAgICAgICBcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCAgICAgICAgXHR0aGlzLmd1aS5zaG93VGFnRWRpdG9yKGV2ZW50LnRhcmdldC5jbG9zZXN0KCcudGFnJykuaW5uZXJUZXh0KVxuXHRcdFx0XHQgICAgICAgIH1cblx0XHQgICAgXHRcdH0sIHRydWUqL1xuXHRcdFx0XHRcdC8vKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0Ly9cdHRoaXMuZ3VpLnNob3dUYWdFZGl0b3IoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy50YWcnKS5pbm5lclRleHQpXG5cdFx0XHRcdFx0Ly99XG5cdFx0XHRcdFx0Ly90aGlzLm9uQ2xpY2tFdmVudC5iaW5kKHRoaXMpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdG5ldyBNb2JpbGUuVHJpcGxlVGFwSGFuZGxlcihcblx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdGRvY3VtZW50LCBcblx0XHRcdFx0XHRhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcdFxuXHRcdCAgICBcdFx0XHRjb25zdCB2aWV3ID0gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0ICAgICAgICBpZiAodmlldyAmJiBcblx0XHRcdFx0ICAgICAgICBcdCh2aWV3LmdldE1vZGUoKSA9PSAncHJldmlldycpICYmXG5cdFx0XHRcdCAgICAgICAgXHQodmlldy5jb250YWluZXJFbC5jb250YWlucyhldmVudC50YXJnZXQpKVxuXHRcdFx0ICAgICAgICBcdCkgeyAgICAgICAgIFxuXHRcdFx0XHQgICAgICAgIFx0Ly9ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHQgICAgICAgIFx0dGhpcy5ndWkuc2hvd1RhZ1NlbGVjdG9yKGV2ZW50KVxuXHRcdFx0XHQgICAgICAgIH1cblx0XHQgICAgXHRcdH0sIHRydWVcblx0XHRcdFx0XHQvL3RoaXMuZ3VpLnNob3dUYWdTZWxlY3Rvci5iaW5kKHRoaXMuZ3VpKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVx0XG5cblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIG1vYmlsZVRhcEhhbmRsZXIgKGV2ZW50LCBzZXR0aW5nKSB7XG4vL25ldyBOb3RpY2UgKHNldHRpbmcpXG5cdFx0aWYgKHNldHRpbmcgPT0gJ2VkaXQnKSB7XG5cdFx0XHRjb25zdCB2aWV3ID0gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0ICAgICAgICBpZiAodmlldyAmJiAodmlldy5nZXRNb2RlKCkgPT0gJ3ByZXZpZXcnKSAmJiAodmlldy5jb250YWluZXJFbC5jb250YWlucyhldmVudC50YXJnZXQpKSkgXG5cdCAgICAgICAgeyAgICAgICAgIFxuXHQgICAgICAgIFx0Ly9ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIFx0Ly9ldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXHQgICAgICAgIFx0dGhpcy5ndWkuc2hvd1RhZ0VkaXRvcihldmVudC50YXJnZXQuY2xvc2VzdCgnLnRhZycpKVxuXHQgICAgICAgIH1cblx0XHR9IGVsc2UgaWYgKHNldHRpbmcgPT0gJ3JlbW92ZScpIHtcblx0XHRcdHRoaXMudGFnRWRpdG9yLmVkaXQoZXZlbnQudGFyZ2V0LCBldmVudCwgbnVsbCwgJ3JlbW92ZScpXG5cdFx0fSBlbHNlIGlmIChzZXR0aW5nID09ICdoYXNoJykge1xuXHRcdFx0dGhpcy50YWdFZGl0b3IuZWRpdChldmVudC50YXJnZXQsIGV2ZW50LCBudWxsLCAnaGFzaCcpXG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgb25DbGlja0V2ZW50IChcblx0XHRldmVudDogRXZlbnRcblx0KTp2b2lkIHtcblx0XHQvLyBTdXBwb3J0IGZvciBkaWZmZXJlbnQgdmlld3M/IFxuXHRcdC8vIElmIHRhZyBoYXMgbm8gY29udGV4dCBwcm9wZXJ0aWVzLCB0aGVuIHRyeSB0byBmaWd1cmUgb3V0IHdoZXJlIGl0IGlzP1xuXHRcdC8vbmV3IE5vdGljZSAoJ1RhZyBCdWRkeSBldmVudCB0eXBlOiAnICsgZXZlbnQudHlwZSk7XG5cblx0XHRjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0Y29uc3QgdmlldyA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgbW9kS2V5OiBTdHJpbmcgPSBVdGlscy5jdHJsQ21kS2V5KGV2ZW50KSA/ICdDTUQnIDogKGV2ZW50LmFsdEtleSA/ICdPUFQnIDogJycpO1xuXG5cdFx0Ly8gVGhpcyBjb25kaXRpb24gaXQgaW4gY2FzZSB3ZSBjbGljayBvbiBhIHRhZyBpbiBhbm90aGVyIHBsdWdpbiBsaWtlIHJlcGVhdCBvciBjaGVja2xpc3Rcblx0XHQvLyBDYW4ndCBlZGl0IHRhZ3MgaW4gdGhlc2UgY2FzZXMuIEZvciBub3cuXG5cdFx0aWYgKCF2aWV3ICYmIHRhcmdldC5tYXRjaGVzKCcudGFnJykpIHsgXG5cdFx0XHRuZXcgTm90aWNlKCdUYWcgQnVkZHk6IENhblxcJ3QgZWRpdCB0YWcuIFVuc3VwcG9ydGVkIHZpZXcgdHlwZS4gVHJ5IGFnYWluIHdpdGhpbiB0aGUgc291cmNlIG5vdGUuJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHZpZXcpIHsgXG5cdFx0XHRpZiAodmlldy5nZXRNb2RlKCkgIT0gJ3ByZXZpZXcnIHx8ICF2aWV3LmNvbnRhaW5lckVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHJldHVybjtcblx0XHR9IFxuXHRcblxuXHRcdGlmICghdGhpcy5hcHAuaXNNb2JpbGUpIHtcblx0XHRcdC8vbmV3IE5vdGljZSAoJ1RhZyBCdWRkeSBldmVudCB0eXBlOiAnICsgZXZlbnQudHlwZSk7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGV2ZW50LnR5cGUpXG5cdFx0XHQvKmlmICgodGhpcy5zZXR0aW5ncy5kZXNrdG9wQ2xpY2tUYWcgPT0gJ25hdGl2ZScgJiYgKCFVdGlscy5jdHJsQ21kS2V5KGV2ZW50KSAmJiAhZXZlbnQuYWx0S2V5KSkgfHxcblx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZGVza3RvcENNRENsaWNrVGFnID09ICduYXRpdmUnICYmIFV0aWxzLmN0cmxDbWRLZXkoZXZlbnQpKSB8fFxuXHRcdFx0XHQodGhpcy5zZXR0aW5ncy5kZXNrdG9wT1BUQ2xpY2tUYWcgPT0gJ25hdGl2ZScgJiYgZXZlbnQuYWx0S2V5KSkgeyAqL1xuXHRcdFx0aWYgKCh0aGlzLnNldHRpbmdzLmRlc2t0b3BDbGlja1RhZyA9PSAnbmF0aXZlJyAmJiBtb2RLZXkgPT0gJycpIHx8XG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmRlc2t0b3BDTURDbGlja1RhZyA9PSAnbmF0aXZlJyAmJiBtb2RLZXkgPT0gJ0NNRCcpIHx8XG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmRlc2t0b3BPUFRDbGlja1RhZyA9PSAnbmF0aXZlJyAmJiBtb2RLZXkgPT0gJ09QVCcpKSB7IFxuLy9jb25zb2xlLmxvZygnbmF0aXZlIHRhZyBjbGljaycpXG5cdFx0XHRcdHJldHVybjsgXG4gXG5cdFx0XHQvL30gZWxzZSBpZiAoZXZlbnQuYWx0S2V5ICYmIHRhcmdldCAmJiB0YXJnZXQubWF0Y2hlcygnLnRhZycpKSB7ICBcblx0XHRcdC8qfSBlbHNlIGlmICgodGhpcy5zZXR0aW5ncy5kZXNrdG9wQ2xpY2tUYWcgPT0gJ2VkaXQnICYmICghVXRpbHMuY3RybENtZEtleShldmVudCkgJiYgIWV2ZW50LmFsdEtleSkpIHx8XG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmRlc2t0b3BDTURDbGlja1RhZyA9PSAnZWRpdCcgJiYgVXRpbHMuY3RybENtZEtleShldmVudCkpIHx8XG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmRlc2t0b3BPUFRDbGlja1RhZyA9PSAnZWRpdCcgJiYgZXZlbnQuYWx0S2V5KSkgeyovXG5cdFx0XHR9IGVsc2UgaWYgKCh0aGlzLnNldHRpbmdzLmRlc2t0b3BDbGlja1RhZyA9PSAnZWRpdCcgJiYgbW9kS2V5ID09ICcnKSB8fFxuXHRcdFx0XHQodGhpcy5zZXR0aW5ncy5kZXNrdG9wQ01EQ2xpY2tUYWcgPT0gJ2VkaXQnICYmIG1vZEtleSA9PSAnQ01EJykgfHxcblx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZGVza3RvcE9QVENsaWNrVGFnID09ICdlZGl0JyAmJiBtb2RLZXkgPT0gJ09QVCcpKSB7XG5cdFx0XHRcdGlmICghdGFyZ2V0Lm1hdGNoZXMoJy50YWcnKSkgcmV0dXJuXG4vL2NvbnNvbGUubG9nKCdlZGl0IHRhZycpXG5cdFx0XHRcdC8vIGdldCB0aGUgdGFnIHZpYTogZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy50YWcnKS5pbm5lclRleHRcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdC8vdGhpcy5ndWkuc2hvd1RhZ0VkaXRvcihldmVudC50YXJnZXQuY2xvc2VzdCgnLnRhZycpLmlubmVyVGV4dClcblx0XHRcdFx0dGhpcy5ndWkuc2hvd1RhZ0VkaXRvcihldmVudC50YXJnZXQuY2xvc2VzdCgnLnRhZycpKVxuXHRcdFx0XG5cdFx0XHRcdHJldHVybjsgXG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBSZW1vdmVzIHRoZSBhdXRvbWF0aWMgc3lzdGVtIHNlbGVjdGlvbiBvbiBtb2JpbGUuIFxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7IFxuXHRcdFx0XHRjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdGlmIChzZWxlY3Rpb24pIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHRcdH0sIDQwMClcblxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MubW9iaWxlVGFnU2VhcmNoICYmIGV2ZW50LnR5cGUgPT0gJ3RvdWNoZW5kJykge1xuXHRcdFx0XHQvLyBpZiB3ZSBnZXQgdGhpcyBmYXIsIHRoaXMgaXMgYSBkb3VibGUgdGFwXG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ2hhbmRsZSB0b3VjaCBlbmQnKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IFxuXHRcdH1cbiBcblx0XHRpZiAodGFyZ2V0ICYmIHRhcmdldC5tYXRjaGVzKCcudGFnJykpIHtcdFxuXHRcdFx0Ly8gY29uc3Qgc2Nyb2xsU3RhdGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5jdXJyZW50TW9kZT8uZ2V0U2Nyb2xsKCk7XG5cblx0XHRcdGlmICh0aGlzLnRhZ1Byb2Nlc3Nvci5vdXRPZlN5bmMpIHtcblx0XHRcdFx0bmV3IE5vdGljZSgnTWFya2Rvd24gc291cmNlIGFuZCBIVE1MIHRhZ3MgYXJlIG91dCBvZiBzeW5jLiBDaGVjayBmb3IgdGFnIHN5bnRheCBlcnJvcnMuJyk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly9sZXQgZWRpdFR5cGUgPSBcblx0XHRcdC8vaWYgKHRoaXMuc2V0dGluZ3MucmVtb3ZlT25DbGljayBcblx0XHRcdC8vXHR8fCAoIXRoaXMuc2V0dGluZ3MucmVtb3ZlT25DbGljayAmJiBVdGlscy5jdHJsQ21kS2V5KGV2ZW50KSkpIHtcblx0XHRcdC8vWydyZW1vdmUnLCAnaGFzaCddLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MuZGVza3RvcENsaWNrVGFnKVxuXHRcdFx0Ly9pZiAoW3RoaXMuc2V0dGluZ3MuZGVza3RvcENsaWNrVGFnLCB0aGlzLnNldHRpbmdzLmRlc2t0b3BDTURDbGlja1RhZywgdGhpcy5zZXR0aW5ncy5kZXNrdG9wT1BUQ2xpY2tUYWddLmluY2x1ZGVzKCdyZW1vdmUnKSlcblx0XHRcdFxuXHRcdFx0bGV0IGVkaXRUeXBlO1xuXHRcdFx0aWYgKG1vZEtleSA9PSAnJykgZWRpdFR5cGUgPSB0aGlzLnNldHRpbmdzLmRlc2t0b3BDbGlja1RhZ1xuXHRcdFx0ZWxzZSBpZiAobW9kS2V5ID09ICdDTUQnKSBlZGl0VHlwZSA9IHRoaXMuc2V0dGluZ3MuZGVza3RvcENNRENsaWNrVGFnXG5cdFx0XHRlbHNlIGlmIChtb2RLZXkgPT0gJ09QVCcpIGVkaXRUeXBlID0gdGhpcy5zZXR0aW5ncy5kZXNrdG9wT1BUQ2xpY2tUYWcgXG5cbi8vIGF0IHRoaXMgcG9pbnQgd2Ugc2hvdWxkIG9ubHkgYmUgZGVhbGluZyB3aXRoICdyZW1vdmUnIG9yICdoYXNoJy4gc28gd2UgY2FuIGFsd2F5cyBzdG9wIHRoZSBkZWZhdWx0IG5vdy5cbi8vY29uc29sZS5sb2cgKGVkaXRUeXBlKVxuXHRcdFx0LyppZiAodGhpcy5zZXR0aW5ncy5kZXNrdG9wQ2xpY2tUYWcgPT0gJ3JlbW92ZScgfHxcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5kZXNrdG9wQ01EQ2xpY2tUYWcgPT0gJ3JlbW92ZScgfHxcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5kZXNrdG9wT1BUQ2xpY2tUYWcgPT0gJ3JlbW92ZScpIHsqL1xuXHRcdFx0Ly9pZiAoZWRpdFR5cGUgPT0gJ3JlbW92ZScpIHtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHQvL31cblxuXHRcdFx0Y29uc3QgY2xpY2tlZFRhZyA9IHRhcmdldC5jbG9zZXN0KCcudGFnJyk7IFxuXHRcdFx0Y29uc3QgdGFnID0gY2xpY2tlZFRhZy5pbm5lclRleHQ7XG5cblx0XHRcdGxldCB0YWdJbmRleCA9IGNsaWNrZWRUYWcuZ2V0QXR0cmlidXRlKCdtZC1pbmRleCcpO1xuXHRcdFx0bGV0IHRhZ0ZpbGUgPSBjbGlja2VkVGFnLmdldEF0dHJpYnV0ZSgnZmlsZS1zb3VyY2UnKTtcblxuXHRcdFx0aWYgKHRhZ0ZpbGUpIHtcblx0XHRcdFx0Ly8gVHJ5XG5cdFx0XHRcdHRoaXMudGFnRWRpdG9yLmVkaXQoXG5cdFx0XHRcdFx0dGFyZ2V0LCBcblx0XHRcdFx0XHRldmVudCxcblx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdGVkaXRUeXBlXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUcnkgYWdhaW5cblx0XHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dGFnSW5kZXggPSBjbGlja2VkVGFnLmdldEF0dHJpYnV0ZSgnbWQtaW5kZXgnKTtcblx0XHRcdFx0XHR0YWdGaWxlID0gY2xpY2tlZFRhZy5nZXRBdHRyaWJ1dGUoJ2ZpbGUtc291cmNlJyk7XG5cdFx0XHRcdFx0dGhpcy50YWdFZGl0b3IuZWRpdCAoXG5cdFx0XHRcdFx0XHR0YXJnZXQsIFxuXHRcdFx0XHRcdFx0ZXZlbnQsXG5cdFx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdFx0ZWRpdFR5cGVcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9LCAzMDApO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmICghdmlldyAmJiB0YXJnZXQubWF0Y2hlcygnLnRhZycpKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdUYWcgQnVkZHk6IENhblxcJ3QgZWRpdCB0YWcuIE1pZ2h0IGJlIGluIGFuIHVuc3VwcG9ydGVkIHZpZXcgdHlwZS4nKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXHRcblx0Z2V0VGFnc0Zyb21BcHAoKTogc3RyaW5nW10ge1xuXHQgICAgY29uc3QgdGFnc09iamVjdCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0VGFncygpO1xuXG5cdCAgICAvLyBDb252ZXJ0IHRhZ3NPYmplY3QgdG8gYW4gYXJyYXkgb2YgW3RhZywgY291bnRdIHR1cGxlc1xuXHQgICAgY29uc3QgdGFnc0FycmF5ID0gT2JqZWN0LmVudHJpZXModGFnc09iamVjdCk7XG5cblx0ICAgIC8vIFNvcnQgYnkgdXNlIGNvdW50XG5cdCAgICB0YWdzQXJyYXkuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pO1xuXG5cdCAgICBjb25zdCByZWNlbnRUYWdzID0gdGhpcy5nZXRSZWNlbnRUYWdzKCk7XG5cdCAgIC8vIGNvbnNvbGUubG9nKCdyZWNlbnQgdGFnIGxlbmd0aDogJyArIHJlY2VudFRhZ3MubGVuZ3RoKVxuXG5cdCAgICBpZiAocmVjZW50VGFncy5sZW5ndGg+MCkge1xuXHQgICAgXHQvL2NvbnNvbGUubG9nKHJlY2VudFRhZ3MpXG5cdCAgICBcdC8vIGNvbnZlcnQgdGhlbSB0byBbdGFnLCBjb3VudF0gdHVwbGVzIGZvciBjb25zaXN0ZW5jeVxuXHQgICBcdFx0Y29uc3QgcmVjZW50VGFnc0FzVHVwbGVzID0gcmVjZW50VGFncy5tYXAodGFnID0+IFt0YWcsIDBdKTtcblx0ICAgIFx0Ly8gQ29uY2F0ZW5hdGUgdGhlIHR3byBhcnJheXNcblx0ICAgIFx0Y29uc3QgcmVjZW50QW5kQWxsVGFncyA9IHJlY2VudFRhZ3NBc1R1cGxlcy5jb25jYXQodGFnc0FycmF5KTtcblx0ICAgIFx0Ly8gRXh0cmFjdCB0YWcgbmFtZXMgYWZ0ZXIgcmVtb3ZpbmcgdGhlICNcblx0ICAgIFx0cmV0dXJuIHJlY2VudEFuZEFsbFRhZ3MubWFwKChbdGFnLCBfXSkgPT4gdGFnLnJlcGxhY2UoL14jLywgXCJcIikpO1xuICAgICAgIFx0fSBlbHNlIHtcbiAgICAgICBcdFx0cmV0dXJuIHRhZ3NBcnJheS5tYXAoKFt0YWcsIF9dKSA9PiB0YWcucmVwbGFjZSgvXiMvLCBcIlwiKSk7XG4gICAgICAgXHR9XG5cdH1cblxuXHRzYXZlUmVjZW50VGFnIChcblx0XHR0YWc6c3RyaW5nXG5cdCk6dm9pZCB7XG4vL2NvbnNvbGUubG9nKCdzYXZlIHJlY2VudCB0YWc6JywgdGFnKVxuXHRcdGlmIChVdGlscy5pc1RhZ1ZhbGlkKHRhZywgdHJ1ZSkpIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ2FjY2VwdGVkOicsIHRhZylcbi8vY29uc29sZS5sb2coXCJhc2RmYXNkZmFzZGZzZGZcIilcblx0XHRcdGNvbnN0IHJlY2VudFRhZ3NTdHJpbmcgPSB0aGlzLnNldHRpbmdzLnJlY2VudGx5QWRkZWRUYWdzO1xuXHRcdFx0bGV0IHJlY2VudFRhZ3M6QXJyYXk7XG5cdFx0XHRpZiAocmVjZW50VGFnc1N0cmluZyA9PSAnJykge1xuXHRcdFx0XHRyZWNlbnRUYWdzID0gW107XG5cdFx0XHR9IGVsc2UgaWYgKHJlY2VudFRhZ3NTdHJpbmcuaW5kZXhPZignLCAnKSkge1xuXHRcdFx0XHRyZWNlbnRUYWdzID0gdGhpcy5zZXR0aW5ncy5yZWNlbnRseUFkZGVkVGFncy5zcGxpdCgnLCAnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlY2VudFRhZ3MgPSBbdGhpcy5zZXR0aW5ncy5yZWNlbnRseUFkZGVkVGFnc11cblx0XHRcdH1cblxuXHRcdFx0aWYgKHJlY2VudFRhZ3MuaW5jbHVkZXModGFnKSkge1xuXHRcdFx0XHRyZWNlbnRUYWdzLnNwbGljZShyZWNlbnRUYWdzLmluZGV4T2YodGFnKSwgMSk7XG5cdFx0XHR9XG5cblx0XHRcdHJlY2VudFRhZ3MudW5zaGlmdCh0YWcudHJpbSgpKTtcblx0XHRcdHJlY2VudFRhZ3MgPSByZWNlbnRUYWdzLnNsaWNlKDAsIDMpO1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5yZWNlbnRseUFkZGVkVGFncyA9IHJlY2VudFRhZ3Muam9pbignLCAnKTtcblx0XHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ3JlamVjdGVkOicsIHRhZylcblx0XHR9XG5cdH1cblxuXHRnZXRSZWNlbnRUYWdzICgpOkFycmF5IHtcblx0XHRjb25zdCByZWNlbnRUYWdzID0gXG5cdFx0dGhpcy5zZXR0aW5ncy5yZWNlbnRseUFkZGVkVGFncz09JycgPyBbXSA6IHRoaXMuc2V0dGluZ3MucmVjZW50bHlBZGRlZFRhZ3Muc3BsaXQoJywgJyk7XG5cdFx0cmV0dXJuIHJlY2VudFRhZ3M7XG5cdH1cbn1cbiIsICJpbXBvcnQgVGFnQnVkZHkgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgVEJTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogVGFnQnVkZHk7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBUYWdCdWRkeSkge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cbiAgICBcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTsgXG5cblxuICAgICAgICBmdW5jdGlvbiBpc1ZhbGlkVGFnKHRhZykge1xuICAgICAgICAgICAgY29uc3QgdGFnUGF0dGVybiA9IC9eI1tcXHddKyQvO1xuICAgICAgICAgICAgcmV0dXJuIHRhZ1BhdHRlcm4udGVzdCh0YWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmlsdGVyQW5kSm9pblRhZ3ModGFnc1N0cmluZykge1xuICAgICAgICAgICAgY29uc3QgdGFnc0FycmF5ID0gdGFnc1N0cmluZy5zcGxpdChcIiwgXCIpO1xuICAgICAgICAgICAgY29uc3QgdmFsaWRUYWdzID0gdGFnc0FycmF5LmZpbHRlcihpc1ZhbGlkVGFnKTtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZFRhZ3Muam9pbihcIiwgXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiR2VuZXJhbFwiIH0pO1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIC8vIEFkZGluZyB3aWxsIGFsd2F5cyBsaW1pdCB0byAzLiBCdXQgaWYgdGhleSBlZGl0IGl0IGhlcmUsIGl0IGNhbiBiZSBhbnkgbGVuZ3RoLlxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJSZWNlbnQgdGFnc1wiKVxuICAgICAgICAuc2V0RGVzYyhcIlRoZSBtb3N0IHJlY2VudCB0YWdzIGFkZGVkIHZpYSBUYWcgQnVkZHkgYXJlIHN0b3JlZCBoZXJlLiBUaGVzZSB3aWxsIHNob3cgdXAgZmlyc3QgaW4gdGhlIGxpc3Qgd2hlbiBhZGRpbmcuXCIpXG4gICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjZW50bHlBZGRlZFRhZ3MpXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjZW50bHlBZGRlZFRhZ3MpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVjZW50bHlBZGRlZFRhZ3MgPSBmaWx0ZXJBbmRKb2luVGFncyh2YWx1ZSk7IC8vdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiTG9jayByZWNlbnQgdGFnc1wiKVxuICAgICAgICAuc2V0RGVzYyhcIlRvZ2dsZSBPTiB0byBsb2NrIHRoZSByZWNlbnQgdGFncyBsaXN0LiBSZWNlbnQgdGFncyB3aWxsIG5vdCBiZSB1cGRhdGVkLiBJbnN0ZWFkLCB0aGUgdGFncyBhYm92ZSB3aWxsIGFjdCBsaWtlIGEgZmF2b3JpdGVzIGxpc3QuXCIpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxvY2tSZWNlbnRUYWdzKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxvY2tSZWNlbnRUYWdzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkRlc2t0b3BcIiB9KTtcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBuZXcgU2V0dGluZyAoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFjdGlvbiB3aGVuIGNsaWNraW5nIGEgdGFnOlwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJXaGF0IHNob3VsZCBoYXBwZW4gd2hlbiB5b3UgY2xpY2sgYSB0YWc/XCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKG9wdCkgPT5cbiAgICAgICAgICAgICAgICBvcHRcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyZW1vdmUnLCBcIlJlbW92ZSB0YWdcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoYXNoJywgXCJSZW1vdmUgaGFzaFwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VkaXQnLCBcIkVkaXQgdGFnXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbmF0aXZlJywgXCJTZWFyY2ggdGFnXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2t0b3BDbGlja1RhZylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2t0b3BDbGlja1RhZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBY3Rpb24gd2hlbiBjbGlja2luZyBhIHRhZyB3aXRoIENNRC9DVFJMIG1vZGlmaWVyIGtleTpcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2hhdCBzaG91bGQgaGFwcGVuIHdoZW4geW91IGNsaWNrIGEgdGFnIHdoaWxlIGhvbGRpbmcgdGhlIENNRCBvciBDVFJMIGtleT9cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3JlbW92ZScsIFwiUmVtb3ZlIHRhZ1wiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hhc2gnLCBcIlJlbW92ZSBoYXNoXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZWRpdCcsIFwiRWRpdCB0YWdcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCduYXRpdmUnLCBcIlNlYXJjaCB0YWdcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVza3RvcENNRENsaWNrVGFnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVza3RvcENNRENsaWNrVGFnID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyAoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkFjdGlvbiB3aGVuIGNsaWNraW5nIGEgdGFnIHdpdGggT1BUL0FMVCBtb2RpZmllciBrZXk6XCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIldoYXQgc2hvdWxkIGhhcHBlbiB3aGVuIHlvdSBjbGljayBhIHRhZyB3aGlsZSBob2xkaW5nIHRoZSBPUFQgb3IgQUxUIGtleT9cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3JlbW92ZScsIFwiUmVtb3ZlIHRhZ1wiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hhc2gnLCBcIlJlbW92ZSBoYXNoXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZWRpdCcsIFwiRWRpdCB0YWdcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCduYXRpdmUnLCBcIlNlYXJjaCB0YWdcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVza3RvcE9QVENsaWNrVGFnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVza3RvcE9QVENsaWNrVGFnID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJNb2JpbGVcIiB9KTtcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBtb2JpbGUgbm90aWNlc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUb2dnbGUgT0ZGIHRvIGhpZGUgbm90aWNlcy5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTm90aWNlcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5vdGljZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nIChjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWN0aW9uIHdoZW4gRE9VQkxFLVRBUFBJTkcgYSB0YWc6XCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIldoYXQgc2hvdWxkIGhhcHBlbiB3aGVuIHlvdSBET1VCTEUtVEFQIGEgdGFnP1wiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChvcHQpID0+XG4gICAgICAgICAgICAgICAgb3B0XG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbigncmVtb3ZlJywgXCJSZW1vdmUgdGFnXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGFzaCcsIFwiUmVtb3ZlIGhhc2hcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdlZGl0JywgXCJFZGl0IHRhZ1wiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25hdGl2ZScsIFwiU2VhcmNoIHRhZ1wiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVEb3VibGVUYXBUYWcpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVEb3VibGVUYXBUYWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nIChjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWN0aW9uIHdoZW4gTE9ORy1QUkVTU0lORyBhIHRhZzpcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2hhdCBzaG91bGQgaGFwcGVuIHdoZW4geW91IExPTkctUFJFU1MgYSB0YWc/XCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKG9wdCkgPT5cbiAgICAgICAgICAgICAgICBvcHRcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyZW1vdmUnLCBcIlJlbW92ZSB0YWdcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoYXNoJywgXCJSZW1vdmUgaGFzaFwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VkaXQnLCBcIkVkaXQgdGFnXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUxvbmdQcmVzc1RhZylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUxvbmdQcmVzc1RhZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUUklQTEUtVEFQIG5vbi10YWcsIG5vbi1saW5rIHRleHQgdG8gYWRkIGEgdGFnOlwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJUb2dnbGUgT0ZGIHRvIGRpc2FibGUgdHJpcGxlLXRhcC5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVHJpcGxlVGFwVGV4dClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZVRyaXBsZVRhcFRleHQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlRhZyBTdW1tYXJpZXNcIiB9KTtcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyB0YWcgc3VtbWFyeSBidXR0b25zXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRvZ2dsZSBPRkYgdG8gaGlkZSB0aGVzZSBidXR0b25zLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3VtbWFyeUJ1dHRvbnMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3VtbWFyeUJ1dHRvbnMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDVcIiwgeyB0ZXh0OiBcIlRhZyBTdW1tYXJpZXMgSXRlbXNcIiB9KTtcblxuICAgICAgICAvLyBzaG93IGJ1dHRvbiA6IGJvdGgsIGRlc2t0b3Agb25seSwgbW9iaWxlIG9ubHksIG5vbmVcbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJSZW1vdmUgdGFnIGJ1dHRvbjpcIilcbiAgICAgICAgICAgIC8vLnNldERlc2MoXCJXaGF0IHNob3VsZCBoYXBwZW4gd2hlbiB5b3UgY2xpY2sgYSB0YWcgd2hpbGUgaG9sZGluZyB0aGUgT1BUIG9yIEFMVCBrZXk/XCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKG9wdCkgPT5cbiAgICAgICAgICAgICAgICBvcHRcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhbHdheXMnLCBcIkRlc2t0b3AgYW5kIG1vYmlsZVwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2Rlc2t0b3AnLCBcIk9ubHkgZGVza3RvcFwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21vYmlsZScsIFwiT25seSBtb2JpbGVcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdoaWRlJywgXCJIaWRlXCIpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0bilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0biA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDb3B5IHRvIGNsaXBib2FyZCBidXR0b246XCIpXG4gICAgICAgICAgICAvLy5zZXREZXNjKFwiV2hhdCBzaG91bGQgaGFwcGVuIHdoZW4geW91IGNsaWNrIGEgdGFnIHdoaWxlIGhvbGRpbmcgdGhlIE9QVCBvciBBTFQga2V5P1wiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChvcHQpID0+XG4gICAgICAgICAgICAgICAgb3B0XG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYWx3YXlzJywgXCJEZXNrdG9wIGFuZCBtb2JpbGVcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdkZXNrdG9wJywgXCJPbmx5IGRlc2t0b3BcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdtb2JpbGUnLCBcIk9ubHkgbW9iaWxlXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGlkZScsIFwiSGlkZVwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3B5VG9DQkJ0bilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvcHlUb0NCQnRuID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyAoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIk1vdmUgdG8gc2VjdGlvbiBidXR0b246XCIpXG4gICAgICAgICAgICAvLy5zZXREZXNjKFwiV2hhdCBzaG91bGQgaGFwcGVuIHdoZW4geW91IGNsaWNrIGEgdGFnIHdoaWxlIGhvbGRpbmcgdGhlIE9QVCBvciBBTFQga2V5P1wiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChvcHQpID0+XG4gICAgICAgICAgICAgICAgb3B0XG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignYWx3YXlzJywgXCJEZXNrdG9wIGFuZCBtb2JpbGVcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdkZXNrdG9wJywgXCJPbmx5IGRlc2t0b3BcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdtb2JpbGUnLCBcIk9ubHkgbW9iaWxlXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignaGlkZScsIFwiSGlkZVwiKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb3ZlVG9TZWN0aW9uQnRuKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW92ZVRvU2VjdGlvbkJ0biA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDb3B5IHRvIHNlY3Rpb24gYnV0dG9uOlwiKVxuICAgICAgICAgICAgLy8uc2V0RGVzYyhcIldoYXQgc2hvdWxkIGhhcHBlbiB3aGVuIHlvdSBjbGljayBhIHRhZyB3aGlsZSBob2xkaW5nIHRoZSBPUFQgb3IgQUxUIGtleT9cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2Fsd2F5cycsIFwiRGVza3RvcCBhbmQgbW9iaWxlXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVza3RvcCcsIFwiT25seSBkZXNrdG9wXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbW9iaWxlJywgXCJPbmx5IG1vYmlsZVwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hpZGUnLCBcIkhpZGVcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weVRvU2VjdGlvbkJ0bilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvcHlUb1NlY3Rpb25CdG4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nIChjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ29weSBsaW5rIHRvIHNlY3Rpb24gYnV0dG9uOlwiKVxuICAgICAgICAgICAgLy8uc2V0RGVzYyhcIldoYXQgc2hvdWxkIGhhcHBlbiB3aGVuIHlvdSBjbGljayBhIHRhZyB3aGlsZSBob2xkaW5nIHRoZSBPUFQgb3IgQUxUIGtleT9cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2Fsd2F5cycsIFwiRGVza3RvcCBhbmQgbW9iaWxlXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVza3RvcCcsIFwiT25seSBkZXNrdG9wXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbW9iaWxlJywgXCJPbmx5IG1vYmlsZVwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hpZGUnLCBcIkhpZGVcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weUxpbmtUb1NlY3Rpb25CdG4pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3B5TGlua1RvU2VjdGlvbkJ0biA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcgKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDb3B5IHRvIG5vdGUgYnV0dG9uOlwiKVxuICAgICAgICAgICAgLy8uc2V0RGVzYyhcIldoYXQgc2hvdWxkIGhhcHBlbiB3aGVuIHlvdSBjbGljayBhIHRhZyB3aGlsZSBob2xkaW5nIHRoZSBPUFQgb3IgQUxUIGtleT9cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2Fsd2F5cycsIFwiRGVza3RvcCBhbmQgbW9iaWxlXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignZGVza3RvcCcsIFwiT25seSBkZXNrdG9wXCIpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbW9iaWxlJywgXCJPbmx5IG1vYmlsZVwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2hpZGUnLCBcIkhpZGVcIilcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weVRvTm90ZUJ0bilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvcHlUb05vdGVCdG4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIGlmIGFueSBvZiB0aGUgb3RoZXIgYnV0dG9ucyBhcmUgc2hvd24sIHdlIHNob3cgdGhlIGRyb3AgZG93blxuICAgICAgICAgICAgLy8gZG8gdGhpcyBpbiB0aGUgdGFnIHN1bW1hcnlcblxuXG5cbiAgICAgICAgLypcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiT3ZlcnJpZGUgbmF0aXZlIHRhZyBzZWFyY2ggb24gY2xpY2tcIilcbiAgICAgICAgLnNldERlc2MoXCJUb2dnbGUgT0ZGIHRvIHVzZSBDVFJML0NNRCtDTElDSyB0byByZW1vdmUgdGFnLlwiKVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVPbkNsaWNrKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZU9uQ2xpY2sgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKFwiQ29udmVydCB0byB0YWcgdGV4dCAocmVtb3ZlcyAjKVwiKVxuICAgICAgICAuc2V0RGVzYyhcIlRvZ2dsZSBPRkYgdG8gdXNlIE9QVC9BTFQrQ0xJQ0sgdG8gcGVyZm9ybSBuYXRpdmUgdGFnIHNlYXJjaC5cIilcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3B0VG9Db252ZXJ0KVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wdFRvQ29udmVydCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUoXCJSZW1vdmUgbmVzdGVkIHRhZ3MgZmlyc3RcIilcbiAgICAgICAgLnNldERlc2MoXCJUb2dnbGUgT0ZGIHRvIHVzZSBTSElGVCtDTElDSyB0byByZW1vdmUgbmVzdGVkIHRhZ3MgZmlyc3QuXCIpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUNoaWxkVGFnc0ZpcnN0KVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUNoaWxkVGFnc0ZpcnN0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIk1vYmlsZSB0YWcgc2VhcmNoXCIpXG4gICAgICAgIC5zZXREZXNjKFwiVG9nZ2xlIE9OIHRvIHJlc3RvcmUgbW9iaWxlIG5hdGl2ZSB0YWcgc2VhcmNoIG9uIHRhcC4gVGFnIHJlbW92YWwgd2lsbCB0aGVuIHVzZSBMT05HIFBSRVNTLlwiKVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVUYWdTZWFyY2gpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFnU2VhcmNoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIFxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIlNob3cgdGFnIHN1bW1hcnkgcGFyYWdyYXBoIGJ1dHRvbnNcIilcbiAgICAgICAgLnNldERlc2MoXCJTaG93IGJ1dHRvbnMgYmVsb3cgZWFjaCB0YWdnZWQgcGFyYWdyYXBoIHRoYXQgbGV0IHlvdSBjb3B5LCByZW1vdmUsIGFuZCBtb3ZlIHRoZSBwYXJhZ3JhcGguXCIpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ1N1bW1hcnlCbG9ja0J1dHRvbnMpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnU3VtbWFyeUJsb2NrQnV0dG9ucyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgKi9cblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaHInKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiU3VwcG9ydCBhIGJ1ZGR5XCIgfSk7XG4gICAgICAgIGNvbnN0IGRvbmF0ZUxpbmsgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYScpO1xuICAgICAgICBkb25hdGVMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsICdodHRwczovL3d3dy5idXltZWFjb2ZmZWUuY29tL21vcmVtZXlvdScpO1xuICAgICAgICBjb25zdCBkb25hdGVCdXR0b24gPSBjcmVhdGVFbCgnaW1nJyk7XG4gICAgICAgIGRvbmF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL2Nkbi5idXltZWFjb2ZmZWUuY29tL2J1dHRvbnMvdjIvZGVmYXVsdC15ZWxsb3cucG5nJyk7XG4gICAgICAgIGRvbmF0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdCdXkgTWUgQSBDb2ZmZWUnKTtcbiAgICAgICAgZG9uYXRlQnV0dG9uLnN0eWxlID0gJ2hlaWdodDogNDBweCAhaW1wb3J0YW50O3dpZHRoOiAxNTBweCAhaW1wb3J0YW50OydcbiAgICAgICAgZG9uYXRlTGluay5hcHBlbmRDaGlsZChkb25hdGVCdXR0b24pXG4gICAgICAgIC8vLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cImh0dHBzOi8vY2RuLmJ1eW1lYWNvZmZlZS5jb20vYnV0dG9ucy92Mi9kZWZhdWx0LXllbGxvdy5wbmdcIiBhbHQ9XCJCdXkgTWUgQSBDb2ZmZWVcIiBzdHlsZT1cImhlaWdodDogNDBweCAhaW1wb3J0YW50O3dpZHRoOiAxNTBweCAhaW1wb3J0YW50O1wiID48L2E+YDtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnYnInKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2JyJyk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdicicpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZShcIkRlYnVnIG1vZGVcIilcbiAgICAgICAgLnNldERlc2MoXCJPdXRwdXQgdG8gY29uc29sZS5cIilcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIERyb3Bkb3duQ29tcG9uZW50LCBzZXRJY29uLCBNYXJrZG93blJlbmRlcmVyLCBEcm9wZG93bkNvbXBvbmVudCwgQ29tcG9uZW50LCBURmlsZSwgZ2V0QWxsVGFncywgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBUYWdCdWRkeSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgVGFnU2VsZWN0b3IgfSBmcm9tICcuL01vZGFsJ1xuaW1wb3J0IHsgVEJUYWdFZGl0b3JNb2RhbCB9IGZyb20gJy4vVGFnRWRpdG9yTW9kYWwnXG5pbXBvcnQgeyBTZWxlY3RGaWxlTW9kYWwgfSBmcm9tICcuL0ZpbmRGaWxlTW9kYWwnXG5cbmV4cG9ydCBjbGFzcyBHVUkge1xuXHRhcHA6IEFwcDsgXG5cdHBsdWdpbjogVGFnQnVkZHk7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsIFxuXHRcdHBsdWdpbjogVGFnQnVkZHkpIHtcblxuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG4gXG5cdHNob3dUYWdFZGl0b3IgKHRhZ0VsKSB7XG5cblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBtb2RlID0gdmlldz8uZ2V0TW9kZSgpO1xuXHRcblx0XHRpZiAodGhpcy5hcHAuaXNNb2JpbGUpIHtcblx0XHRcdFxuXHRcdH0gZWxzZSB7XG5cdFx0XG5cdFx0fVxuXG5cdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludCAodGFnRWwuZ2V0QXR0cmlidXRlKCdtZC1pbmRleCcpKTtcblx0XHRjb25zdCB0YWcgPSB0YWdFbC5pbm5lclRleHQ7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSB0YWdFbC5nZXRBdHRyaWJ1dGUoJ2ZpbGUtc291cmNlJylcblx0XHRjb25zdCB0YWdDb250YWluZXJUeXBlID0gdGFnRWwuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG5cbiAgICAgICBcdGlmIChtb2RlID09ICdwcmV2aWV3Jykge1xuXHRcdFx0XG5cdFx0XHRjb25zdCB0YWdFZGl0b3JNb2RhbDogVEJUYWdFZGl0b3JNb2RhbCA9IG5ldyBUQlRhZ0VkaXRvck1vZGFsIChcblx0XHRcdFx0dGhpcy5hcHAsIFxuXHRcdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdFx0dGFnLFxuXHRcdFx0XHRpbmRleCxcblx0XHRcdFx0ZmlsZVBhdGgsXG5cdFx0XHRcdCh0YWdDb250YWluZXJUeXBlID09ICdwbHVnaW4tc3VtbWFyeScpID8gdGFnRWwgOiBudWxsLFxuXHRcdFx0XHQvL3RhZyxcblx0XHRcdFx0Ly9pbmRleFxuXHRcdFx0XHQvLyh0YWcpPT57XG5cdFx0XHRcdC8vXHRjb25zb2xlLmxvZyh0YWcpIFxuXHRcdFx0XHQvL31cblx0XHRcdCkub3BlbigpO1xuXG5cdFx0fVxuXG5cblx0fVxuXG5cdC8qaXNUYWdWYWxpZCAodGFnOnN0cmluZyk6Ym9vbGVhbiB7IC8vIGluY2x1ZGluZyB0aGUgI1xuXHRcdGNvbnN0IHRhZ1BhdHRlcm4gPSAvXiNbXFx3XSskLztcblx0XHRyZXR1cm4gdGFnUGF0dGVybi50ZXN0KHRhZyk7XG5cdH0qL1xuXG5cdG1ha2VCdXR0b24gKFxuXHRcdGxhYmxlOiBzdHJpbmcsIFxuXHRcdGNsaWNrRm46IChlOiBFdmVudCkgPT4gdm9pZCwgXG5cdFx0Y2xhc3NJZD0ndGFnc3VtbWFyeS1idXR0b24nXG5cdCk6IEhUTUxFbGVtZW50IHtcblxuXHRcdGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZUVsKCdidXR0b24nKTtcblx0ICAgIC8vYnV0dG9uLmlubmVyVGV4dCA9IGxhYmxlO1xuICAgIFx0c2V0SWNvbihidXR0b24sIGxhYmxlKTtcblx0ICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc0lkO1xuXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJEb21FdmVudChcblx0XHRcdGJ1dHRvbiwgXG5cdFx0XHQnY2xpY2snLCBcblx0XHRcdGNsaWNrRm5cblx0XHQpO1xuXG5cdCAgICByZXR1cm4gYnV0dG9uO1xuXHR9XG5cblxuXHRtYWtlQmxvY2tTZWxlY3RvciAoXG5cdFx0aW5kZXg6IE51bWJlclxuXHQpOiBIVE1MRWxlbWVudCB7XG5cdFx0XG5cdFx0Y29uc3QgY2hlY2tib3hFbCA9IGNyZWF0ZUVsICgnZGl2Jyk7XG5cdFx0Ly9jaGVja2JveEVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGFnc3VtbWFyeS1jaGVja2JveCcpXG5cdFx0Y2hlY2tib3hFbC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgaW5kZXgpXG5cblx0XHRsZXQgY2hlY2tlZEJ0bjtcblx0XHRsZXQgdW5jaGVja2VkQnRuO1xuXG5cdFx0Y29uc3QgY2hlY2tCb3ggPSBmdW5jdGlvbiAoYm9vbDogQm9vbGVhbikge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhjaGVja2JveEVsLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSlcblxuXHRcdFx0dGhpcy5wbHVnaW4udGFnU3VtbWFyeS51cGRhdGVTZWxlY3Rpb24gKHBhcnNlSW50KGNoZWNrYm94RWwuZ2V0QXR0cmlidXRlKCdpbmRleCcpKSwgYm9vbCk7XG5cdFx0XHRpZiAoYm9vbCkge1xuXHRcdFx0XHR1bmNoZWNrZWRCdG4ucmVtb3ZlKCk7XG5cdFx0XHRcdGNoZWNrYm94RWwuYXBwZW5kQ2hpbGQoY2hlY2tlZEJ0bik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjaGVja2VkQnRuLnJlbW92ZSgpO1xuXHRcdFx0XHRjaGVja2JveEVsLmFwcGVuZENoaWxkKHVuY2hlY2tlZEJ0bik7XG5cdFx0XHR9IFxuXHRcdH0uYmluZCh0aGlzKTtcblxuXHRcdGNoZWNrZWRCdG4gPSB0aGlzLm1ha2VCdXR0b24gKCdjaGVjay1zcXVhcmUnLCAoZSkgPT4geyBcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRjaGVja0JveChmYWxzZSlcblxuXHRcdH0sICd0YWdzdW1tYXJ5LWJ1dHRvbiB0YWdzdW1tYXJ5LWNoZWNrYm94IGNoZWNrZWQnKTtcblx0XHRjaGVja2VkQnRuLnRpdGxlID0gJ1Vuc2VsZWN0IHRoaXMgcGFyYWdyYXBoLic7XG5cdFx0XG5cdFx0dW5jaGVja2VkQnRuID0gdGhpcy5tYWtlQnV0dG9uICgnc3F1YXJlJywgKGUpID0+IHsgXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0Y2hlY2tCb3godHJ1ZSlcblxuXHRcdH0sICd0YWdzdW1tYXJ5LWJ1dHRvbiB0YWdzdW1tYXJ5LWNoZWNrYm94Jyk7XG5cdFx0dW5jaGVja2VkQnRuLnRpdGxlID0gJ1NlbGVjdCB0aGlzIHBhcmFncmFwaC4nO1xuXG5cdFx0Y2hlY2tCb3ggKGZhbHNlKVxuXG5cdFx0cmV0dXJuIGNoZWNrYm94RWw7XG5cblx0fVxuXG5cdG1ha2VSZW1vdmVUYWdCdXR0b24gKFxuXHRcdGNsaWNrRm46IEZ1bmN0aW9uLFxuXHRcdHBhcmFncmFwaEVsOiBFbGVtZW50LCBcblx0XHR0YWc6IHN0cmluZy8vLCBcblx0XHQvL2ZpbGVQYXRoOiBzdHJpbmdcblx0KTpIVE1MQnV0dG9uRWxlbWVudCB7XG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uICgnbGlzdC14JywgKGUpID0+IHsgXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRjbGlja0ZuKGUsIHBhcmFncmFwaEVsLCB0YWcpXG5cblx0XHRcdC8vY29uc3QgdGFnRWwgPSBVdGlscy5nZXRUYWdFbGVtZW50KHBhcmFncmFwaEVsLCB0YWcpO1xuXHRcdFx0Ly90aGlzLnBsdWdpbi50YWdFZGl0b3IuZWRpdCh0YWdFbCk7XG5cdFx0fSk7XG5cdFx0YnV0dG9uLnRpdGxlID0gJ1JlbW92ZWQgJyArIHRhZyArICcgZnJvbSBwYXJhZ3JhcGguJztcblx0XHRyZXR1cm4gYnV0dG9uO1xuXHR9XG5cblx0bWFrZVN1bW1hcnlSZWZyZXNoQnV0dG9uIChcblx0XHRzdW1tYXJ5RWw6SFRNTEVsZW1lbnRcblx0KTogSFRNTEVsZW1lbnQge1x0XG5cdFx0XG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uKFxuXHRcdFx0J3JlZnJlc2gtY2N3JywgXG5cdFx0XHQoZSkgPT4geyBcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdHRoaXMucGx1Z2luLnRhZ1N1bW1hcnkudXBkYXRlKHN1bW1hcnlFbCk7XG5cdFx0XHRcdC8vdGhpcy51cGRhdGVTdW1tYXJ5KHN1bW1hcnlFbCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UgKCdUYWcgU3VtbWFyeSB1cGRhdGVkJyk7XG5cdFx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4geyBcblx0XHRcdFx0XHQvL3RoaXMucGx1Z2luLnRhZ1Byb2Nlc3Nvci5ydW4oKTsgXG5cdFx0XHRcdH0sIDEwKTtcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0YnV0dG9uLnRpdGxlID0gJ1JlZnJlc2ggdGFnIHN1bW1hcnknO1xuXG5cdFx0cmV0dXJuIGJ1dHRvbjtcblx0fVxuXG5cdG1ha2VDb3B5VG9TZWN0aW9uIChcblx0XHRjbGlja0ZuOkZ1bmN0aW9uLFxuXHRcdGNvbnRlbnQ6IHN0cmluZywgXG5cdFx0c2VjdGlvbnM6IHN0cmluZ1tdLCBcblx0XHR0YWdzOiBBcnJheSwgXG5cdFx0ZmlsZVBhdGg6IHN0cmluZywgXG5cdFx0cGFyYWdyYXBoRWw6IEhUTUxFbGVtZW50LCBcblx0XHRzdW1tYXJ5RWw6IEhUTUxFbGVtZW50XG5cdCk6IEhUTUxFbGVtZW50IHtcblxuXHRcdGNvbnN0IGNvcHlUb0VsOiBIVE1MRWxlbWVudCA9IGNyZWF0ZUVsKCdzcGFuJyk7XG5cdFx0Y29uc3Qgc2VsZWN0RWw6IEhUTUxTZWxlY3RFbGVtZW50ID0gY3JlYXRlRWwoJ3NlbGVjdEVsJyk7XG5cdFx0bGV0IGRyb3Bkb3duID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHNlbGVjdEVsKTtcblx0XHRzZWN0aW9ucy5mb3JFYWNoKChzZWMpID0+IHtcblx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihzZWMsIFV0aWxzLnRydW5jYXRlU3RyaW5nQXRXb3JkKHNlYywgMTYpKTsgXG5cdFx0fSk7XG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCd0b3AnLCAnTm90ZSB0b3AnKTsgXG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCdlbmQnLCAnTm90ZSBlbmQnKTsgXG5cdFx0Ly9kcm9wZG93bi5hZGRPcHRpb24oJ25vdGUnLCAnTm90ZScpOyBcblx0XHQvL2Ryb3Bkb3duLmFkZE9wdGlvbignbmV3Tm90ZScsICdOZXcgbm90ZScpOyBcblx0XHRcblx0XHRzZWxlY3RFbC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS5jbGFzc05hbWUgPSAndGFnc3VtbWFyeS1kcm9wZG93bic7XG5cdFx0XG5cdFx0aWYgKFV0aWxzLnBsYXRmb3JtU2V0dGluZ0NoZWNrICh0aGlzLmFwcCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weVRvTm90ZUJ0bikpIHtcblx0XHRcdGNvcHlUb0VsLmFwcGVuZENoaWxkKFxuXHRcdFx0XHR0aGlzLm1ha2VDb3B5VG9CdXR0b24gKFxuXHRcdFx0XHRcdGNsaWNrRm4sXG5cdFx0XHRcdFx0J25vdGUnLFx0XG5cdFx0XHRcdFx0ZHJvcGRvd24sXG5cdFx0XHRcdFx0cGFyYWdyYXBoRWwsIFxuXHRcdFx0XHRcdHN1bW1hcnlFbCxcblx0XHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRcdHRhZ3MsXG5cdFx0XHRcdFx0ZmlsZVBhdGggXG5cdFx0XHRcdClcblx0XHRcdClcblx0XHR9XG5cblx0XHRpZiAoVXRpbHMucGxhdGZvcm1TZXR0aW5nQ2hlY2sgKHRoaXMuYXBwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3B5TGlua1RvU2VjdGlvbkJ0bikpIHtcblx0XHRcdGNvcHlUb0VsLmFwcGVuZENoaWxkKFxuXHRcdFx0XHR0aGlzLm1ha2VDb3B5VG9CdXR0b24gKFxuXHRcdFx0XHRcdGNsaWNrRm4sXG5cdFx0XHRcdFx0J2xpbmsnLFx0XG5cdFx0XHRcdFx0ZHJvcGRvd24sXG5cdFx0XHRcdFx0cGFyYWdyYXBoRWwsIFxuXHRcdFx0XHRcdHN1bW1hcnlFbCxcblx0XHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRcdHRhZ3MsXG5cdFx0XHRcdFx0ZmlsZVBhdGggXG5cdFx0XHRcdClcblx0XHRcdClcblx0XHR9XG5cblx0XHRpZiAoVXRpbHMucGxhdGZvcm1TZXR0aW5nQ2hlY2sgKHRoaXMuYXBwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3B5VG9TZWN0aW9uQnRuKSkge1xuXHRcdFx0Y29weVRvRWwuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdHRoaXMubWFrZUNvcHlUb0J1dHRvbiAoXG5cdFx0XHRcdFx0Y2xpY2tGbixcblx0XHRcdFx0XHQnY29weScsXG5cdFx0XHRcdFx0ZHJvcGRvd24sXG5cdFx0XHRcdFx0cGFyYWdyYXBoRWwsIFxuXHRcdFx0XHRcdHN1bW1hcnlFbCxcblx0XHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRcdHRhZ3MsXG5cdFx0XHRcdFx0ZmlsZVBhdGggXG5cdFx0XHRcdClcblx0XHRcdClcblx0XHR9XG5cblx0XHRpZiAoVXRpbHMucGxhdGZvcm1TZXR0aW5nQ2hlY2sgKHRoaXMuYXBwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb3ZlVG9TZWN0aW9uQnRuKSkge1xuXHRcdFx0Y29weVRvRWwuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdHRoaXMubWFrZUNvcHlUb0J1dHRvbiAoXG5cdFx0XHRcdFx0Y2xpY2tGbixcblx0XHRcdFx0XHQnbW92ZScsXG5cdFx0XHRcdFx0ZHJvcGRvd24sXG5cdFx0XHRcdFx0cGFyYWdyYXBoRWwsIFxuXHRcdFx0XHRcdHN1bW1hcnlFbCxcblx0XHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRcdHRhZ3MsXG5cdFx0XHRcdFx0ZmlsZVBhdGggXG5cdFx0XHRcdClcblx0XHRcdClcblx0XHR9XG5cblx0XHRpZiAoVXRpbHMucGxhdGZvcm1TZXR0aW5nQ2hlY2tNdWx0aXBsZSAodGhpcy5hcHAsIFt0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb3ZlVG9TZWN0aW9uQnRuLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvcHlUb1NlY3Rpb25CdG4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weUxpbmtUb1NlY3Rpb25CdG4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weVRvTm90ZUJ0bl0pKSB7XG5cdFx0XHRjb3B5VG9FbC5hcHBlbmRDaGlsZChzZWxlY3RFbCk7XG5cdFx0fVxuXG5cblx0XHRyZXR1cm4gY29weVRvRWw7XG5cdH1cblxuXHRtYWtlQ29weVRvQnV0dG9uIChcblx0XHRjbGlja0ZuOiBGdW5jdGlvbixcblx0XHRtb2RlOiBTdHJpbmcsXG5cdFx0ZHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50LFxuXHRcdHBhcmFncmFwaEVsOiBIVE1MRWxlbWVudCwgXG5cdFx0c3VtbWFyeUVsOiBIVE1MRWxlbWVudCxcblx0XHRjb250ZW50OiBzdHJpbmcsICBcblx0XHR0YWdzOiBBcnJheSwgXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyBcblx0KTogSFRNTEVsZW1lbnQge1xuXG5cdFx0bGV0IGJ1dHRvbkxhYmVsO1xuXHRcdGlmIChtb2RlID09ICdsaW5rJykgYnV0dG9uTGFiZWwgPSAnbGluayc7XG5cdFx0ZWxzZSBpZiAobW9kZSA9PSAnY29weScpIGJ1dHRvbkxhYmVsID0gJ2NvcHktcGx1cyc7XG5cdFx0ZWxzZSBpZiAobW9kZSA9PSAnbW92ZScpIGJ1dHRvbkxhYmVsID0gJ3JlcGxhY2UnOyAvLydjb3B5LWNoZWNrJztcblx0XHRlbHNlIGlmIChtb2RlID09ICdub3RlJykgYnV0dG9uTGFiZWwgPSAnZmlsZS1wbHVzLTInO1xuXG5cdFx0Y29uc3QgYnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uIChidXR0b25MYWJlbCwgYXN5bmMgKGUpID0+IHsgXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRpZiAobW9kZSA9PSAnbm90ZScpIHtcblx0XHRcdC8vaWYgKGRyb3Bkb3duLmdldFZhbHVlKCkgPT0gJ25vdGUnKSB7XG5cblx0XHRcdFx0bmV3IFNlbGVjdEZpbGVNb2RhbCh0aGlzLmFwcCwgKGZpbGUpID0+IHtcblxuICBcdFx0XHRcdFx0Ly9uZXcgTm90aWNlKGBGaWxlOiAke3Jlc3VsdC5uYW1lfWApO1xuXG4gIFx0XHRcdFx0XHRjbGlja0ZuKGUsIG1vZGUsIGRyb3Bkb3duLCBwYXJhZ3JhcGhFbCwgc3VtbWFyeUVsLCBjb250ZW50LCB0YWdzLCBmaWxlUGF0aCwgZmlsZSk7XG5cblx0XHRcdFx0fSkub3BlbigpO1xuXG5cdFx0XHQvKn0gZWxzZSBpZiAoZHJvcGRvd24uZ2V0VmFsdWUoKSA9PSAnbmV3Tm90ZScpIHtcblxuLy9jb25zb2xlLmxvZyh2aWV3LCBmaWxlTmFtZSlcblx0XHRcdFx0Y2xpY2tGbihlLCBtb2RlLCBkcm9wZG93biwgcGFyYWdyYXBoRWwsIHN1bW1hcnlFbCwgY29udGVudCwgdGFncywgZmlsZVBhdGgpO1xuKi9cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y2xpY2tGbihlLCBtb2RlLCBkcm9wZG93biwgcGFyYWdyYXBoRWwsIHN1bW1hcnlFbCwgY29udGVudCwgdGFncywgZmlsZVBhdGgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGxldCBidXR0b25Ib3ZlclRleHQ7XG5cdFx0aWYgKG1vZGUgPT0gJ2xpbmsnKSBidXR0b25Ib3ZlclRleHQgPSAnQ29weSBwYXJhZ3JhcGggbGluay4nIDtcblx0XHRlbHNlIGlmIChtb2RlID09ICdjb3B5JykgYnV0dG9uSG92ZXJUZXh0ID0gJ0NvcHkgcGFyYWdyYXBoLic7XG5cdFx0ZWxzZSBpZiAobW9kZSA9PSAnbW92ZScpIGJ1dHRvbkhvdmVyVGV4dCA9ICdNb3ZlIHBhcmFncmFwaC4nO1xuXHRcdGVsc2UgaWYgKG1vZGUgPT0gJ25vdGUnKSBidXR0b25Ib3ZlclRleHQgPSAnQ29weSBwYXJhZ3JhcGggdG8gc2VjdGlvbiBpbiBub3RlLic7XG5cblx0XHRidXR0b24udGl0bGUgPSBidXR0b25Ib3ZlclRleHQ7XG5cblx0XHRyZXR1cm4gYnV0dG9uO1xuXHRcdFxuXHR9XG5cblx0bWFrZUJha2VCdXR0b24gKFxuXHRcdGNsaWNrRm46IEZ1bmN0aW9uLFxuXHRcdHN1bW1hcnlNZDogc3RyaW5nLCBcblx0XHRzdW1tYXJ5RWw6SFRNTEVsZW1lbnQsIFxuXHRcdGZpbGVQYXRoOnN0cmluZ1xuXHQpOiBIVE1MRWxlbWVudCB7XHRcblx0XHRcblx0XHRjb25zdCBidXR0b24gPSB0aGlzLm1ha2VCdXR0b24gKFxuXHRcdFx0J3N0YW1wJywgXG5cdFx0XHRhc3luYyhlKSA9PiB7IFxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y2xpY2tGbiAoc3VtbWFyeU1kLCBzdW1tYXJ5RWwsIGZpbGVQYXRoKVxuXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGJ1dHRvbi50aXRsZSA9ICdGbGF0dGVuIHN1bW1hcnkgKHJlcGxhY2VzIGNvZGUgYmxvY2spLic7XG5cblx0XHRyZXR1cm4gYnV0dG9uO1xuXHR9XG5cblx0bWFrZUNvcHlCdXR0b24gKFxuXHRcdGNsaWNrRm4sXG5cdFx0Y29udGVudFxuXHQpOiBIVE1MRWxlbWVudCB7XHRcblx0XHRjb25zdCBidXR0b24gPSB0aGlzLm1ha2VCdXR0b24gKCdjbGlwYm9hcmQtbGlzdCcsIChlKSA9PiB7IFxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGNsaWNrRm4oZSwgY29udGVudCk7XG5cdFx0fSk7XG5cdFx0YnV0dG9uLnRpdGxlID0gJ0NvcHkgcGFyYWdyYXBoIHRvIGNsaXBib2FyZC4nO1xuXG5cdFx0cmV0dXJuIGJ1dHRvbjtcblx0fVxuXG5cdG1ha2VDb3B5U3VtbWFyeUJ1dHRvbiAoXG5cdFx0c3VtbWFyeU1kOiBzdHJpbmcpXG5cdDpIVE1MRWxlbWVudCB7XG5cblx0XHRjb25zdCBidXR0b24gPSB0aGlzLm1ha2VCdXR0b24gKFxuXHRcdFx0J2NsaXBib2FyZC1saXN0JywgXG5cdFx0XHQoZSkgPT4geyBcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHN1bW1hcnlNZCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UgKCdTdW1tYXJ5IGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGJ1dHRvbi50aXRsZSA9ICdDb3B5IHN1bW1hcnknO1xuXG5cdFx0cmV0dXJuIGJ1dHRvbjtcblx0fVxuXG5cdG1ha2VTdW1tYXJ5Tm90ZUJ1dHRvbiAoXG5cdFx0Y2xpY2tGbjogRnVuY3Rpb24sXG5cdFx0c3VtbWFyeU1kOiBzdHJpbmcsIFxuXHRcdHRhZ3M6IEFycmF5XG5cdCk6IEhUTUxFbGVtZW50IHtcblxuXHRcdGNvbnN0IGJ1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbiAoXG5cdFx0XHQnZmlsZS1wbHVzLTInLCBcblx0XHRcdGFzeW5jIChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4vL25ldyBOb3RpY2UgKCdtYWtlU3VtbWFyeU5vdGVCdXR0b24nLCAxMDAwMClcblx0XHRcdFx0Y2xpY2tGbiAoc3VtbWFyeU1kLCB0YWdzKTtcblx0XHRcdH1cblx0XHQpO1xuXG5cdFx0YnV0dG9uLnRpdGxlID0gJ0NyZWF0ZSBub3RlIGZyb20gc3VtbWFyeSc7XG5cblx0XHRyZXR1cm4gYnV0dG9uO1xuXHR9XG5cblx0c2hvd1RhZ1NlbGVjdG9yKGV2ZW50KXtcblx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBtb2RlID0gdmlldz8uZ2V0TW9kZSgpO1xuXHRcdGxldCBwYWdlWCwgcGFnZVlcblx0XHRsZXQgbm9kZVR5cGVcblx0XHRsZXQgZGVlcGVzdE5vZGU7XG5cdFx0bGV0IHJhbmdlXG5cdFx0aWYgKHRoaXMuYXBwLmlzTW9iaWxlKSB7XG5cdFx0XHRjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF0gfHwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG5cdFx0XHRwYWdlWCA9IE1hdGgucm91bmQodG91Y2gucGFnZVgpO1xuXHRcdFx0cGFnZVkgPSBNYXRoLnJvdW5kKHRvdWNoLnBhZ2VZKTtcblx0XHRcdC8vY29uc3QgZWwgPSBVdGlscy5nZXREZWVwZXN0VGV4dE5vZGUoZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwYWdlWCwgcGFnZVkpKVxuXHRcdFx0Ly9jb25zdCBlbCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQocGFnZVgsIHBhZ2VZKTtcblx0XHRcdC8vZGVlcGVzdE5vZGUgPSBVdGlscy5nZXREZWVwZXN0Tm9kZShlbCk7XG5cdFx0XHRyYW5nZSA9IGRvY3VtZW50LmNhcmV0UmFuZ2VGcm9tUG9pbnQocGFnZVgsIHBhZ2VZKVxuXHRcdFx0bm9kZVR5cGUgPSByYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZSAvL2RlZXBlc3ROb2RlLm5vZGVUeXBlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYWdlWCA9IGV2ZW50LnBhZ2VYO1xuXHRcdFx0cGFnZVkgPSBldmVudC5wYWdlWTtcblx0XHRcdHJhbmdlID0gZG9jdW1lbnQuY2FyZXRSYW5nZUZyb21Qb2ludChwYWdlWCwgcGFnZVkpXG5cdFx0XHRub2RlVHlwZSA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLm5vZGVUeXBlO1xuXHRcdH1cblxuXHRcdC8vY29uc3QgdGFyZ2V0Q2xhc3NlcyA9IFsndGFnJ107XG4gICAgICAgIC8vaWYgKG1vZGUgPT0gJ3ByZXZpZXcnICYmICF0YXJnZXRDbGFzc2VzLnNvbWUoY2xzID0+IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoY2xzKSkpIHtcbiAgICAgICBcdGlmIChtb2RlID09ICdwcmV2aWV3Jykge1xuXHRcdFx0aWYgKG5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuXHRcdFx0XHRjb25zdCB0YWdTZWxlY3RvcjogVGFnU2VsZWN0b3IgPSBuZXcgVGFnU2VsZWN0b3IoXG5cdFx0XHRcdFx0dGhpcy5hcHAsIFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLCBcblx0XHRcdFx0XHRldmVudCwgKHRhZyk9Pntcblx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2codGFnKVxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFnRWRpdG9yLmFkZChcblx0XHRcdCAgICAgICAgXHRcdCcjJyArIHRhZywgXG5cdFx0XHQgICAgICAgIFx0XHRwYWdlWCwgXG5cdFx0XHQgICAgICAgIFx0XHRwYWdlWS8vLFxuXHRcdFx0ICAgICAgICBcdFx0Ly97cmFuZ2U6IHJhbmdlLCBlbDogZGVlcGVzdE5vZGV9XG5cdCAgICAgICAgXHRcdFx0KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVtb3ZlRWxlbWVudFdpdGhBbmltYXRpb24oIFxuXHRcdGVsOiBIVE1MRWxlbWVudCwgXG5cdFx0Y2FsbGJhY2s6IChlOiBFdmVudCkgPT4gdm9pZCwgXG5cdCk6dm9pZCB7XG5cblx0ICAvLyBHZXQgdGhlIGFjdHVhbCBoZWlnaHQgb2YgdGhlIGVsZW1lbnRcblx0ICBjb25zdCBoZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQ7XG5cblx0ICAvLyBTZXQgaGVpZ2h0IHRvIHRoZSBjdXJyZW50IHZhbHVlIGZvciBDU1MgdHJhbnNpdGlvblxuXHQgIGVsLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cblx0ICAvLyBBbGxvdyB0aGUgYnJvd3NlciB0byB1cGRhdGUsIHRoZW4gc2V0IHRvIDAgdG8gdHJpZ2dlciB0aGUgdHJhbnNpdGlvblxuXHQgIC8vc2V0VGltZW91dCgoKSA9PiB7IGVsLnN0eWxlLmhlaWdodCA9ICcwcHgnOyB9LCAwKTtcblx0ICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgIGVsLnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgZWwuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICBcdH0sIDApO1xuXHQgIFxuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG5cdCAgXHQndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uIG9uRW5kKCkge1xuICAgIFx0XHRlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25FbmQpO1xuICAgIFx0XHRjYWxsYmFjaygpO1xuXHQgICAgXHQvL3NldFRpbWVvdXQoKCkgPT4geyBlbC5yZW1vdmUoKTsgfSwgMTApOyAvLyByZW1vdmUgaW4gdGhlIGNhbGxiYWNrXG5cdCAgfSk7XG5cdH1cblxuXHRcblxufSIsICJpbXBvcnQgeyBURmlsZSwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYWdFbGVtZW50KFxuICAgIHBhcmFncmFwaEVsOiBIVE1MRWxlbWVudCwgXG4gICAgdGFnVGV4dDogc3RyaW5nXG4pOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWxzID0gcGFyYWdyYXBoRWwucXVlcnlTZWxlY3RvckFsbCgnLnRhZycpOyBcbiAgICBsZXQgdGFnRWxUZXh0ID0gJyc7XG4gICAgbGV0IHRhZ0VsSGFzU3ViOmJvb2xlYW47XG4gICAgZm9yIChsZXQgZWwgb2YgZWxzKSB7XG4gICAgICAgIHRhZ0VsVGV4dCA9IGVsLmlubmVyVGV4dC50cmltKCk7XG4gICAgICAgIGlmICh0YWdFbFRleHQgPT09IHRhZ1RleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbFxuICAgICAgICB9XG4gICAgfSAgICBcbiAgICAvL2NvbnNvbGUud2FybihgRWxlbWVudCB3aXRoIHRleHQgXCIke3RhZ1RleHR9XCIgbm90IGZvdW5kYCk7XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF0Zm9ybVNldHRpbmdDaGVjayAoYXBwOiBBcHAsIHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSA9PSAnYWx3YXlzJyB8fCAodmFsdWUgPT0gJ2Rlc2t0b3AnICYmICFhcHAuaXNNb2JpbGUpIHx8ICh2YWx1ZSA9PSAnbW9iaWxlJyAmJiBhcHAuaXNNb2JpbGUpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGxhdGZvcm1TZXR0aW5nQ2hlY2tNdWx0aXBsZSAoYXBwOiBBcHAsIHZhbHVlczogQXJyYXkgW10pIHtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHBsYXRmb3JtU2V0dGluZ0NoZWNrKGFwcCwgdmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNXb3JkTmVhckVuZChcbiAgICBzdHI6IHN0cmluZywgXG4gICAgd29yZDogc3RyaW5nLCBcbiAgICBjaGFyRGlzdGFuY2U6IG51bWJlciA9IDBcbik6IGJvb2xlYW4ge1xuICAgIC8vIEZpbmQgdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiB0aGUgd29yZFxuICAgIGNvbnN0IGxhc3RJbmRleCA9IHN0ci5sYXN0SW5kZXhPZih3b3JkKTtcblxuICAgIC8vIElmIHRoZSB3b3JkIGlzbid0IGZvdW5kLCByZXR1cm4gZmFsc2VcbiAgICBpZiAobGFzdEluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiB3aGVyZSB0aGUgd29yZCBlbmRzXG4gICAgY29uc3Qgd29yZEVuZEluZGV4ID0gbGFzdEluZGV4ICsgd29yZC5sZW5ndGg7XG5cbiAgICAvLyBDaGVjayB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgd29yZCdzIGVuZCB0byB0aGUgc3RyaW5nJ3MgZW5kXG4gICAgY29uc3QgZGlzdGFuY2VUb0VuZCA9IHN0ci5sZW5ndGggLSB3b3JkRW5kSW5kZXg7XG5cbiAgICAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgd29yZCBpcyB0aGUgbGFzdCB3b3JkIG9yIGlmIHRoZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gY2hhckRpc3RhbmNlXG4gICAgcmV0dXJuIGRpc3RhbmNlVG9FbmQgPT09IDAgfHwgZGlzdGFuY2VUb0VuZCA8PSBjaGFyRGlzdGFuY2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXb3JkT2JqRnJvbVN0cmluZyhcbiAgICBzb3VyY2VUZXh0OiBzdHJpbmcsIFxuICAgIG9mZnNldDogbnVtYmVyXG4pOk9iamVjdCB7XG4gICAgXG4gICAgbGV0IHdvcmRSZWdleCA9IC9bXlxcc10rKD89Wy4sOiE/XT8oXFxzfCQpKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgaW5kZXg7XG4gICAgbGV0IHdvcmQgPSBudWxsO1xuICAgIHdoaWxlICgobWF0Y2ggPSB3b3JkUmVnZXguZXhlYyhzb3VyY2VUZXh0KSkgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKG1hdGNoLmluZGV4IDw9IG9mZnNldCAmJiBvZmZzZXQgPD0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICB3b3JkID0gbWF0Y2hbMF07XG4gICAgICAgICAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogd29yZCwgXG4gICAgICAgIGluZGV4OiBpbmRleFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGlja2VkVGV4dE9iakZyb21Eb2MoXG4gICAgeCwgXG4gICAgeSwgXG4gICAgbWluTm9kZUxlbmd0aDogc3RyaW5nPTEwXG4pOnN0cmluZyB7XG4gICAgXG4gICAgLy8gR2V0IHRoZSB3b3JkIHVuZGVyIHRoZSBjbGljayBwb3NpdGlvblxuICAgIGxldCByYW5nZSwgbm9kZVRleHQsIG9mZnNldDtcblxuICAgIGlmIChkb2N1bWVudC5jYXJldFJhbmdlRnJvbVBvaW50KSB7XG4gICAgICAgIHJhbmdlID0gZG9jdW1lbnQuY2FyZXRSYW5nZUZyb21Qb2ludCh4LCB5KTtcbi8vY29uc29sZS5sb2coeCwgeSwgcmFuZ2UpXG4gICAgICAgIGlmIChyYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgICAgIG5vZGVUZXh0ID0gcmFuZ2Uuc3RhcnRDb250YWluZXIubm9kZVZhbHVlLnRyaW0oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IHJhbmdlLnN0YXJ0T2Zmc2V0O1xuICAgIH1cblxuICAgIGlmIChub2RlVGV4dC5sZW5ndGggPCBtaW5Ob2RlTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi8vY29uc29sZS5sb2cobm9kZVRleHQsIG9mZnNldCwgcmFuZ2Uuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZSlcbiAgICByZXR1cm4ge1xuICAgICAgICB0ZXh0OiBub2RlVGV4dCwgXG4gICAgICAgIGluZGV4OiBvZmZzZXQsIFxuICAgICAgICBlbDogcmFuZ2Uuc3RhcnRDb250YWluZXIucGFyZW50Tm9kZVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrZG93bkhlYWRpbmdzKFxuICAgIGJvZHlMaW5lczogc3RyaW5nW10sXG4gICAgaGVhZGluZ0ZpbHRlcjogc3RyaW5nID0gJydcbik6IEhlYWRpbmdbXSB7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyczogSGVhZGluZ1tdID0gW107XG4gICAgbGV0IGFjY3VtdWxhdGVkSW5kZXggPSAwO1xuXG4gICAgYm9keUxpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvXigjKylbXFxzXT8oLiopJC8pO1xuXG4gICAgICAgIGlmIChtYXRjaCAmJiBcbiAgICAgICAgICAgIChoZWFkaW5nRmlsdGVyID09ICcnIHx8IG1hdGNoWzJdID09IGhlYWRpbmdGaWx0ZXIpKSB7XG4gICAgICAgICAgICBoZWFkZXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGZ1bGxUZXh0OiBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICBsZXZlbDogbWF0Y2hbMV0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHRleHQ6IG1hdGNoWzJdLFxuICAgICAgICAgICAgICAgIGxpbmU6IGluZGV4LFxuICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXg6IGFjY3VtdWxhdGVkSW5kZXgsXG4gICAgICAgICAgICAgICAgZW5kSW5kZXg6IChhY2N1bXVsYXRlZEluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGFjY3VtdWxhdGVkSW5kZXggKz0gbGluZS5sZW5ndGggKyAxO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhlYWRlcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlQ29udGFpbnNIZWFkaW5nKFxuICAgIGZpbGVDb250ZW50OiBzdHJpbmcsXG4gICAgaGVhZGluZzogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgICBjb25zdCBmaWxlQ29udGVudExpbmVzOiBzdHJpbmdbXSA9IGdldExpbmVzSW5TdHJpbmcoZmlsZUNvbnRlbnQpO1xuICAgIGNvbnN0IG1kSGVhZGluZ3MgPSBnZXRNYXJrZG93bkhlYWRpbmdzKGZpbGVDb250ZW50TGluZXMsIGhlYWRpbmcpO1xuICAgIHJldHVybiAobWRIZWFkaW5ncy5sZW5ndGggPiAwKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0TGluZUFmdGVyRnJvbnRNYXR0ZXIobWFya2Rvd246IFN0cmluZyk6IE51bWJlciB7XG4gICAgLy8gU3BsaXQgdGhlIG1hcmtkb3duIHN0cmluZyBpbnRvIGxpbmVzLlxuICAgIGNvbnN0IGxpbmVzID0gZ2V0TGluZXNJblN0cmluZyhtYXJrZG93bik7IC8vbWFya2Rvd24uc3BsaXQoJ1xcbicpO1xuXG4gICAgbGV0IGluRnJvbnRNYXR0ZXIgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgbGluZSBpcyBhIGZyb250IG1hdHRlciBkZWxpbWl0ZXIuXG4gICAgICAgIGlmIChsaW5lID09PSAnLS0tJykge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIHRoZSBzdGFydCBvZiB0aGUgZnJvbnQgbWF0dGVyLCBzZXQgdGhlIGZsYWcuXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IGluIHRoZSBmcm9udCBtYXR0ZXIsIHRoaXMgbWFya3MgaXRzIGVuZC5cbiAgICAgICAgICAgIGluRnJvbnRNYXR0ZXIgPSAhaW5Gcm9udE1hdHRlcjtcblxuICAgICAgICAgICAgLy8gSWYgd2UganVzdCBlbmRlZCB0aGUgZnJvbnQgbWF0dGVyLCByZXR1cm4gdGhlIG5leHQgbGluZSdzIG51bWJlci5cbiAgICAgICAgICAgIGlmICghaW5Gcm9udE1hdHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBpIC8vKyAyOyAvLyArMiB0byBhZGp1c3QgZm9yIHplcm8tYmFzZWQgaW5kZXhpbmcgYW5kIHRvIGdldCB0aGUgbGluZSBhZnRlciB0aGUgY2xvc2luZyBkZWxpbWl0ZXIuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vIGZyb250IG1hdHRlciBvciB3ZSBkaWRuJ3QgZmluZCBhIGNsb3NpbmcgZGVsaW1pdGVyLCByZXR1cm4gMSAodGhlIGZpcnN0IGxpbmUpLlxuICAgIHJldHVybiAwO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lc0luU3RyaW5nKFxuICAgIGlucHV0OiBzdHJpbmdcbik6IEFycmF5IHtcbiAgICAvKmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0ZW1wU3RyaW5nID0gaW5wdXQ7XG5cbiAgICB3aGlsZSAodGVtcFN0cmluZy5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgICAgICBjb25zdCBsaW5lRW5kSW5kZXggPSB0ZW1wU3RyaW5nLmluZGV4T2YoXCJcXG5cIik7XG4gICAgICAgIGxpbmVzLnB1c2godGVtcFN0cmluZy5zbGljZSgwLCBsaW5lRW5kSW5kZXgpKTtcbiAgICAgICAgdGVtcFN0cmluZyA9IHRlbXBTdHJpbmcuc2xpY2UobGluZUVuZEluZGV4ICsgMSk7XG4gICAgfVxuICAgIGxpbmVzLnB1c2godGVtcFN0cmluZyk7XG5cbiAgICByZXR1cm4gbGluZXM7Ki9cblxuICAgIGNvbnN0IGxpbmVzID0gaW5wdXQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGxhc3QgbGluZSBpcyBlbXB0eSBhbmQgcmVtb3ZlIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICBpZiAobGluZXMubGVuZ3RoID4gMCAmJiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gJycpIHtcbiAgICAgICAgbGluZXMucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZUNockluZGV4KGNvbnRlbnQsIGxpbmVOdW1iZXIpIHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgaWYgKGxpbmVOdW1iZXIgPj0gbGluZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgbGV0IGNoYXJhY3RlckluZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lTnVtYmVyOyBpKyspIHtcbiAgICAvLyBBZGQgdGhlIGxlbmd0aCBvZiBlYWNoIGxpbmUgcGx1cyAxIGZvciB0aGUgJ1xcbicgY2hhcmFjdGVyIHRoYXQgd2FzIHJlbW92ZWQgYnkgc3BsaXRcbiAgICBjaGFyYWN0ZXJJbmRleCArPSBsaW5lc1tpXS5sZW5ndGggKyAxO1xuICB9XG5cbiAgcmV0dXJuIGNoYXJhY3RlckluZGV4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0VGV4dEFmdGVyTGluZShcbiAgICB0ZXh0OiBzdHJpbmcsIFxuICAgIGJvZHk6IHN0cmluZywgXG4gICAgbGluZTogbnVtYmVyLCBcbiAgICBmaWxlUGF0aFxuKTogc3RyaW5nIHtcbiAgICBcbiAgICBjb25zdCBzcGxpdENvbnRlbnQgPSBib2R5LnNwbGl0KFwiXFxuXCIpO1xuICAgIGNvbnN0IHByZSA9IHNwbGl0Q29udGVudC5zbGljZSgwLCBsaW5lICsgMSkuam9pbihcIlxcblwiKTtcbiAgICBjb25zdCBwb3N0ID0gc3BsaXRDb250ZW50LnNsaWNlKGxpbmUgKyAxKS5qb2luKFwiXFxuXCIpO1xuXG4gICAgcmV0dXJuIGAke3ByZX1cXG4ke3RleHR9XFxuJHtwb3N0fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0VHlwZUZyb21MaW5lTnVtYmVyKGZ1bGxUZXh0OiBzdHJpbmcsIGxpbmVOdW1iZXI6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZXMgPSBmdWxsVGV4dC5zcGxpdChcIlxcblwiKTtcbiAgICBpZiAobGluZU51bWJlciA+PSAwICYmIGxpbmVOdW1iZXIgPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2xpbmVOdW1iZXJdO1xuXG4gICAgICAgIGNvbnN0IGxlYWRpbmdXaGl0ZXNwYWNlID0gbGluZS5tYXRjaCgvXlxccyovKVswXTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgdW5jaGVja2VkIGNoZWNrYm94IGxpc3QgaXRlbXMgZmlyc3RcbiAgICAgICAgaWYgKC9eXFxzKi1cXHNcXFtcXHNcXF1cXHMvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJEZXRlY3RlZCBhbiB1bmNoZWNrZWQgY2hlY2tib3hcIik7XG4gICAgICAgICAgICByZXR1cm4gbGVhZGluZ1doaXRlc3BhY2UgKyBcIi0gWyBdIFwiO1xuICAgICAgICB9IFxuICAgICAgICAvLyBDaGVjayBmb3IgYSBcImNoZWNrZWRcIiBjaGVja2JveFxuICAgICAgICBlbHNlIGlmICgvXlxccyotXFxzXFxbeFxcXVxccy8udGVzdChsaW5lKSkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkRldGVjdGVkIGEgY2hlY2tlZCBjaGVja2JveCwgY29udmVydGluZyB0byB1bmNoZWNrZWRcIik7XG4gICAgICAgICAgICByZXR1cm4gbGVhZGluZ1doaXRlc3BhY2UgKyBcIi0gWyBdIFwiO1xuICAgICAgICB9IFxuICAgICAgICAvLyBUaGVuIGNoZWNrIGZvciBub3JtYWwgZGFzaCBsaXN0IGl0ZW1zXG4gICAgICAgIGVsc2UgaWYgKC9eXFxzKi1cXHMvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJEZXRlY3RlZCBhIG5vcm1hbCBidWxsZXRcIik7XG4gICAgICAgICAgICByZXR1cm4gbGVhZGluZ1doaXRlc3BhY2UgKyBcIi0gXCI7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIENoZWNrIGZvciBudW1iZXJlZCBsaXN0IGl0ZW1zXG4gICAgICAgIGVsc2UgaWYgKC9eXFxzKlxcZCtcXC5cXHMvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KGxpbmUubWF0Y2goL15cXHMqKFxcZCspXFwuLylbMV0sIDEwKTtcbiAgICAgICAgICAgIHJldHVybiBsZWFkaW5nV2hpdGVzcGFjZSArIGAke251bX0uIGA7XG4gICAgICAgICAgICAvL3JldHVybiBsZWFkaW5nV2hpdGVzcGFjZSArIGAke251bSArIDF9LiBgO1xuICAgICAgICB9IFxuICAgICAgICAvLyBDaGVjayBmb3IgYXJyb3cgaXRlbXNcbiAgICAgICAgZWxzZSBpZiAoL15cXHMqPlxccy8udGVzdChsaW5lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxlYWRpbmdXaGl0ZXNwYWNlICsgXCI+IFwiO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7IFxufVxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRhZ0Zyb21TdHJpbmcoXG4gICAgaW5wdXRUZXh0LCBcbiAgICBoYXNodGFnVG9SZW1vdmUsIFxuICAgIGFsbDpib29sZWFuPXRydWVcbik6IHN0cmluZyB7ICBcbiAgICBcbiAgICAvL2NvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChcIlxcXFxzP1wiICsgaGFzaHRhZ1RvUmVtb3ZlICsgXCJcXFxcYlwiLCBhbGw/XCJnaVwiOlwiaVwiKTtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAgIFwiXFxcXHM/XCIgKyBcbiAgICAgICAgaGFzaHRhZ1RvUmVtb3ZlLnJlcGxhY2UoLyMvZywgJ1xcXFwjJykgKyBcbiAgICAgICAgXCIoPyFcXFxcd3xcXFxcLylcIiwgXG4gICAgICAgIGFsbD9cImdpXCI6XCJpXCJcbiAgICApO1xuXG4gICAgcmV0dXJuIGlucHV0VGV4dC5yZXBsYWNlKHJlZ2V4LCAnJykudHJpbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0VGV4dEluU3RyaW5nIChcbiAgICBuZXdUZXh0OiBzdHJpbmcsIFxuICAgIHNvdXJjZVRleHQ6IHN0cmluZywgXG4gICAgY2hhclBvczogbnVtYmVyXG4pOnN0cmluZyB7IC8vIHBhc3MgMCBmb3IgdGhlIHN0YXJ0IG9yIHNvdXJjZVRleHQubGVuZ3RoLTEgZm9yIHRoZSBlbmRcbiAgICAvL2NvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG5ld1RleHQpKTtcbiAgICByZXR1cm4gKHNvdXJjZVRleHQuc3Vic3RyaW5nKDAsIGNoYXJQb3MpICsgbmV3VGV4dCArICcgJyArIHNvdXJjZVRleHQuc3Vic3RyaW5nKGNoYXJQb3MpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRleHRGcm9tU3RyaW5nIChcbiAgICByZW1vdmVUZXh0OiBzdHJpbmcsIFxuICAgIHNvdXJjZVRleHQ6IHN0cmluZywgXG4gICAgYWxsOmJvb2xlYW49ZmFsc2Vcbik6c3RyaW5nIHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAodGhpcy5lc2NhcGVSZWdFeHAocmVtb3ZlVGV4dCksIGFsbCA/IFwiZ2lcIiA6IFwiaVwiKTtcbiAgICByZXR1cm4gc291cmNlVGV4dC5yZXBsYWNlKHJlZ2V4LCAnJykudHJpbSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZVRleHRJblN0cmluZyAoXG4gICAgcmVwbGFjZVRleHQ6IHN0cmluZywgXG4gICAgc291cmNlVGV4dDogc3RyaW5nLCBcbiAgICBuZXdUZXh0OiBzdHJpbmcsIFxuICAgIGFsbDogYm9vbGVhbiA9IGZhbHNlXG4pOnN0cmluZyB7XG4vKmNvbnNvbGUubG9nKCdSRVBMQUNFIFRFWFQnKTtcbmNvbnNvbGUubG9nKCc+PicrZXNjYXBlUmVnRXhwKHJlcGxhY2VUZXh0LnRyaW0oKSkrJzw8Jyk7XG5jb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XG5jb25zb2xlLmxvZygnU09VUkNFIFRFWFQnKTtcbmNvbnNvbGUubG9nKCc+Picrc291cmNlVGV4dCsnPDwnKVxuY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xuY29uc29sZS5sb2coJ05FVyBURVhUJyk7XG5jb25zb2xlLmxvZygnPj4nK25ld1RleHQrJzw8JykqL1xuLy9jb25zb2xlLmxvZyhlc2NhcGVSZWdFeHAocmVwbGFjZVRleHQudHJpbSgpKSlcbiAgICAgICAgY29uc3QgZXNjYXBlZFJlcGxhY2VUZXh0ID0gZXNjYXBlUmVnRXhwKHJlcGxhY2VUZXh0LnRyaW0oKSkucmVwbGFjZSgvXFxuL2csICdcXFxccypcXFxcblxcXFxzKicpO1xuICAgICAgICAvL2NvbnN0IGVzY2FwZWRSZXBsYWNlVGV4dCA9IGVzY2FwZVJlZ0V4cChyZXBsYWNlVGV4dCkucmVwbGFjZSgvXFxuL2csICdcXFxccypcXFxcblxcXFxzKicpO1xuXG4gICAgICAgIC8vY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cChyZXBsYWNlVGV4dC50cmltKCkpLCBhbGwgPyBcImdpXCIgOiBcImlcIik7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChlc2NhcGVkUmVwbGFjZVRleHQsIGFsbCA/IFwiZ3NpXCIgOiBcInNpXCIpO1xuXG4gICAgICAgIHJldHVybiBzb3VyY2VUZXh0LnRyaW0oKS5yZXBsYWNlKHJlZ2V4LCBuZXdUZXh0LnRyaW0oKSkudHJpbSgpO1xuICAgICAgICAvL3JldHVybiBzb3VyY2VUZXh0LnJlcGxhY2UocmVnZXgsIG5ld1RleHQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJ1bmNhdGVTdHJpbmdBdFdvcmQoXG4gICAgc3RyOiBzdHJpbmcsIFxuICAgIG1heENoYXJzOm51bWJlcj0xNlxuKTpzdHJpbmcge1xuXG4gICAgaWYgKHN0ci5sZW5ndGggPD0gbWF4Q2hhcnMpIHJldHVybiBzdHI7XG4gICAgbGV0IHRydW5jYXRlZCA9IHN0ci5zdWJzdHIoMCwgbWF4Q2hhcnMpOyAgXG4gICAgY29uc3QgbGFzdFNwYWNlID0gdHJ1bmNhdGVkLmxhc3RJbmRleE9mKCcgJyk7IFxuICAgIGlmIChsYXN0U3BhY2UgPiAwKSB0cnVuY2F0ZWQgPSB0cnVuY2F0ZWQuc3Vic3RyKDAsIGxhc3RTcGFjZSk7XG5cbiAgICByZXR1cm4gdHJ1bmNhdGVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250ZW50Q2hhbmdlZFRvb011Y2goXG4gICAgb3JpZ2luYWw6IHN0cmluZywgXG4gICAgbW9kaWZpZWQ6IHN0cmluZywgXG4gICAgdGFnOiBzdHJpbmcsIFxuICAgIGJ1ZmZlciA9IDVcbik6IGJvb2xlYW4ge1xuICBjb25zdCBleHBlY3RlZENoYW5nZSA9IHRhZy5sZW5ndGg7IC8vIGluY2x1ZGluZyB0aGUgJyMnIHN5bWJvbFxuICBjb25zdCB0aHJlc2hvbGQgPSBleHBlY3RlZENoYW5nZSArIGJ1ZmZlcjsgLy8gYWxsb3cgZm9yIHNvbWUgbWlub3IgdW5pbnRlbmRlZCBtb2RpZmljYXRpb25zXG4gIGNvbnN0IGFjdHVhbENoYW5nZSA9IE1hdGguYWJzKG9yaWdpbmFsLmxlbmd0aCAtIG1vZGlmaWVkLmxlbmd0aCk7XG5cbiAgcmV0dXJuIGFjdHVhbENoYW5nZSA+IHRocmVzaG9sZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGVPYmpGcm9tVGFncyhcbiAgICB0YWdzOiBBcnJheVxuKTogT2JqZWN0IHtcblxuICAgIC8vIFJlbW92ZSBoYXNoZXMgYW5kIHNwbGl0IHRhZ3MgaW50byBhbiBhcnJheVxuICAgIGxldCB0YWdzQXJyYXkgPSB0YWdzLm1hcCh0YWcgPT4gdGFnLnJlcGxhY2UoLyMvZywgJycpLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgLy8gRmlsdGVyIG91dCBkdXBsaWNhdGVzXG4gICAgdGFnc0FycmF5ID0gdGFnc0FycmF5LmZpbHRlcigodGFnLCBpbmRleCwgc2VsZikgPT4gc2VsZi5pbmRleE9mKHRhZykgPT09IGluZGV4KTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgZmlsZSBuYW1lXG4gICAgY29uc3QgdGFnc1BhcnQgPSB0YWdzQXJyYXkuam9pbignKycpO1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkYXRlUGFydCA9IGN1cnJlbnREYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAvLyctJyArXG4gICAgICAgICAgICAgICAgICAgICAoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArIC8vJy0nICtcbiAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKS5zbGljZSgtMik7XG4gICAgY29uc3QgdGltZVBhcnQgPSAvL2N1cnJlbnREYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgIC8vY3VycmVudERhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICctJyArXG4gICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIC8vY29uc3QgZmlsZU5hbWUgPSBgVGFnIFN1bW1hcnkgKCR7dGFnc1BhcnR9KSAoJHtkYXRlUGFydH0pLm1kYDtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGltZVBhcnQpXG4gICAgY29uc3QgZmlsZU5hbWUgPSBgVGFnIFN1bW1hcnkgKCR7ZGF0ZVBhcnR9ICR7dGltZVBhcnR9KS5tZGA7XG5cbiAgICAvLyBDb25zdHJ1Y3QgdGhlIHRpdGxlXG4gICAgY29uc3QgdGl0bGVUYWdzUGFydCA9IHRhZ3NBcnJheS5tYXAodGFnID0+IHRhZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRhZy5zbGljZSgxKSkuam9pbignICsgJyk7XG4gICAgY29uc3QgdGl0bGUgPSBgJHt0aXRsZVRhZ3NQYXJ0fSBUYWcgU3VtbWFyeWA7XG5cbiAgICAvLyBSZXR1cm4gdGhlIG9iamVjdCB3aXRoIGZpbGVOYW1lIGFuZCB0aXRsZSBwcm9wZXJ0aWVzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZU5hbWU6IGZpbGVOYW1lLFxuICAgICAgICB0aXRsZTogdGl0bGVcbiAgICB9O1xufVxuXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlRmlsZUZvbGRlcihcbiAgICBhY3RpdmVGaWxlOiBURmlsZVxuKTogc3RyaW5nIHtcbiAgICBcbiAgICAvL2NvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYudmlldy5maWxlO1xuICAgIC8vY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm9sZGVyUGF0aFxuICAgIGlmIChhY3RpdmVGaWxlLnBhdGguaW5jbHVkZXMoJ1xcXFwnKSB8fCBhY3RpdmVGaWxlLnBhdGguaW5jbHVkZXMoJy8nKSkge1xuXG4gICAgICAgIC8vIERldGVybWluZSB0aGUgY29ycmVjdCBwYXRoIHNlcGFyYXRvclxuICAgICAgICBjb25zdCBwYXRoU2VwYXJhdG9yID0gYWN0aXZlRmlsZS5wYXRoLmluY2x1ZGVzKCdcXFxcJykgPyAnXFxcXCcgOiAnLyc7XG5cbiAgICAgICAgY29uc3QgcGF0aFBhcnRzID0gYWN0aXZlRmlsZS5wYXRoLnNwbGl0KHBhdGhTZXBhcmF0b3IpO1xuICAgICAgICBwYXRoUGFydHMucG9wKCk7ICAvLyBSZW1vdmUgdGhlIGZpbGUgbmFtZSBwYXJ0XG4gICAgICAgIGZvbGRlclBhdGggPSBwYXRoUGFydHMuam9pbihwYXRoU2VwYXJhdG9yKTtcblxuICAgICAgICAvLyBFbnN1cmUgdGhlIGZvbGRlciBwYXRoIGVuZHMgd2l0aCB0aGUgY29ycmVjdCBwYXRoIHNlcGFyYXRvclxuICAgICAgICBpZiAoIWZvbGRlclBhdGguZW5kc1dpdGgocGF0aFNlcGFyYXRvcikpIHtcbiAgICAgICAgICAgIGZvbGRlclBhdGggKz0gcGF0aFNlcGFyYXRvcjtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvbGRlclBhdGggPSAnJ1xuICAgIH1cblxuICAgIHJldHVybiBmb2xkZXJQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFnc0Zyb21BcHAoXG4gICAgYXBwOiBBcHAsXG4gICAgcmVjZW50VGFnczogQXJyYXlcbik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0YWdzT2JqZWN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0VGFncygpO1xuXG4gICAgLy8gQ29udmVydCB0YWdzT2JqZWN0IHRvIGFuIGFycmF5IG9mIFt0YWcsIGNvdW50XSB0dXBsZXNcbiAgICBjb25zdCB0YWdzQXJyYXkgPSBPYmplY3QuZW50cmllcyh0YWdzT2JqZWN0KTtcblxuICAgIC8vIFNvcnQgYnkgdXNlIGNvdW50XG4gICAgdGFnc0FycmF5LnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTtcblxuICAgIC8vY29uc3QgcmVjZW50VGFncyA9IHRoaXMuZ2V0UmVjZW50VGFncygpO1xuICAgIC8vY29uc3QgcmVjZW50VGFncyA9IHBsdWdpbi5nZXRSZWNlbnRUYWdzKCk7XG4gICAgLy9jb25zb2xlLmxvZygncmVjZW50IHRhZyBsZW5ndGg6ICcgKyByZWNlbnRUYWdzLmxlbmd0aClcblxuICAgIGlmIChyZWNlbnRUYWdzLmxlbmd0aD4wKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVjZW50VGFncylcbiAgICAgICAgLy8gY29udmVydCB0aGVtIHRvIFt0YWcsIGNvdW50XSB0dXBsZXMgZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgIGNvbnN0IHJlY2VudFRhZ3NBc1R1cGxlcyA9IHJlY2VudFRhZ3MubWFwKHRhZyA9PiBbdGFnLCAwXSk7XG4gICAgICAgIC8vIENvbmNhdGVuYXRlIHRoZSB0d28gYXJyYXlzXG4gICAgICAgIGNvbnN0IHJlY2VudEFuZEFsbFRhZ3MgPSByZWNlbnRUYWdzQXNUdXBsZXMuY29uY2F0KHRhZ3NBcnJheSk7XG4gICAgICAgIC8vIEV4dHJhY3QgdGFnIG5hbWVzIGFmdGVyIHJlbW92aW5nIHRoZSAjXG4gICAgICAgIHJldHVybiByZWNlbnRBbmRBbGxUYWdzLm1hcCgoW3RhZywgX10pID0+IHRhZy5yZXBsYWNlKC9eIy8sIFwiXCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGFnc0FycmF5Lm1hcCgoW3RhZywgX10pID0+IHRhZy5yZXBsYWNlKC9eIy8sIFwiXCIpKTtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVQYXRoIChcbiAgICBmaWxlUGF0aDogc3RyaW5nXG4pOiBURmlsZSB7XG4gICAgY29uc3QgbWF0Y2hpbmdGaWxlcyA9IGF3YWl0IGFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUubmFtZSA9PT0gZmlsZVBhdGgpO1xuICAgIGlmIChtYXRjaGluZ0ZpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IG1hdGNoaW5nRmlsZXNbMF0ucGF0aDtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ1ZhbGlkYXRlIGZpbGU6ICcgKyBlbWJlZEZpbGUubmFtZSk7XG4gICAgICAgIHJldHVybiBmaWxlO1xuICAgIH0gZWxzZSBpZiAobWF0Y2hpbmdGaWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1RhZyBCdWRkeTogTXVsdGlwbGUgZmlsZXMgZm91bmQgd2l0aCB0aGUgc2FtZSBuYW1lLiBDYW5cXCd0IHNhZmVseSBlZGl0IHRhZy4nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnVGFnIEJ1ZGR5OiBObyBmaWxlIGZvdW5kLiBUcnkgYWdhaW4sIG9yIHRoaXMgdGFnIG1pZ2h0IGJlIGluIGFuIHVuc3VwcG9ydGVkIGVtYmVkIHR5cGUuJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN0cmxDbWRLZXkgKFxuICAgIGV2ZW50OiBFdmVudFxuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaXNNYWMgPSBQbGF0Zm9ybS5pc01hY09TIC8vIChuYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKS5pbmRleE9mKCdNQUMnKSA+PSAwKTtcblxuICAgIGlmIChpc01hYykgcmV0dXJuIGV2ZW50Lm1ldGFLZXk7XG4gICAgZWxzZSByZXR1cm4gZXZlbnQuY3RybEtleTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhZ3NJblN0cmluZyhcbiAgICBzdHJpbmc6IHN0cmluZywgXG4gICAgdGFnPzogc3RyaW5nXG4pOiBzdHJpbmdbXSB7XG4gICAgbGV0IHJlZ2V4O1xuICAgIGlmICh0YWcpIHtcbiAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKHRhZy5yZXBsYWNlKC9cXC8vZywgJ1xcXFwvJykgKyBcIig/IVtcXFxcd1xcXFwvXFxcXCNdKVwiLCBcImdcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTWF0Y2ggYW55IHRhZy1saWtlIHBhdHRlcm4gc3RhcnRpbmcgd2l0aCAnIydcbiAgICAgICAgcmVnZXggPSAvIyhcXHcrKSg/IVtcXHdcXC8jXSkvZztcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlcyA9IHN0cmluZy5tYXRjaChyZWdleCk7XG5cbiAgICByZXR1cm4gbWF0Y2hlcyB8fCBbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50T2NjdXJyZW5jZXMoXG4gICAgc3VtbWFyeVRhZ3M6IEFycmF5LCBcbiAgICBjb250ZW50VGFnc1xuKTogbnVtYmVyIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGZvciAobGV0IHRhZyBvZiBzdW1tYXJ5VGFncykge1xuICAgICAgICBjb3VudCArPSBjb250ZW50VGFncy5maWx0ZXIoaXRlbSA9PiBpdGVtID09PSB0YWcpLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gY291bnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhUTUxUb0VsZW1lbnQob3V0ZXJIVE1MOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRlbXBEaXYuaW5uZXJIVE1MID0gb3V0ZXJIVE1MO1xuICByZXR1cm4gdGVtcERpdi5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnRXhwKFxuICAgIHN0cmluZzogc3RyaW5nXG4pOnN0cmluZyB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpOyAvLyAkJiBtZWFucyB0aGUgd2hvbGUgbWF0Y2hlZCBzdHJpbmdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYmVkRmlsZSAoXG4gICAgZWw6IEhUTUxFbGVtZW50XG4pOlRGaWxlIHtcbiAgICBsZXQgZmlsZVBhdGggPSBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICAgIGNvbnN0IGxpbmtBcnJheSA9IGZpbGVQYXRoLnNwbGl0KCcjJyk7XG4gICAgZmlsZVBhdGggPSBsaW5rQXJyYXlbMF0udHJpbSgpICsgJy5tZCc7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHZhbGlkYXRlRmlsZVBhdGgoZmlsZVBhdGgpO1xuICAgIHJldHVybiBmaWxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUYWdWYWxpZCAoXG4gICAgdGFnOiBTdHJpbmcsXG4gICAgZnVsbFRhZzogQm9vbGVhbiA9IGZhbHNlXG4pOmJvb2xlYW4geyBcbiAgICBsZXQgdGFnUGF0dGVybiBcbiAgICBpZiAoZnVsbFRhZykgdGFnUGF0dGVybiA9IC9eI1thLXpBLVowLTlfXFwtXFwvXSpbYS16QS1aX1xcLVxcL11bYS16QS1aMC05X1xcLVxcL10qJC87XG4gICAgLy9lbHNlIHRhZ1BhdHRlcm4gPSAvKD89W15cXGRcXHNdKylbYS16QS1aMC05X1xcLVxcL10rL2dcbiAgICBlbHNlIHRhZ1BhdHRlcm4gPSAvXlthLXpBLVowLTlfXFwtXFwvXSpbYS16QS1aX1xcLVxcL11bYS16QS1aMC05X1xcLVxcL10qJC87XG4gICAgcmV0dXJuIHRhZ1BhdHRlcm4udGVzdCh0YWcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFZhbGlkVGFncyh0YWdzU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgLy8gU3BsaXQgdGhlIHN0cmluZyBieSBjb21tYXMgdG8gZ2V0IGluZGl2aWR1YWwgdGFnc1xuICAgIGNvbnN0IHBvdGVudGlhbFRhZ3MgPSB0YWdzU3RyaW5nLnNwbGl0KCcsJyk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IHZhbGlkIHRhZ3NcbiAgICBjb25zdCB2YWxpZFRhZ3MgPSBwb3RlbnRpYWxUYWdzXG4gICAgICAgIC5tYXAodGFnID0+IHRhZy50cmltKCkpIC8vIFRyaW0gZWFjaCB0YWdcbiAgICAgICAgLmZpbHRlcih0YWcgPT4gaXNUYWdWYWxpZCh0YWcsIHRydWUpKTsgLy8gVXNlIHRoZSBpc1RhZ1ZhbGlkIGZ1bmN0aW9uIHRvIGNoZWNrIHZhbGlkaXR5XG5cbiAgICByZXR1cm4gdmFsaWRUYWdzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3RybENtZFN0ciAoKTogc3RyaW5nIHtcbiAgICBjb25zdCBpc01hYyA9IFBsYXRmb3JtLmlzTWFjT1MgLy8obmF2aWdhdG9yLnBsYXRmb3JtLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignTUFDJykgPj0gMCk7XG4gICAgaWYgKGlzTWFjKSByZXR1cm4gJ0NNRCc7XG4gICAgZWxzZSByZXR1cm4gJ0NUUkwnO1xufVxuIiwgImltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIFN1Z2dlc3RNb2RhbCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUsIHJlbmRlclJlc3VsdHMsIHByZXBhcmVGdXp6eVNlYXJjaCwgRnV6enlNYXRjaCwgZnV6enlTZWFyY2gsIHByZXBhcmVRdWVyeSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFRhZ0J1ZGR5IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL3V0aWxzJztcblxuXG5leHBvcnQgY2xhc3MgVGFnU2VsZWN0b3IgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcbiAgICBwbHVnaW46IFRhZ0J1ZGR5XG4gICAgYXBwOiBBcHA7XG4gICAgb25DaG9vc2VJdGVtQ2FsbGJhY2s6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZFxuICAgIHRhZzogc3RyaW5nXG4gICAgaW5wdXRMaXN0ZW5lcjogRXZlbnRMaXN0ZW5lclxuICAgIHRhZ0NhY2hlOiBzdHJpbmdbXVxuICAgIGxvY2F0aW9uOiBPYmplY3Q7XG4gICAgaGVpZ2h0ID0gMjE1O1xuICAgIG5vU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IgKGFwcDogQXBwLCBwbHVnaW46IFRhZ0J1ZGR5LCBldmVudDpFdmVudCwgb25DaG9vc2VJdGVtQ2FsbGJhY2s6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCl7XG4gICAgICAgIHN1cGVyKGFwcClcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgICAgIHRoaXMudGFnID0gJydcbiAgICAgICAgdGhpcy5vbkNob29zZUl0ZW1DYWxsYmFjayA9IG9uQ2hvb3NlSXRlbUNhbGxiYWNrXG4gICAgICAgIHRoaXMuaW5wdXRMaXN0ZW5lciA9IHRoaXMubGlzdGVuSW5wdXQuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLnRhZ0NhY2hlID0gW11cbiAgICAgICAgaWYgKGV2ZW50ICE9IG51bGwpIHRoaXMubG9jYXRpb24gPSB7eDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZfVxuICAgICAgICAvL3RoaXMubGltaXQgPSAxMFxuICAgICAgICAvL3RoaXMuZW1wdHlTdGF0ZVRleHQgPSAnQWRkIG5ldyB0YWcnXG4gICAgICAgIC8vIHRvIGFkZCBhIGJyYW5kIG5ldyB0YWcgd2UnZCBlaXRoZXIgbmVlZCB0bzpcbiAgICAgICAgLy8gLSBTSElGVCBhbHJlYWR5IHdvcmtzLiBidXQgZm9yIG1vYmlsZT9cbiAgICAgICAgLy8gLSBoYXZlIGFub3RoZXIgYnV0dG9uIG9uIGZhciByaWdodCBvbiBpbnB1dCB0byBhZGQgKGZvciBtb2JpbGUpXG4gICAgICAgIC8vIHRoaXMgc2VsZWN0b3IgaXMgYWxzbyB3aGVyZSB3ZSBjYW4gYWRkIGFuIGVkaXQgaWNvbiBuZXh0IHRvIGVhY2ggdGFnLiBcbiAgICAgICAgLy8gY2xpY2tpbmcgdGhpcyB3b3VsZCBicmluZyB1cCB0aGUgZWRpdCBtb2RhbFxuICAgICAgIFxuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihcIlwiKVxuICAgICAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmlucHV0TGlzdGVuZXIpXG4gICAgICAgIGlmICghdGhpcy5hcHAuaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0Q29udGFpbmVyRWwucGFyZW50Tm9kZS5zdHlsZS53aWR0aCA9ICcyMDBweCc7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdENvbnRhaW5lckVsLnN0eWxlLmhlaWdodCA9ICcyMTVweCc7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdENvbnRhaW5lckVsLnBhcmVudE5vZGUuc3R5bGUubGVmdCA9IGAke3RoaXMubG9jYXRpb24ueH1weGA7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdENvbnRhaW5lckVsLnBhcmVudE5vZGUuc3R5bGUudG9wID0gYCR7dGhpcy5sb2NhdGlvbi55fXB4YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsgdGhpcy5pbnB1dEVsLmZvY3VzKCkgfSwgNTAwKTsgLy8gbm90IHdvcmtpbmc/XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIub25PcGVuKClcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmlucHV0TGlzdGVuZXIpXG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoKVxuICAgIH1cblxuICAgIGxpc3RlbklucHV0KGV2ZW50OiBLZXlib2FyZEV2ZW50KXtcbiAgICAgICAgdGhpcy5ub1NlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMuYXBwLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtc0hlaWdodCA9IHRoaXMuZ2V0U3VnZ2VzdGlvbnModGhpcy5pbnB1dEVsLnZhbHVlKS5sZW5ndGggKiA0MjtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKHRoaXMuaGVpZ2h0LCBNYXRoLm1heCg2NSwgaXRlbXNIZWlnaHQpKVxuICAgICAgICAgICAgdGhpcy5yZXN1bHRDb250YWluZXJFbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PSBcIkVudGVyXCIgJiYgIXRoaXMubm9TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IC8oPz1bXlxcZFxcc10rKVthLXpBLVowLTlfXFwtXFwvXSsvZ1xuICAgICAgICAgICAgaWYgKHBhdHRlcm4udGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hvb3NlSXRlbSh0aGlzLmlucHV0RWwudmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdJbnZhbGlkIHRhZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZykgOiBzdHJpbmdbXXtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRUYWdzID0gVXRpbHMuZ2V0VGFnc0Zyb21BcHAoXG4gICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5nZXRSZWNlbnRUYWdzKCkpLmZpbHRlcih0YWcgPT4gXG4gICAgICAgICAgICAvL3RhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICBxdWVyeSA9PSAnJyA/IHRydWUgOiB0YWcudG9Mb3dlckNhc2UoKSA9PSBxdWVyeS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZFRhZ3M7XG4gICAgfVxuXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihoZWFkZXI6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaGVhZGVyIH0pO1xuICAgIH0qL1xuXG4gICAgb25Ob1N1Z2dlc3Rpb24oKXtcbiAgICAgICAgc3VwZXIub25Ob1N1Z2dlc3Rpb24oKVxuICAgICAgICB0aGlzLm5vU2VsZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbm8gc3VnZ2VzdGlvbnMnKVxuICAgIH1cblxuICAgIGdldEl0ZW1zKCk6IHN0cmluZ1tdIHtcbiAgICAgICBjb25zdCBmaWx0ZXJlZFRhZ3MgPSBVdGlscy5nZXRUYWdzRnJvbUFwcChcbiAgICAgICAgICAgIHRoaXMuYXBwLCBcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmdldFJlY2VudFRhZ3MoKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkVGFncztcbiAgICB9XG5cbiAgICBnZXRJdGVtVGV4dCh0YWc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0YWdcbiAgICB9XG5cbiAgICBhc3luYyBvbkNob29zZUl0ZW0ocmVzdWx0OiBzdHJpbmcpIHtcbi8vY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICBpZiAoIXRoaXMuYXBwLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hvb3NlSXRlbUNhbGxiYWNrKHJlc3VsdClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9Pnt0aGlzLm9uQ2hvb3NlSXRlbUNhbGxiYWNrKHJlc3VsdCl9LCAyNTApXG4gICAgICAgIH1cbiAgICB9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFRGaWxlLCBTZXR0aW5nLCBTZWxlY3RGaWxlTW9kYWwsIERyb3Bkb3duQ29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsIFRleHRDb21wb25lbnQsIFByb2dyZXNzQmFyQ29tcG9uZW50fSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBUYWdCdWRkeSBmcm9tIFwibWFpblwiO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBUQlRhZ0VkaXRvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIC8vb3JpZ2luYWxUYWc6IFN0cmluZ3NcbiAgICBvcHRpb25zRGl2OiBIVE1MRWxlbWVudDtcbiAgICBlZGl0RGl2OiBIVE1MRWxlbWVudDtcbiAgICBpbnB1dDogVGV4dENvbXBvbmVudDtcbiAgICAvL3N1Ym1pdEJ0bjogQnV0dG9uQ29tcG9uZW50O1xuICAgIHRhZ0FjdGlvbkRyb3Bkb3duOiBEcm9wZG93bkNvbXBvbmVudDtcbiAgICBwbHVnaW46IFRhZ0J1ZGR5O1xuXG4gICAgc2V0dGluZ3MgPSB7XG4gICAgICAgIG9yaWdpbmFsVGFnOiAnJyxcbiAgICAgICAgb3JpZ2luYWxJbmRleDogbnVsbCxcbiAgICAgICAgdGFnRWw6IG51bGwsXG4gICAgICAgIGZpbGVQYXRoOiBudWxsLFxuICAgICAgICBiYXRjaEFjdGlvbjogJ2luc3RhbmNlJyxcbiAgICAgICAgbmV3TmFtZTogJycsXG4gICAgICAgIHN1bW1hcnlQb3M6ICd0b3AnLFxuICAgICAgICBhY3Rpb246ICdyZW5hbWUnXG4gICAgfTtcblxuICAgIC8vY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhZzogU3RyaW5nLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVGFnQnVkZHksIHRhZzogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBmaWxlUGF0aDogc3RyaW5nID0gbnVsbCwgdGFnRWw6IEhUTUxFbGVtZW50ID0gbnVsbCkge1xuICAgIC8vY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVGFnQnVkZHksIHRhZ0VsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbi8vY29uc29sZS5sb2codGFnRWwpXG4gICAgICAgIHRoaXMuc2V0dGluZ3MudGFnRWwgPSB0YWdFbDtcbiAgICAgICAgLy90aGlzLnNldHRpbmdzLm9yaWdpbmFsSW5kZXggPSBwYXJzZUludCAodGFnRWwuZ2V0QXR0cmlidXRlKCdtZC1pbmRleCcpKTtcbiAgICAgICAgLy90aGlzLnNldHRpbmdzLm9yaWdpbmFsVGFnID0gdGFnRWwuaW5uZXJUZXh0O1xuICAgICAgICAvL3RoaXMuc2V0dGluZ3MuYmF0Y2hBY3Rpb29uID0gdGFnRWwuZ2V0QXR0cmlidXRlKCdtZC1pbmRleCcpO1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsZVBhdGggPSBmaWxlUGF0aFxuICAgICAgICB0aGlzLnNldHRpbmdzLm9yaWdpbmFsVGFnID0gdGFnO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9yaWdpbmFsSW5kZXggPSBpbmRleDtcbiAgICAgICAgLy90aGlzLm9yaWdpbmFsVGFnID0gdGFnO1xuICAgICAgICAvL3RoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgICB9XG4gXG4gICAgb25PcGVuICgpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsLCB0aXRsZUVsICwgbW9kYWxFbCwgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cbiAgICAgICAgdGl0bGVFbC5zZXRUZXh0KFwiVGFnIEFjdGlvbnNcIilcblxuICAgICAgICB0aGlzLmVkaXREaXYgPSBjcmVhdGVFbCgnZGl2JylcbiAgICAgICAgdGhpcy5lZGl0RGl2LmNsYXNzTGlzdC5hZGQgKCd0YWctZWRpdG9yLWVkaXQtZGl2JylcblxuICAgICAgICB0aGlzLm9wdGlvbnNEaXYgPSBjcmVhdGVFbCAoJ2RpdicpO1xuICAgICAgICB0aGlzLm9wdGlvbnNEaXYuY2xhc3NMaXN0LmFkZCAoJ3RhZy1lZGl0b3Itb3B0aW9ucycpXG5cbiAgICAgICAgdGhpcy5pbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHRoaXMuZWRpdERpdik7XG4gICAgICAgIHRoaXMuaW5wdXQuaW5wdXRFbC5jbGFzc0xpc3QuYWRkICgndGFnLWVkaXRvci1pbnB1dCcpO1xuXG4gICAgICAgIHRoaXMudGFnQWN0aW9uRHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQodGhpcy5lZGl0RGl2KVxuICAgICAgICAuYWRkT3B0aW9uKCdyZW5hbWUnLCBcIlJlbmFtZVwiKSBcbiAgICAgICAgLmFkZE9wdGlvbignbG93ZXInLCBcIkNvbnZlcnQgdG8gbG93ZXIgY2FzZVwiKSBcbiAgICAgICAgLmFkZE9wdGlvbigndG90ZXh0JywgXCJSZW1vdmUgaGFzaCAoIylcIikgXG4gICAgICAgIC5hZGRPcHRpb24oJ3N1bW1hcnknLCBcIkNyZWF0ZSBzdW1tYXJ5XCIpOyBcbiAgICAgICAgdGhpcy50YWdBY3Rpb25Ecm9wZG93bi5zZWxlY3RFbC5jbGFzc0xpc3QuYWRkICgndGFnLWVkaXRvci1kcm9wZG93bicpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZCAodGhpcy5lZGl0RGl2KVxuICAgICAgICBjb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5vcHRpb25zRGl2KVxuXG4gICAgICAgIHRoaXMuc2hvd0VkaXRUYWdPcHRpb25zKCdyZW5hbWUnKTsgICBcbiAgICBcbiAgICAgICAgY29uc3QgaHIgPSBjcmVhdGVFbCAoJ2hyJylcbiAgICAgICAgaHIuY2xhc3NMaXN0LmFkZCAoJ3RhZy1lZGl0b3ItaHInKTsgXG4gICAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZCAoaHIpO1xuXG4gICAgICAgIHRoaXMudGFnQWN0aW9uRHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IFwic3VtbWFyeVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3VtbWFyeU9wdGlvbnMgKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vaWYgKGVkaXREaXYuY29udGFpbnMoc3VtbWFyeU9wdFNlbGVjdEVsKSkgZWRpdERpdi5yZW1vdmVDaGlsZChzdW1tYXJ5T3B0U2VsZWN0RWwpXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RWRpdFRhZ09wdGlvbnMgKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTsgXG5cbiAgICAgICAgY29uc3Qgc3VibWl0QnRuID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0Q2xhc3MgKCd0YWctZWRpdG9yLXN1Ym1pdCcpXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnU3VibWl0JylcbiAgICAgICAgICAgIC5vbkNsaWNrICgoZXZ0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRUYWdFZGl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9XG5cbiAgICBzdWJtaXRUYWdFZGl0ICgpIHtcblxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2V0dGluZ3MpXG5cbiAgICAgICAgLy9jb25zdCBzdGFydHNXaXRoSGFzaDogQm9vbGVhbiA9IHRoaXMuc2V0dGluZ3MubmV3TmFtZS50cmltKClbMF0gPT0gJyMnO1xuICAgICAgICBjb25zdCBpc1ZhbGlkVGFnOiBCb29sZWFuID0gVXRpbHMuaXNUYWdWYWxpZCh0aGlzLnNldHRpbmdzLm5ld05hbWUudHJpbSgpLCB0cnVlKVxuICAgICAgICBjb25zdCBhY3Rpb246IFN0cmluZyA9IHRoaXMuc2V0dGluZ3MuYWN0aW9uO1xuICAgICAgICBsZXQgbmV3TmFtZTogU3RyaW5nID0gdGhpcy5zZXR0aW5ncy5vcmlnaW5hbFRhZztcblxuICAgICAgICBpZiAoYWN0aW9uID09ICdzdW1tYXJ5Jykge1xuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeVRhZ3M6IEFycmF5ID0gVXRpbHMuZXh0cmFjdFZhbGlkVGFncyAodGhpcy5pbnB1dC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgIGlmIChzdW1tYXJ5VGFncy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSAoJ0ludmFsaWQgdGFnIGZvcm1hdC4nKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50YWdTdW1tYXJ5LmNyZWF0ZUNvZGVCbG9jayhzdW1tYXJ5VGFncywgdGhpcy5zZXR0aW5ncy5zdW1tYXJ5UG9zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09ICdyZW5hbWUnICYmICFpc1ZhbGlkVGFnKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlICgnSW52YWxpZCB0YWcgZm9ybWF0LicpXG4gICAgICAgICAgICAvLyBodHRwczovL2hlbHAub2JzaWRpYW4ubWQvRWRpdGluZythbmQrZm9ybWF0dGluZy9UYWdzI1RhZytmb3JtYXRcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAncmVuYW1lJykgbmV3TmFtZSA9IHRoaXMuc2V0dGluZ3MubmV3TmFtZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PSAnbG93ZXInKSBuZXdOYW1lID0gdGhpcy5zZXR0aW5ncy5vcmlnaW5hbFRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09ICd0b3RleHQnKSBuZXdOYW1lID0gdGhpcy5zZXR0aW5ncy5vcmlnaW5hbFRhZy5zdWJzdHJpbmcoMSk7XG5cbiAgICAgICAgICAgIC8vaWYgKHRoaXMuc2V0dGluZ3MuYmF0Y2hBY3Rpb24gPT0gJ2luc3RhbmNlJykge1xuLy8gdGhpcyBpc24ndCB3b3JraW5nLiBzb2VtdGhpbmcgYWJvdXQgaG93IEknbSBsb29waW5nIGFyb3VuZCB3aXRoIGVkaXQgYW5kIHJlbmFtZS4gbWlnaHQgbm90IHdvcmsuIFxuICAgICAgICAgICAgICAgIC8vIGFuZCBpZiBub3Qgd2UgY2FuJ3QgbWFrZSBlbWJkZWQgb3Igc3VtbWFyeSBlZGl0cyBlZGl0cyBcbiAgICAgICAgICAgICAgICAvL3RoaXMucGx1Z2luLnRhZ0VkaXRvci5lZGl0ICh0aGlzLnNldHRpbmdzLnRhZ0VsLCBudWxsLCBudWxsLCAncmVuYW1lJywgbmV3TmFtZSlcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50YWdFZGl0b3IucmVuYW1lVGFnIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5vcmlnaW5hbFRhZyxcbiAgICAgICAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnNldHRpbmdzLmJhdGNoQWN0aW9uID09ICdpbnN0YW5jZScpID8gcGFyc2VJbnQodGhpcy5zZXR0aW5ncy5vcmlnaW5hbEluZGV4KSA6IHRoaXMuc2V0dGluZ3MuYmF0Y2hBY3Rpb24pLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZpbGVQYXRoLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhZ0VsXG4gICAgICAgICAgICAgICAgICAgIC8vcGFyc2VJbnQodGhpcy5zZXR0aW5ncy5vcmlnaW5hbEluZGV4KSxcblxuICAgICAgICAgICAgICAgICAgICAvLygodGhpcy5zZXR0aW5ncy5iYXRjaEFjdGlvbiA9PSAnaW5zdGFuY2UnKSA/IHBhcnNlSW50KHRoaXMuc2V0dGluZ3Mub3JpZ2luYWxJbmRleCkgOiB0aGlzLnNldHRpbmdzLmJhdGNoQWN0aW9uKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7IFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50YWdTdW1tYXJ5LnVwZGF0ZSh0YWdFbC5jbG9zZXN0KCkpOyBcbiAgICAgICAgICAgICAgICAgICAgcGFyYWdyYXBoRWwucmVtb3ZlKCk7IFxuICAgICAgICAgICAgICAgIH0sIDUwMCk7ICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAvKiBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnRhZ0VkaXRvci5yZW5hbWVUYWcgKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLm9yaWdpbmFsVGFnLFxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMuc2V0dGluZ3MudGFnRWwsXG4gICAgICAgICAgICAgICAgICAgIG5ld05hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYmF0Y2hBY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgLy9wYXJzZUludCh0aGlzLnNldHRpbmdzLm9yaWdpbmFsSW5kZXgpLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vKCh0aGlzLnNldHRpbmdzLmJhdGNoQWN0aW9uID09ICdpbnN0YW5jZScpID8gcGFyc2VJbnQodGhpcy5zZXR0aW5ncy5vcmlnaW5hbEluZGV4KSA6IHRoaXMuc2V0dGluZ3MuYmF0Y2hBY3Rpb24pXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgXG4gICAgICAgIC8vfVxuXG4gICAgfVxuXG4gICAgc2hvd1N1bW1hcnlPcHRpb25zICgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zRGl2LmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5pbnB1dC5zZXREaXNhYmxlZChmYWxzZSlcblxuICAgICAgICBuZXcgU2V0dGluZyAodGhpcy5vcHRpb25zRGl2KVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXaGVyZSBkbyB5b3Ugd2FudCB0byBhZGQgdGhlIHRhZyBzdW1tYXJ5P1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJBZGQgbXVsdGlwbGUgdGFncyBhYm92ZSBzZXBhcmF0ZWQgYnkgYSBjb21tYS5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigob3B0KSA9PlxuICAgICAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RvcCcsIFwiVG9wIG9mIHRoaXMgbm90ZVwiKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2VuZCcsIFwiQm90dG9tIG9mIHRoaXMgbm90ZVwiKVxuICAgICAgICAgICAgICAgIC8vLmFkZE9wdGlvbignaGVyZScsIFwiSW4gcGxhY2Ugb2YgdGhpcyB0YWdcIilcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdub3RlJywgXCJJbiBhIG5ldyBub3RlXCIpIFxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnN1bW1hcnlQb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc2V0dGluZ3Muc3VtbWFyeVBvcylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7IFxuICAgIH1cblxuXG4gICAgc2hvd0VkaXRUYWdPcHRpb25zIChlZGl0VHlwZTogU3RyaW5nKSB7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zRGl2LmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5pbnB1dC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLm9yaWdpbmFsVGFnKTtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXREaXNhYmxlZCh0cnVlKVxuXG4gICAgICAgIGlmIChlZGl0VHlwZSA9PSAncmVuYW1lJykge1xuICAgICAgICAgICAgY29uc3QgbmV3TmFtZSA9IG5ldyBTZXR0aW5nKHRoaXMub3B0aW9uc0RpdilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIk5ldyBuYW1lXCIpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJUYWdzIGNhbiBpbmNsdWRlIGxldHRlcnMsIG51bWJlcnMsIHVuZGVyc2NvcmVzIChfKSwgaHlwaGVucyAoLSksIGFuZCBmb3J3YXJkIHNsYXNoZXMgKC8pIGZvciBuZXN0ZWQgdGFncy5cIilcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgob3B0KSA9PlxuICAgICAgICAgICAgICAgICAgICBvcHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKCcnKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7IFxuICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMuaW5wdXRDaGFuZ2VIYW5kbGVyICh2YWx1ZSwgZWRpdFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLm5ld05hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3aGVyZUVkaXRPcHQgPSBuZXcgU2V0dGluZyAodGhpcy5vcHRpb25zRGl2KVxuICAgICAgICAgICAgLnNldE5hbWUoXCJXaGVyZSB0byBtYWtlIHRoaXMgY2hhbmdlP1wiKVxuICAgICAgICAgICAgLy8uc2V0RGVzYyhcIldBUk5JTkc6IFRoZXJlIGlzIE5PIFVORE8gZm9yIHRoaXMgdGhpcyBhY3Rpb24uXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKG9wdCkgPT5cbiAgICAgICAgICAgIG9wdFxuICAgICAgICAgICAgLmFkZE9wdGlvbignaW5zdGFuY2UnLCBcIkp1c3QgdGhpcyBpbnN0YW5jZVwiKVxuICAgICAgICAgICAgLmFkZE9wdGlvbignbm90ZScsIFwiQWxsIGluIHRoaXMgbm90ZVwiKVxuICAgICAgICAgICAgLmFkZE9wdGlvbigndmF1bHQnLCBcIkFjcm9zcyBlbnRpcmUgdmF1bHRcIilcbiAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gJ3ZhdWx0Jykge1xuICAgICAgICAgICAgICAgICAgICB3aGVyZUVkaXRPcHQuc2V0RGVzYyhcIldBUk5JTkc6IFRoZXJlIGlzIE5PIFVORE8gZm9yIHZhdWx0IGNoYW5nZXMuIENvbnNpZGVyIG1ha2luZyBhIGJhY2t1cCBvZiB5b3VyIHZhdWx0IGZpcnN0LlwiKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmJhdGNoQWN0aW9uID0gJ3ZhdWx0JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdub3RlJykge1xuICAgICAgICAgICAgICAgICAgICB3aGVyZUVkaXRPcHQuc2V0RGVzYyhcIk9ubHkgdGFncyBpbiB0aGlzIG5vdGUgd2lsbCBiZSB1cGRhdGVkLiBDaG9vc2UgXFwnQWNyb3NzIGVudGlyZSB2YXVsdFxcJyB0byB1cGRhdGUgdGhpcyB0YWcgZXZlcnl3aGVyZS5cIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5iYXRjaEFjdGlvbiA9ICdub3RlJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdpbnN0YW5jZScpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmVFZGl0T3B0LnNldERlc2MoXCJcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5iYXRjaEFjdGlvbiA9ICdpbnN0YW5jZSc7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zZXR0aW5ncy5iYXRjaEFjdGlvb24gPSB0aGlzLnNldHRpbmdzLm9yaWdpbmFsSW5kZXhcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNldHRpbmdzLmJhdGNoQWN0aW9uKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuXG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UsIEZ1enp5U3VnZ2VzdE1vZGFsLCBTdWdnZXN0TW9kYWwgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIFNlbGVjdEZpbGVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxURmlsZT4ge1xuICByZXN1bHQ6IFRGaWxlO1xuICBvblN1Ym1pdDogKHJlc3VsdDogVEZpbGUpID0+IHZvaWQ7XG4gIGZpbGVMaXN0OiBURmlsZVtdO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKHJlc3VsdDogVEZpbGUpID0+IHZvaWQpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblxuICAgIHRoaXMuZmlsZUxpc3QgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG4gIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBURmlsZVtdIHtcbiAgICAvL2lmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9PSAwKVxuICAgIHJldHVybiB0aGlzLmZpbGVMaXN0LmZpbHRlcigoZmlsZSkgPT5cbiAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhxdWVyeSlcbiAgICApO1xuICB9XG5cbiAgLy8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cbiAgcmVuZGVyU3VnZ2VzdGlvbihmaWxlOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBmaWxlLm5hbWUgfSk7XG4gICAgZWwuY3JlYXRlRWwoXCJzbWFsbFwiLCB7IHRleHQ6IGZpbGUucGF0aCB9KTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuICBvbkNob29zZVN1Z2dlc3Rpb24oZmlsZTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcbiAgICAvL25ldyBOb3RpY2UoYFNlbGVjdGVkICR7ZmlsZS5wYXRofWApO1xuICAgIC8vY29uc29sZS5sb2coZXZ0LnRhcmdldC52YWx1ZSlcbiAgICAvL2lmIChmaWxlLm5hbWUpXG4gICAgdGhpcy5vblN1Ym1pdChmaWxlKVxuICB9XG5cbiAgLy9vbk5vU3VnZ2VzdGlvbihmaWxlOiBURmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuICAgIC8vbmV3IE5vdGljZShgTm8gc2VsZWN0aW9uYCk7XG4gICAgLy90aGlzLm9uU3VibWl0KGZpbGUpXG4gIC8vfVxufSIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duUmVuZGVyZXIsIENhY2hlZE1ldGFkYXRhLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBEcm9wZG93bkNvbXBvbmVudCwgQ29tcG9uZW50LCBURmlsZSwgZ2V0QWxsVGFncywgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBUYWdCdWRkeSBmcm9tIFwibWFpblwiO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBUYWdTdW1tYXJ5IHtcblx0YXBwOiBBcHA7IFxuXHRwbHVnaW46IFRhZ0J1ZGR5O1xuXHRzZWxlY3RlZEJsb2NrczogTnVtYmVyW107XG5cdGJsb2NrczogU3RyaW5nW107XG5cdHByaXZhdGUgc3RhdGljIGZpbGVTdW1tYXJpZXM6IE1hcDxURmlsZSwgU2V0PEhUTUxFbGVtZW50Pj4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsIFxuXHRcdHBsdWdpbjogVGFnQnVkZHkpIHtcblxuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0YXN5bmMgYmFrZVN1bW1hcnlCdG5IYW5kbGVyIChcblx0XHRzdW1tYXJ5TWQ6IHN0cmluZywgXG5cdFx0c3VtbWFyeUVsOkhUTUxFbGVtZW50LCBcblx0XHRmaWxlUGF0aDpzdHJpbmdcblx0KSB7XG5cdFx0Y29uc3QgbWRTb3VyY2UgPSBzdW1tYXJ5RWwuZ2V0QXR0cmlidXRlKFxuXHRcdFx0J2NvZGVibG9jay1jb2RlJ1xuXHRcdCk7XG5cdFx0XG5cdFx0aWYgKG1kU291cmNlKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IG5ld0ZpbGVDb250ZW50ID0gVXRpbHMucmVwbGFjZVRleHRJblN0cmluZyAoXG5cdFx0XHRcdG1kU291cmNlLCBcblx0XHRcdFx0ZmlsZUNvbnRlbnQsIFxuXHRcdFx0XHRzdW1tYXJ5TWRcblx0XHRcdClcblx0XHRcdHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdGaWxlQ29udGVudCk7XG5cblx0XHRcdGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UgKCdUYWcgc3VtbWFyeSBmbGF0dGVuZWQgdG8gYWN0aXZlIG5vdGUuJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5ldyBOb3RpY2UgKCdcdTI2QTBcdUZFMEYgVGFnIEJ1ZGR5OiBDYW5cXHQgZmluZCBjb2RlIGJsb2NrIHNvdXJjZS4gVGhpcyBpcyBhIEJVRy4gXHVEODNFXHVERUIyJyk7XG5cdFx0fVxuXHR9XG5cblx0LypwdWJsaWMgc3RhdGljIGFkZFN1bW1hcnkoZmlsZTogVEZpbGUsIHN1bW1hcnk6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5maWxlU3VtbWFyaWVzLmhhcyhmaWxlKSkge1xuICAgICAgICAgICAgdGhpcy5maWxlU3VtbWFyaWVzLnNldChmaWxlLCBuZXcgU2V0KFtzdW1tYXJ5XSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3VtbWFyaWVzID0gdGhpcy5maWxlU3VtbWFyaWVzLmdldChmaWxlKTtcbiAgICAgICAgICAgIHN1bW1hcmllcz8uYWRkKHN1bW1hcnkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWV0aG9kIHRvIHJldHJpZXZlIGFuIGFycmF5IG9mIHVuaXF1ZSBzdW1tYXJ5IGVsZW1lbnRzIGZvciBhIGdpdmVuIGZpbGVcbiAgICBwdWJsaWMgc3RhdGljIGdldFN1bW1hcmllc0J5RmlsZShmaWxlOiBURmlsZSk6IEhUTUxFbGVtZW50W10ge1xuICAgICAgICBjb25zdCBzdW1tYXJpZXMgPSB0aGlzLmZpbGVTdW1tYXJpZXMuZ2V0KGZpbGUpO1xuICAgICAgICByZXR1cm4gc3VtbWFyaWVzID8gQXJyYXkuZnJvbShzdW1tYXJpZXMpIDogW107XG4gICAgfSovXG5cblx0Y29weUJ0bkhhbmRsZXIgKGUsIGNvbnRlbnQpOnZvaWQge1xuXG5cdFx0Ly9lLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0Y29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7XG5cdFx0bGV0IG5vdGljZTtcblxuXHRcdGlmIChzZWxlY3Rpb24gIT0gJycpIHtcblx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHNlbGVjdGlvbik7XG5cdFx0XHRub3RpY2UgPSBuZXcgTm90aWNlICgnU2VsZWN0aW9uIGNvcGllZCB0byBjbGlwYm9hcmQuJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvbnRlbnQpO1xuXHRcdFx0bm90aWNlID0gbmV3IE5vdGljZSAoJ1RhZ2dlZCBwYXJhZ3JhcGggY29waWVkIHRvIGNsaXBib2FyZC4nKTtcblx0XHR9XG5cblx0XHQvL25hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvbnRlbnQpO1xuXHRcdC8vY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSAoJ1RhZyBCdWRkeTogQ29waWVkIHRvIGNsaXBib2FyZC4nKTtcblxuXHR9XG5cblx0cmVtb3ZlVGFnQnRuSGFuZGxlciAoZSwgcGFyYWdyYXBoRWwsIHRhZyk6dm9pZCB7XG5cdFx0Y29uc3QgdGFnRWwgPSBVdGlscy5nZXRUYWdFbGVtZW50KHBhcmFncmFwaEVsLCB0YWcpO1xuXHRcdHRoaXMucGx1Z2luLnRhZ0VkaXRvci5lZGl0KHRhZ0VsKTtcblx0fVxuXG5cdGFzeW5jIGNvcHlUb0J0bkhhbmRsZXIgKFxuXHRcdGU6IEV2ZW50LCBcblx0XHRtb2RlOiBTdHJpbmcsXG5cdFx0ZHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50LFxuXHRcdHBhcmFncmFwaEVsOiBIVE1MRWxlbWVudCwgXG5cdFx0c3VtbWFyeUVsOiBIVE1MRWxlbWVudCxcblx0XHRjb250ZW50OiBzdHJpbmcsICBcblx0XHR0YWdzOiBBcnJheSwgXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyxcblx0XHRzZWxlY3RlZEZpbGU6IFRGaWxlXG5cdCkge1xuXHRcdGxldCBuZXdDb250ZW50XG5cdFx0Y29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7XG5cdFx0XG5cdFx0aWYgKHNlbGVjdGlvbiA9PSAnJykgbmV3Q29udGVudCA9IGNvbnRlbnQ7XG5cdFx0ZWxzZSBuZXdDb250ZW50ID0gc2VsZWN0aW9uO1xuXHRcdGxldCBub3RpY2U7XG5cdFx0XHRcdFxuXHRcdGlmIChtb2RlID09ICdsaW5rJykge1xuXHRcdFxuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlUGF0aC5zcGxpdCgnLycpLnBvcCgpLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcblx0XHRcdG5ld0NvbnRlbnQgPSAnW1snICsgZmlsZVBhdGggKyAnfCcgKyBmaWxlTmFtZSArICddXSc7XG5cdFx0XG5cdFx0fSBcblxuXHRcdGlmIChtb2RlICE9ICdsaW5rJyAmJiAhc2VsZWN0aW9uKSB7XG5cdFx0XHR0YWdzLmZvckVhY2goKHRhZywgaSkgPT4ge1xuXHRcdFx0XHQvLyBtYWtlIHRoaXMgYSBzZXR0aW5nLiB3ZSdsbCBkZWZhdWx0IHRvIGFsd2F5cyBmb3Igbm93XG5cdFx0XHRcdG5ld0NvbnRlbnQgPSBVdGlscy5yZW1vdmVUYWdGcm9tU3RyaW5nKG5ld0NvbnRlbnQsIHRhZykudHJpbSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG4vL2NvbnNvbGUubG9nKGRyb3Bkb3duLmdldFZhbHVlKCkpXG5cblx0XHRjb25zdCBjb3B5U3VjY2VzcyA9IGF3YWl0IHRoaXMuY29weVRleHRUb1NlY3Rpb24oXG5cdFx0XHQvL3RoaXMucGx1Z2luLnNldHRpbmdzLnRhZ2dlZFBhcmFncmFwaENvcHlQcmVmaXggKyBcblx0XHRcdG5ld0NvbnRlbnQsIFxuXHRcdFx0ZHJvcGRvd24uZ2V0VmFsdWUoKSwgXG5cdFx0XHRmaWxlUGF0aCxcblx0XHRcdChtb2RlIT0nbGluaycpLFxuXHRcdFx0c2VsZWN0ZWRGaWxlXG5cdFx0KTtcblxuXHRcdGlmIChjb3B5U3VjY2Vzcykge1xuXG5cdFx0XHRpZiAobW9kZSA9PSAnbm90ZScpIHtcblxuXHRcdFx0XHRub3RpY2UgPSBuZXcgTm90aWNlKFxuXHRcdFx0XHRcdCdDb3BpZWQgdG8gc2VjdGlvbjogJyArIGRyb3Bkb3duLmdldFZhbHVlKCkgKyAnIGluICcgKyBzZWxlY3RlZEZpbGUubmFtZSArICcgXHVEODNEXHVERDE3Jyxcblx0XHRcdFx0XHQ1MDAwKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJEb21FdmVudChub3RpY2Uubm90aWNlRWwsICdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChzZWxlY3RlZEZpbGUucGF0aCsnIycrZHJvcGRvd24uZ2V0VmFsdWUoKSwgJycpO1xuIFx0XHRcdFx0fSk7XG5cblx0XHRcdH0gZWxzZSBpZiAobW9kZSA9PSAnbW92ZScgJiYgIXNlbGVjdGlvbikge1xuXG5cblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0XHRcdGxldCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdFx0XHRcdGZpbGVDb250ZW50ID0gZmlsZUNvbnRlbnQudHJpbSgpO1xuXHRcdFx0XHRjb25zdCBuZXdGaWxlQ29udGVudCA9IFV0aWxzLnJlcGxhY2VUZXh0SW5TdHJpbmcoXG5cdFx0XHRcdFx0Y29udGVudC50cmltKCksIFxuXHRcdFx0XHRcdGZpbGVDb250ZW50LCBcblx0XHRcdFx0XHRuZXdDb250ZW50KS50cmltKCk7XG5cdFx0XHRcdGlmIChmaWxlQ29udGVudCAhPSBuZXdGaWxlQ29udGVudCkge1xuXHRcdFx0XHRcdC8vIHJlbml2ZSB0aGUgdGFnIGJlZm9yZSBjb3B5aW5nXG5cdFx0XHRcdFx0dGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0ZpbGVDb250ZW50KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBjb3BpZWRUb1doZXJlOiBTdHJpbmcgPSBkcm9wZG93bi5nZXRWYWx1ZSgpPT0ndG9wJyA/ICd0b3Agb2Ygbm90ZScgOiBkcm9wZG93bi5nZXRWYWx1ZSgpPT0nZW5kJyA/ICdlbmQgb2Ygbm90ZScgOiBkcm9wZG93bi5nZXRWYWx1ZSgpXG5cdFx0XHRcdFx0bm90aWNlID0gbmV3IE5vdGljZShcblx0XHRcdFx0XHRcdC8vJ01vdmVkIHRvIHNlY3Rpb246ICcgKyBkcm9wZG93bi5nZXRWYWx1ZSgpICtcblx0XHRcdFx0XHRcdC8vJy5cXG5cdUQ4M0RcdUREMTcgT3BlbiBzb3VyY2Ugbm90ZS4nLCBcblx0XHRcdFx0XHRcdCdDb3BpZWQgdG8gc2VjdGlvbjogJyArIGRyb3Bkb3duLmdldFZhbHVlKCkgKyAnLiAnICsgKChkcm9wZG93bi5nZXRWYWx1ZSgpPT0ndG9wJyB8fCBkcm9wZG93bi5nZXRWYWx1ZSgpPT0nZW5kJykgPyAnJyA6ICdcdUQ4M0RcdUREMTcnKSxcblx0XHRcdFx0XHRcdDUwMDApO1xuXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uZ3VpLnJlbW92ZUVsZW1lbnRXaXRoQW5pbWF0aW9uKHBhcmFncmFwaEVsLCAoKSA9PiB7IFxuXHQgICAgXHRcdFx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsgXG5cdCAgICBcdFx0XHRcdFx0dGhpcy51cGRhdGUoc3VtbWFyeUVsKTsgXG5cdCAgICBcdFx0XHRcdFx0cGFyYWdyYXBoRWwucmVtb3ZlKCk7IFxuXHQgICAgXHRcdFx0XHR9LCA1MDApO1x0XHRcdFx0XHRcdFxuXHRcdFx0XHQgICAgXHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsgXG5cdFx0XHRcdCAgICBcdFx0Ly90aGlzLnBsdWdpbi50YWdQcm9jZXNzb3IucnVuKCk7IFxuXHRcdFx0XHQgICAgXHR9LCA4MDApO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0aWYgKGRyb3Bkb3duLmdldFZhbHVlKCkgIT0gJ3RvcCcgfHwgZHJvcGRvd24uZ2V0VmFsdWUoKSAhPSAnZW5kJykge1xuXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KG5vdGljZS5ub3RpY2VFbCwgJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly90aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGVQYXRoLCAnJyk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQodGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5wYXRoKycjJytkcm9wZG93bi5nZXRWYWx1ZSgpLCAnJyk7XG5cdFx0IFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UgKCdDb3BpZWQgdG8gc2VjdGlvbjogJyArIGRyb3Bkb3duLmdldFZhbHVlKCkgXG5cdFx0XHRcdFx0XHQrICcuXFxuQ2FuXFwndCB1cGRhdGUgc291cmNlIGZpbGUuJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmIChtb2RlID09ICdjb3B5JyB8fCBtb2RlID09ICdsaW5rJykge1xuXHRcdFx0XHRub3RpY2UgPSBuZXcgTm90aWNlICgnQ29waWVkIHRvIHNlY3Rpb246ICcgKyBkcm9wZG93bi5nZXRWYWx1ZSgpICsgJy4gJyArICgoZHJvcGRvd24uZ2V0VmFsdWUoKT09J3RvcCcgfHwgZHJvcGRvd24uZ2V0VmFsdWUoKT09J2VuZCcpID8gJycgOiAnXHVEODNEXHVERDE3JykpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KG5vdGljZS5ub3RpY2VFbCwgJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkucGF0aCsnIycrZHJvcGRvd24uZ2V0VmFsdWUoKSwgJycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcdFxuXHR9XG5cblx0YXN5bmMgbWFrZVN1bW1hcnlCdG5IYW5kbGVyIChcblx0XHRzdW1tYXJ5TWQ6IFN0cmluZywgXG5cdFx0dGFnczogQXJyYXksXG5cdFx0Y29kZTogQm9vbGVhbiA9IGZhbHNlLFxuXHRcdGluY3JlbWVudEZpbGU6IEJvb2xlYW4gPSBmYWxzZVxuXHQpIHtcblxuLy9uZXcgTm90aWNlICgnbWFrZVN1bW1hcnlCdG5IYW5kbGVyJywgMTAwMDApXG5cblx0XHQvLyB0cnkgdG8gYWJzdHJhY3QgdGhlIGhhbmRsZXJzIGZyb20gdGhlaXIgZnVuY3Rpb25zXG5cdFx0Ly9jb25zdCBuZXdOb3RlT2JqID0gdGhpcy5maWxlT2JqRnJvbVRhZ3ModGFncyk7XG5cdFx0Y29uc3QgbmV3Tm90ZU9iaiA9IFV0aWxzLmZpbGVPYmpGcm9tVGFncyh0YWdzKTtcblx0XHRsZXQgZmlsZUNvbnRlbnQgPSBjb2RlID8gc3VtbWFyeU1kIDogJyMjICcgKyBuZXdOb3RlT2JqLnRpdGxlICsgJ1xcblxcbicgKyBzdW1tYXJ5TWQ7XG5cdFx0Y29uc3QgdmlldyA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Ly9jb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2V0QWN0aXZlRmlsZUZvbGRlcigpK25ld05vdGVPYmouZmlsZU5hbWU7XG5cdFx0Ly8gY29uc3QgZmlsZU5hbWUgPSBVdGlscy5nZXRBY3RpdmVGaWxlRm9sZGVyKHZpZXcpK25ld05vdGVPYmouZmlsZU5hbWU7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSBVdGlscy5nZXRBY3RpdmVGaWxlRm9sZGVyKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpXG5cdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlUGF0aCArIG5ld05vdGVPYmouZmlsZU5hbWU7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSk7XG5cdFx0bGV0IG5vdGljZTtcblxuXHRcdC8vY29uc29sZS5sb2cgKG5ld05vdGVPYmouZmlsZU5hbWUpO1xuXG5cdFx0aWYgKCFjb2RlKSB7XG5cdFx0XHR0YWdzLmZvckVhY2ggKCh0YWcpID0+IHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgPSBVdGlscy5yZXBsYWNlVGV4dEluU3RyaW5nICh0YWcsIGZpbGVDb250ZW50LCB0YWcuc3Vic3RyaW5nKDEpLCB0cnVlKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiAhaW5jcmVtZW50RmlsZSkge1xuXG5cdFx0XHRub3RpY2UgPSBuZXcgTm90aWNlICgnXHUyNkEwXHVGRTBGIE5vdGUgYWxyZWFkeSBleGlzdHMuXFxuQ2xpY2sgaGVyZSB0byBvdmVyd3JpdGUuJywgODAwMCk7XG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KG5vdGljZS5ub3RpY2VFbCwgJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0dGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVDb250ZW50KTtcblx0XHRcdFx0bm90aWNlID0gbmV3IE5vdGljZSAoJ05vdGUgdXBkYXRlZC5cXG5cdUQ4M0RcdUREMTcgT3BlbiBub3RlLicsIDUwMDApO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KG5vdGljZS5ub3RpY2VFbCwgJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGVOYW1lLCAnJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvKn0gZWxzZSBpZiAoKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkgJiYgaW5jcmVtZW50RmlsZSkge1xuXG5cdFx0XHRjb25zdCBiYXNlTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IGV4dGVuc2lvbiA9IFwiLm1kXCI7XG5cdFx0XHRjb25zdCByZWdleCA9IC8oXFxkKykkLztcblx0XHRcdGNvbnN0IG1hdGNoID0gYmFzZU5hbWUubWF0Y2gocmVnZXgpO1xuXHRcdFx0bGV0IGluY3JlbWVudGVkRmlsZU5hbWU7XG5cdFx0XHRsZXQgc3VmZml4ID0gMTsgXG5cdFx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdCAgICBzdWZmaXggPSBwYXJzZUludChtYXRjaFsxXSwgMTApICsgMTtcblx0XHRcdCAgICAvLyBJZiB0aGVyZSdzIGEgbWF0Y2gsIHlvdSBuZWVkIHRvIHJlbW92ZSB0aGUgbWF0Y2hlZCBudW1iZXIgZnJvbSB0aGUgYmFzZU5hbWUgYmVmb3JlIGFwcGVuZGluZyB0aGUgaW5jcmVtZW50ZWQgbnVtYmVyXG5cdFx0XHQgICAgY29uc3QgbnVtYmVyTGVuZ3RoID0gbWF0Y2hbMV0ubGVuZ3RoO1xuXHRcdFx0ICAgIGNvbnN0IGJhc2VOYW1lV2l0aG91dE51bWJlciA9IGJhc2VOYW1lLnNsaWNlKDAsIC1udW1iZXJMZW5ndGgpO1xuXHRcdFx0ICAgIGluY3JlbWVudGVkRmlsZU5hbWUgPSBiYXNlTmFtZVdpdGhvdXROdW1iZXIgKyAnICcgKyBzdWZmaXggKyBleHRlbnNpb247XG5cdFx0XHQgICAgY29uc29sZS5sb2coc3VmZml4LCBmaWxlUGF0aCArIGluY3JlbWVudGVkRmlsZU5hbWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdCAgICAvLyBJZiB0aGVyZSdzIG5vIG51bWJlciBhdCB0aGUgZW5kLCB0aGUgYXBwcm9hY2ggcmVtYWlucyB0aGUgc2FtZVxuXHRcdFx0ICAgIGluY3JlbWVudGVkRmlsZU5hbWUgPSBiYXNlTmFtZSArICcgJyArIHN1ZmZpeCArIGV4dGVuc2lvbjtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhzdWZmaXgsIGZpbGVQYXRoICsgaW5jcmVtZW50ZWRGaWxlTmFtZSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgraW5jcmVtZW50ZWRGaWxlTmFtZSwgZmlsZUNvbnRlbnQpO1xuXHRcdFx0Y29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSAoJ05vdGUgY3JlYXRlZC4gXHVEODNEXHVEQ0RDXFxuXHVEODNEXHVERDE3IE9wZW4gbm90ZS4nKTtcblx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRG9tRXZlbnQobm90aWNlLm5vdGljZUVsLCAnY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld05vdGVPYmouZmlsZU5hbWUsICcnKTtcblx0XHRcdH0pO1xuXHRcdFx0Ki9cblxuXHRcdH0gZWxzZSBpZiAoIWZpbGUpIHtcblxuXHRcdFx0dGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVOYW1lLCBmaWxlQ29udGVudCk7XG5cdFx0XHRjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlICgnU3VtbWFyeSBub3RlIGNyZWF0ZWQuIFx1RDgzRFx1RENEQ1xcblx1RDgzRFx1REQxNyBPcGVuIG5vdGUuJyk7XG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KG5vdGljZS5ub3RpY2VFbCwgJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChuZXdOb3RlT2JqLmZpbGVOYW1lLCAnJyk7XG5cdFx0XHR9KTtcblxuXG5cdFx0fVxuXHR9XG5cblx0Y3JlYXRlQ29kZUJsb2NrICh0YWdzQXJyYXk6IFN0cmluZ1tdLCBwb3M6IFN0cmluZykge1xuXHRcdC8vY29uc29sZS5sb2coc3VtbWFyeVBvcylcblx0XHRjb25zdCBjb2RlQmxvY2tTdHJpbmcgPSBcblx0XHRcdCdgYGB0YWctc3VtbWFyeVxcbicgK1xuXHRcdFx0J3RhZ3M6ICcgKyB0YWdzQXJyYXkuam9pbignICcpICsgJ1xcbicgK1xuXHRcdFx0J2BgYCc7XG5cblx0XHRpZiAocG9zID09ICdub3RlJykge1xuXG5cdFx0XHR0aGlzLm1ha2VTdW1tYXJ5QnRuSGFuZGxlciAoY29kZUJsb2NrU3RyaW5nLCB0YWdzQXJyYXksIHRydWUpO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0dGhpcy5jb3B5VGV4dFRvU2VjdGlvbihcblx0XHRcdCAgICBjb2RlQmxvY2tTdHJpbmcsXG5cdFx0XHQgICAgcG9zLCBcblx0XHRcdCAgICAnJyxcblx0XHRcdCAgICBmYWxzZVxuXHRcdCAgICApXG5cdFx0fVxuXG5cdH1cblxuXHRhc3luYyBjb2RlQmxvY2tQcm9jZXNzb3IgKFxuXHRcdHNvdXJjZTogc3RyaW5nLCBcblx0XHRlbDpIVE1MRWxlbWVudCwgXG5cdFx0Y3R4XG5cdCk6IHZvaWQge1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgdGFnIGxpc3Rcblx0XHRsZXQgdGFnczogc3RyaW5nW10gPSBBcnJheSgpO1xuXHRcdGxldCBpbmNsdWRlOiBzdHJpbmdbXSA9IEFycmF5KCk7XG5cdFx0bGV0IGV4Y2x1ZGU6IHN0cmluZ1tdID0gQXJyYXkoKTtcblx0XHRsZXQgc2VjdGlvbnM6IHN0cmluZ1tdID0gQXJyYXkoKTtcblx0XHRsZXQgbWF4OiBudW1iZXIgPSA1MDtcblx0XHRjb25zdCBtYXhQYXR0ZXJuID0gL15cXHMqbWF4OlxccyooXFxkKylcXHMqJC87XG5cdFx0bGV0IG1hdGNoO1xuXG5cdFx0Ly8gUHJvY2VzcyByb3dzIGluc2lkZSBjb2RlYmxvY2tcblx0XHRjb25zdCByb3dzID0gc291cmNlLnNwbGl0KFwiXFxuXCIpLmZpbHRlcigocm93KSA9PiByb3cubGVuZ3RoID4gMCk7XG5cdFx0cm93cy5mb3JFYWNoKChsaW5lKSA9PiB7XG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgdGhlIHRhZ3MgKE9SKVxuXHRcdFx0aWYgKGxpbmUubWF0Y2goL15cXHMqdGFnczpbXFxwe0x9MC05X1xcLS8jIF0rJC9ndSkpIHtcblx0XHRcdFx0Y29uc3QgY29udGVudCA9IGxpbmUucmVwbGFjZSgvXlxccyp0YWdzOi8sIFwiXCIpLnRyaW0oKTtcblxuXHRcdFx0XHQvLyBHZXQgdGhlIGxpc3Qgb2YgdmFsaWQgdGFncyBhbmQgYXNzaWduIHRoZW0gdG8gdGhlIHRhZ3MgdmFyaWFibGVcblx0XHRcdFx0bGV0IGxpc3QgPSBjb250ZW50LnNwbGl0KC9cXHMrLykubWFwKCh0YWcpID0+IHRhZy50cmltKCkpO1xuXHRcdFx0XHRsaXN0ID0gbGlzdC5maWx0ZXIoKHRhZykgPT4ge1xuXHRcdFx0XHRcdGlmICh0YWcubWF0Y2goL14jW1xccHtMfV0rW14jXSokL3UpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRhZ3MgPSBsaXN0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgdGhlIHRhZ3MgdG8gaW5jbHVkZSAoQU5EKVxuXHRcdFx0aWYgKGxpbmUubWF0Y2goL15cXHMqaW5jbHVkZTpbXFxwe0x9MC05X1xcLS8jIF0rJC9ndSkpIHtcblx0XHRcdFx0Y29uc3QgY29udGVudCA9IGxpbmUucmVwbGFjZSgvXlxccyppbmNsdWRlOi8sIFwiXCIpLnRyaW0oKTtcblxuXHRcdFx0XHQvLyBHZXQgdGhlIGxpc3Qgb2YgdmFsaWQgdGFncyBhbmQgYXNzaWduIHRoZW0gdG8gdGhlIGluY2x1ZGUgdmFyaWFibGVcblx0XHRcdFx0bGV0IGxpc3QgPSBjb250ZW50LnNwbGl0KC9cXHMrLykubWFwKCh0YWcpID0+IHRhZy50cmltKCkpO1xuXHRcdFx0XHRsaXN0ID0gbGlzdC5maWx0ZXIoKHRhZykgPT4ge1xuXHRcdFx0XHRcdGlmICh0YWcubWF0Y2goL14jW1xccHtMfV0rW14jXSokL3UpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGluY2x1ZGUgPSBsaXN0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgdGhlIHRhZ3MgdG8gZXhjbHVkZSAoTk9UKVxuXHRcdFx0aWYgKGxpbmUubWF0Y2goL15cXHMqZXhjbHVkZTpbXFxwe0x9MC05X1xcLS8jIF0rJC9ndSkpIHtcblx0XHRcdFx0Y29uc3QgY29udGVudCA9IGxpbmUucmVwbGFjZSgvXlxccypleGNsdWRlOi8sIFwiXCIpLnRyaW0oKTtcblxuXHRcdFx0XHQvLyBHZXQgdGhlIGxpc3Qgb2YgdmFsaWQgdGFncyBhbmQgYXNzaWduIHRoZW0gdG8gdGhlIGV4Y2x1ZGUgdmFyaWFibGVcblx0XHRcdFx0bGV0IGxpc3QgPSBjb250ZW50LnNwbGl0KC9cXHMrLykubWFwKCh0YWcpID0+IHRhZy50cmltKCkpO1xuXHRcdFx0XHRsaXN0ID0gbGlzdC5maWx0ZXIoKHRhZykgPT4ge1xuXHRcdFx0XHRcdGlmICh0YWcubWF0Y2goL14jW1xccHtMfV0rW14jXSokL3UpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGV4Y2x1ZGUgPSBsaXN0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluZSBzcGVjaWZpZXMgc2VjdGlvbnMgb2YgYSBub3RlXG5cdFx0XHRpZiAobGluZS5tYXRjaCgvXlxccypzZWN0aW9uczpbXFxwe0x9MC05X1xcLS8jLCBdKyQvZ3UpKSB7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBsaW5lLnJlcGxhY2UoL15cXHMqc2VjdGlvbnM6LywgXCJcIikudHJpbSgpO1xuXHRcdFx0XHQvLyBHZXQgdGhlIGxpc3Qgb2Ygc2VjdGlvbnMgYW5kIGFzc2lnbiB0aGVtIHRvIHRoZSBzZWN0aW9ucyB2YXJpYWJsZVxuXHRcdFx0XHRsZXQgbGlzdCA9IGNvbnRlbnQuc3BsaXQoJywnKS5tYXAoKHNlYykgPT4gc2VjLnRyaW0oKSk7XG5cdFx0XHRcdHNlY3Rpb25zID0gbGlzdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGxpbmUgc3BlY2lmaWVzIG1heCBudW1iZXIgb2YgYmxvY2tzIHRvIGRpc3BsYXlcblx0XHRcdG1hdGNoID0gbGluZS5tYXRjaChtYXhQYXR0ZXJuKTtcblx0XHRcdGlmIChtYXRjaCkge1xuICAgIFx0XHRcdG1heCA9IE1hdGgubWluKDUwLCBOdW1iZXIobWF0Y2hbMV0pKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCBjb2RlQmxvY2sgPSAnYGBgdGFnLXN1bW1hcnlcXG4nK3NvdXJjZS50cmltKCkrJ1xcbmBgYCdcblx0XHQvLyBDcmVhdGUgc3VtbWFyeSBvbmx5IGlmIHRoZSB1c2VyIHNwZWNpZmllZCBzb21lIHRhZ3Ncblx0XHRpZiAodGFncy5sZW5ndGggPiAwIHx8IGluY2x1ZGUubGVuZ3RoID4gMCkge1xuXHRcdFx0YXdhaXQgdGhpcy5jcmVhdGUoXG5cdFx0XHRcdGVsLCBcblx0XHRcdFx0dGFncywgXG5cdFx0XHRcdGluY2x1ZGUsIFxuXHRcdFx0XHRleGNsdWRlLCBcblx0XHRcdFx0c2VjdGlvbnMsIFxuXHRcdFx0XHRtYXgsIFxuXHRcdFx0XHRjdHguc291cmNlUGF0aCwgXG5cdFx0XHRcdGNvZGVCbG9ja1xuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jcmVhdGVFbXB0eShcblx0XHRcdFx0ZWwsIFxuXHRcdFx0XHR0YWdzID8gdGFncyA6IFtdLCBcblx0XHRcdFx0aW5jbHVkZSA/IGluY2x1ZGUgOiBbXSwgXG5cdFx0XHRcdGV4Y2x1ZGUgPyBleGNsdWRlIDogW10sIFxuXHRcdFx0XHRzZWN0aW9ucyA/IHNlY3Rpb25zIDogW10sIFxuXHRcdFx0XHRtYXggPyBtYXggOiBbXSwgXG5cdFx0XHRcdGN0eC5zb3VyY2VQYXRoID8gY3R4LnNvdXJjZVBhdGggOiAnJywgXG5cdFx0XHRcdGNvZGVCbG9ja1xuXHRcdFx0KTtcblx0XHR9IFxuXHR9OyBcblxuXHRjcmVhdGVFbXB0eShcblx0XHRlbGVtZW50OiBIVE1MRWxlbWVudCwgXG5cdFx0dGFnczogU3RyaW5nW10sIFxuXHRcdGluY2x1ZGU6IHN0cmluZ1tdLCBcblx0XHRleGNsdWRlOiBzdHJpbmdbXSwgXG5cdFx0c2VjdGlvbnM6IHN0cmluZ1tdLCBcblx0XHRtYXg6IG51bWJlciwgXG5cdFx0ZmlsZUN0eDogc3RyaW5nLCBcblx0XHRtZFNvdXJjZTpzdHJpbmdcblx0KTogdm9pZCB7XG5cblx0XHRjb25zdCBjb250YWluZXIgPSBjcmVhdGVFbCgnZGl2Jyk7XG5cdFx0Y29uc3QgdGV4dERpdiA9IGNyZWF0ZUVsKFwiYmxvY2txdW90ZVwiKTtcblx0XHR0ZXh0RGl2LmlubmVySFRNTCA9IFwiVGhlcmUgYXJlIG5vIG5vdGVzIHdpdGggdGFnZ2VkIHBhcmFncmFwaHMgdGhhdCBtYXRjaCB0aGUgdGFnczo8YnI+XCJcblx0XHRcdCsgKHRhZ3MubGVuZ3RoPjAgPyB0YWdzLmpvaW4oJywgJykgOiBcIk5vIHRhZ3Mgc3BlY2lmaWVkLlwiKSArIFwiPGJyPlwiO1xuXHRcdFxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0RGl2KTtcblx0XHRjb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0J2NvZGVibG9jay10YWdzJywgXG5cdFx0XHQoKHRhZ3MubGVuZ3RoID4gMCkgPyB0YWdzLmpvaW4oJywnKSA6ICcnKVxuXHRcdCk7XG5cdFx0Y29udGFpbmVyLnNldEF0dHJpYnV0ZShcblx0XHRcdCdjb2RlYmxvY2stdGFncy1pbmNsdWRlJywgXG5cdFx0XHQoaW5jbHVkZSA/IGluY2x1ZGUuam9pbignLCcpIDogJycpXG5cdFx0KTtcblx0XHRjb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0J2NvZGVibG9jay10YWdzLWV4Y2x1ZGUnLCBcblx0XHRcdChleGNsdWRlID8gZXhjbHVkZS5qb2luKCcsJykgOiAnJylcblx0XHQpO1xuXHRcdGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLXNlY3Rpb25zJywgXG5cdFx0XHQoc2VjdGlvbnMgPyBzZWN0aW9ucy5qb2luKCcsJykgOiAnJylcblx0XHQpO1xuXHRcdGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLW1heCcsIFxuXHRcdFx0bWF4XG5cdFx0KTtcblx0XHRjb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0J2NvZGVibG9jay1jb2RlJywgXG5cdFx0XHRtZFNvdXJjZVxuXHRcdCk7XG5cblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5wbHVnaW4uZ3VpLm1ha2VTdW1tYXJ5UmVmcmVzaEJ1dHRvbihjb250YWluZXIpKTs7XG5cblx0XHRlbGVtZW50LnJlcGxhY2VXaXRoKGNvbnRhaW5lcik7XG5cdH1cblxuXHRhc3luYyBjcmVhdGUoXG5cdFx0ZWxlbWVudDogSFRNTEVsZW1lbnQsIFxuXHRcdHRhZ3M6IHN0cmluZ1tdLCBcblx0XHRpbmNsdWRlOiBzdHJpbmdbXSwgXG5cdFx0ZXhjbHVkZTogc3RyaW5nW10sIFxuXHRcdHNlY3Rpb25zOiBzdHJpbmdbXSxcblx0XHRtYXg6IG51bWJlciwgXG5cdFx0ZmlsZUN0eDogc3RyaW5nLFxuXHRcdG1kU291cmNlOnN0cmluZ1xuXHQpOiB2b2lkIHtcblx0XHRcbi8vY29uc29sZS5sb2coJ2NyZWF0ZSBzdW1tYXJ5Jylcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRjb25zdCB2YWxpZFRhZ3MgPSB0YWdzLmNvbmNhdChpbmNsdWRlKTtcblx0XHRjb25zdCB0ZW1wQ29tcG9uZW50ID0gbmV3IFRlbXBDb21wb25lbnQoKTtcblx0XHRjb25zdCBzdW1tYXJ5Q29udGFpbmVyID0gY3JlYXRlRWwoJ2RpdicpO1xuXHRcdC8vc3VtbWFyeUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbCgnaHInKSk7XG5cdFx0dGhpcy5zZWxlY3RlZEJsb2NrcyA9IFtdO1xuXHRcdHRoaXMuYmxvY2tzID0gW107XG5cblx0XHRzdW1tYXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcblx0XHRcdCdjbGFzcycsIFxuXHRcdFx0J3RhZy1zdW1tYXJ5LWJsb2NrJ1xuXHRcdCk7XG5cdFx0XG5cdFx0Ly8gR2V0IGZpbGVzXG5cdFx0bGV0IGxpc3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuXHRcdC8vIEZpbHRlciBmaWxlc1xuXHRcdGxpc3RGaWxlcyA9IGxpc3RGaWxlcy5maWx0ZXIoKGZpbGUpID0+IHtcblx0XHRcdC8vIFJlbW92ZSBmaWxlcyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSB0YWdzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG5cdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXHRcdFx0Y29uc3QgdGFnc0luRmlsZSA9IGdldEFsbFRhZ3MoY2FjaGUpO1xuXHRcdFx0Ly8gUmVtb3ZlIGZpbGVzIHdoZXJlIHRoZSBwYXRoIGluY2x1ZGVzICdfZXhjbHVkZSdcblx0XHRcdGlmIChmaWxlLnBhdGguaW5jbHVkZXMoJ19leGNsdWRlJykpIHJldHVybiBmYWxzZVxuXHRcdFx0XG5cdFx0XHQvLyBSZW1vdmUgdGhlIGZpbGUgaWYgaXQncyB0aGUgc2FtZSBmaWxlIGFzIHRoaXMgc3VtbWFyeVxuXHRcdFx0Ly9pZiAoYWN0aXZlRmlsZSkgaWYgKGFjdGl2ZUZpbGUucGF0aCA9PSBmaWxlLnBhdGgpIHJldHVybiBmYWxzZTtcblxuXHRcdFx0aWYgKHZhbGlkVGFncy5zb21lKCh2YWx1ZSkgPT4gdGFnc0luRmlsZT8uaW5jbHVkZXModmFsdWUpKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cblx0XHQvLyBTb3J0IGZpbGVzIGFscGhhYmV0aWNhbGx5XG5cdFx0Ly8gbWFrZSB0aGlzIGEgcHJvcGVydHkgb2YgdGhlIGNvZGUgYmxvY2suIGJ1dCBkZWZhdWx0IHRvIG1vZGlmaWVkIGRhdGVcblx0XHQvKmxpc3RGaWxlcyA9IGxpc3RGaWxlcy5zb3J0KChmaWxlMSwgZmlsZTIpID0+IHtcblx0XHRcdGlmIChmaWxlMS5wYXRoIDwgZmlsZTIucGF0aCkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9IGVsc2UgaWYgKGZpbGUxLnBhdGggPiBmaWxlMi5wYXRoKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9XG5cdFx0fSk7Ki9cbiBcblxuXHRcdGxpc3RGaWxlcyA9IGxpc3RGaWxlcy5zb3J0KChmaWxlMSwgZmlsZTIpID0+IHtcblx0XHQgICAgLy8gU2luY2UgbXRpbWUgaXMgYSBVbml4IHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMsIHdlIGNhbiBkaXJlY3RseSBzdWJ0cmFjdCB0aGVtXG5cdFx0ICAgIC8vY29uc29sZS5sb2coZmlsZTIuc3RhdC5jdGltZSAtIGZpbGUxLnN0YXQuY3RpbWUpXG5cdFx0ICAgIHJldHVybiBmaWxlMi5zdGF0LmN0aW1lIC0gZmlsZTEuc3RhdC5jdGltZTtcblx0XHR9KTtcblxuXHRcdC8vIEdldCBmaWxlcyBjb250ZW50XG5cdFx0bGV0IGxpc3RDb250ZW50czogW1RGaWxlLCBzdHJpbmddW10gPSBhd2FpdCB0aGlzLnJlYWRGaWxlcyhsaXN0RmlsZXMpO1xuXHRcdGxldCBjb3VudCA9IDA7XG5cblx0XHQvLyBDcmVhdGUgc3VtbWFyeVxuXHRcdGxldCBzdW1tYXJ5OiBzdHJpbmcgPSBcIlwiO1xuXHRcdGxpc3RDb250ZW50cy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cblx0XHRcdC8vIEdldCBmaWxlcyBuYW1lXG5cdFx0XHQvLyBpdGVtWzBdIGlzIHRoZSBmaWxlLCBpdGVtWzFdIGlzIHRoZSBmaWxlIGNvbnRlbnRcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gaXRlbVswXS5uYW1lLnJlcGxhY2UoLy5tZCQvZywgXCJcIik7XG5cdFx0XHRjb25zdCBmaWxlUGF0aCA9IGl0ZW1bMF0ucGF0aDtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IHBhcmFncmFwaHNcblx0XHRcdGxldCBsaXN0UGFyYWdyYXBoczogc3RyaW5nW10gPSBBcnJheSgpO1xuXHRcdFx0Y29uc3QgYmxvY2tzID0gaXRlbVsxXS5zcGxpdCgvXFxuXFxzKlxcbi8pLmZpbHRlcigocm93KSA9PiByb3cudHJpbSgpLmxlbmd0aCA+IDApO1xuXG5cdFx0XHQvLyBHZXQgbGlzdCBpdGVtc1xuXHRcdFx0YmxvY2tzLmZvckVhY2goKHBhcmFncmFwaCkgPT4ge1xuXHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHBhcmFncmFwaCBpcyBhbm90aGVyIHBsdWdpblxuXHRcdFx0XHRsZXQgdmFsaWQgPSBmYWxzZTtcblx0XHRcdFx0Ly9sZXQgbGlzdFRhZ3MgPSBwYXJhZ3JhcGgubWF0Y2goLyNbXFxwe0x9MC05X1xcLS8jXSsvZ3UpO1xuXHRcdFx0XHRsZXQgbGlzdFRhZ3MgPSBwYXJhZ3JhcGgubWF0Y2goLyg/PD1efFxccykoI1teXFxzIy4sOyE/Ol0rKS9nKTsgLy8gcmV2aXNlZCB0byBub3QgbWF0Y2ggaGFzaCBpbiBtaWRkbGUgb2Ygd29yZFxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGxpc3RUYWdzICE9IG51bGwgJiYgbGlzdFRhZ3MubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGlmICghcGFyYWdyYXBoLmNvbnRhaW5zKFwiYGBgXCIpICYmICFwYXJhZ3JhcGguY29udGFpbnMoXCItLS1cIikpIHtcblx0XHRcdFx0XHRcdHZhbGlkID0gdGhpcy5pc1ZhbGlkVGV4dChsaXN0VGFncywgdGFncywgaW5jbHVkZSwgZXhjbHVkZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbGlkKSBsaXN0UGFyYWdyYXBocy5wdXNoKHBhcmFncmFwaCk7ICBcblxuXHRcdFx0fSlcblxuXHRcdFx0Ly8gVGhlcmUgaXMgYWxzbyBzb21lIHJlZHVuZGFuY3kgaGVyZSBiZWNhdXNlIHdlIGFyZSBwcm9jZXNzaW5nIGEgbG90IG9mIGNvbnRlbnQgdGhhdCB3ZSBkb24ndCBuZWVkLCBpZiBhIG1heCBpcyBzZXQuIFxuXHRcdFx0Ly8gYWRqdXN0IHRoZSBjb3VudCBjaGVjayBcblx0XHRcdC8vIFByb2Nlc3MgZWFjaCBibG9jayBvZiB0ZXh0XG5cdFx0XHRsaXN0UGFyYWdyYXBocy5mb3JFYWNoKGFzeW5jKHBhcmFncmFwaCkgPT4ge1xuXHRcdFx0XHRpZiAoY291bnQrKyA+PSBtYXgpIHJldHVybjtcblxuXHRcdFx0XHQvLyBSZXN0b3JlIG5ld2xpbmUgYXQgdGhlIGVuZFxuXHRcdFx0XHRwYXJhZ3JhcGggKz0gXCJcXG5cIjtcblxuXHRcdFx0XHR2YXIgcmVnZXggPSBuZXcgUmVnRXhwO1xuXG5cdFx0XHRcdC8vIENoZWNrIHdoaWNoIHRhZyBtYXRjaGVzIGluIHRoaXMgcGFyYWdyYXBoLlxuXHRcdFx0XHR2YXIgdGFnVGV4dCA9IG5ldyBTdHJpbmc7XG5cdFx0XHRcdHZhciB0YWdTZWN0aW9uID0gbnVsbDtcblx0XHRcdFx0dGFncy5mb3JFYWNoKCh0YWcpID0+IHtcblx0XHRcdFx0XHR0YWdUZXh0ID0gdGFnLnJlcGxhY2UoJyMnLCAnXFxcXCMnKTtcblx0XHRcdFx0XHRyZWdleCA9IG5ldyBSZWdFeHAoYCR7dGFnVGV4dH0oXFxcXFd8JClgLCAnZycpO1xuICAgICAgICAgICAgICBcdFx0aWYgKHBhcmFncmFwaC5tYXRjaChyZWdleCkgIT0gbnVsbCkgeyBcbiAgICAgICAgICAgICAgXHRcdFx0dGFnU2VjdGlvbiA9IHRhZ1xuICAgICAgICAgICAgICBcdFx0fSBcbiAgICAgICAgICAgIFx0fSk7XG4gICAgICAgICAgXHRcdFxuICAgICAgICAgIFx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgICAgXHRcdC8vY29uc3Qgc2VsZWN0Q29udGFpbmVyID0gY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICAgIFx0XHRidXR0b25Db250YWluZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YWdzdW1tYXJ5LWJ1dHRvbnMnKVxuICAgICAgICAgIFx0XHRjb25zdCBwYXJhZ3JhcGhFbCA9IGNyZWF0ZUVsKFwiYmxvY2txdW90ZVwiKTtcblx0XHRcdFx0cGFyYWdyYXBoRWwuc2V0QXR0cmlidXRlKCdmaWxlLXNvdXJjZScsIGZpbGVQYXRoKTtcblxuXHRcdFx0XHRwYXJhZ3JhcGhFbC5zZXRBdHRyaWJ1dGUoJ2luZGV4JywgY291bnQtMSk7XG5cblx0XHRcdFx0cGFyYWdyYXBoRWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0YWctc3VtbWFyeS1wYXJhZ3JhcGgnKTtcblxuXHRcdFx0XHRjb25zdCBibG9ja0xpbmsgPSBwYXJhZ3JhcGgubWF0Y2goL1xcXltcXHB7TH0wLTlfXFwtL15dKy9ndSk7IFxuXHRcdFx0XHRsZXQgbGluaztcbiAgICAgICAgXHRcdFxuICAgICAgICBcdFx0aWYgKGJsb2NrTGluaykgbGluayA9ICdbWycgKyBmaWxlUGF0aCArICcjJyArIGJsb2NrTGluayArICd8JyArIGZpbGVOYW1lICsgJ11dJztcbiAgICAgICAgXHRcdGVsc2UgbGluayA9ICdbWycgKyBmaWxlUGF0aCArICd8JyArIGZpbGVOYW1lICsgJ11dJztcblx0XHRcdFx0XHRcdFxuXG4gICAgXHRcdFx0LypidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VCbG9ja1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Y291bnQtMVxuXHRcdFx0XHRcdClcblx0XHRcdFx0KTsqL1xuXG5cdFx0XHRcdC8vaWYgKHNlY3Rpb25zLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIFx0XHQvKmlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVUYWdCdG4gPT0gJ2Fsd2F5cycgXG4gICAgICAgIFx0XHRcdHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0biA9PSAnZGVza3RvcCcgJiYgIXRoaXMuYXBwLmlzTW9iaWxlXG4gICAgICAgIFx0XHRcdHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0biA9PSAnbW9iaWxlJyAmJiB0aGlzLmFwcC5pc01vYmlsZVxuICAgICAgICBcdFx0XHQpXG4gICAgICAgIFx0XHRcdCovXG4gICAgICAgIFx0XHQvL2lmIChVdGlscy5wbGF0Zm9ybVNldHRpbmdDaGVjayAodGhpcy5hcHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0bikpIHtcblxuXHRcdFx0XHRcdGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmd1aS5tYWtlQ29weVRvU2VjdGlvbihcblx0XHRcdFx0XHRcdFx0dGhpcy5jb3B5VG9CdG5IYW5kbGVyLmJpbmQodGhpcyksXG5cdFx0XHRcdFx0XHRcdHBhcmFncmFwaCwgXG5cdFx0XHRcdFx0XHRcdHNlY3Rpb25zLCBcblx0XHRcdFx0XHRcdFx0dGFncyxcblx0XHRcdFx0XHRcdFx0KGJsb2NrTGluayA/IChmaWxlUGF0aCArICcjJyArIGJsb2NrTGlua1swXSkgOiBmaWxlUGF0aCksIFxuXHRcdFx0XHRcdFx0XHRwYXJhZ3JhcGhFbCwgXG5cdFx0XHRcdFx0XHRcdHN1bW1hcnlDb250YWluZXJcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHQvL31cblx0XHRcdFx0aWYgKFV0aWxzLnBsYXRmb3JtU2V0dGluZ0NoZWNrICh0aGlzLmFwcCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29weVRvQ0JCdG4pKSB7XG5cblx0XHRcdFx0XHRidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5ndWkubWFrZUNvcHlCdXR0b24oXG5cdFx0XHRcdFx0XHRcdHRoaXMuY29weUJ0bkhhbmRsZXIuYmluZCh0aGlzKSxcblx0XHRcdFx0XHRcdFx0cGFyYWdyYXBoLnRyaW0oKVxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0fVxuLy9jb25zb2xlLmxvZyhVdGlscy5wbGF0Zm9ybVNldHRpbmdDaGVjayAodGhpcy5hcHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0bikpXG5cdFx0XHRcdGlmIChVdGlscy5wbGF0Zm9ybVNldHRpbmdDaGVjayAodGhpcy5hcHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVRhZ0J0bikpIHtcblxuXHRcdFx0XHRcdGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmd1aS5tYWtlUmVtb3ZlVGFnQnV0dG9uKFxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbW92ZVRhZ0J0bkhhbmRsZXIuYmluZCh0aGlzKSxcblx0XHRcdFx0XHRcdFx0cGFyYWdyYXBoRWwsIFxuXHRcdFx0XHRcdFx0XHR0YWdTZWN0aW9uLy8sIFxuXHRcdFx0XHRcdFx0XHQvLyhibG9ja0xpbmsgPyAoZmlsZVBhdGggKyAnIycgKyBibG9ja0xpbmtbMF0pIDogZmlsZVBhdGgpXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHR9XG5cblxuICAgICAgICBcdFx0Y29uc3QgbWRQYXJhZ3JhcGggPSBwYXJhZ3JhcGg7XG4gICAgICAgIFx0XHRwYXJhZ3JhcGggPSAnKionICsgbGluayArICcqKlxcbicgKyBwYXJhZ3JhcGg7XG4gICAgICAgICAgXHRcdHN1bW1hcnkgKz0gcGFyYWdyYXBoICsgJ1xcbic7IFxuXG4gICAgICAgICAgXHRcdHBhcmFncmFwaEVsLnNldEF0dHJpYnV0ZSgnbWQtc291cmNlJywgbWRQYXJhZ3JhcGgpOyBcbiAgICAgICAgICBcdFx0YmxvY2tzLnB1c2gobWRQYXJhZ3JhcGgpXG4vL2NvbnNvbGUubG9nKG1kUGFyYWdyYXBoLCAnXFxuLS0tLS1cXG4nLCBwYXJhZ3JhcGgpXG4vL2NvbnNvbGUubG9nKGFjdGl2ZUZpbGUucGF0aClcblxuXG5cbi8qY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpIC8vIHVzaW5nIGBjcmVhdGVFbGVtZW50YCBpbnN0ZWFkIG9mIGBjcmVhdGVFbGAgdG8gYXZvaWQgYXBwZW5kaW5nIHRvIHRoZSBET01cbmNvbnN0IGNvbXAgPSBuZXcgQ29tcG9uZW50KClcbi8vIEB0cy1leHBlY3QtZXJyb3IgYG9ic2lkaWFuYCBwYWNrYWdlIG5vdCB5ZXQgdXBkYXRlZFxuYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIFwiIVtbZXhhbXBsZS5wbmddXVwiLCBlbCwgXCJcIiwgY29tcClcbmNvbXAubG9hZCgpIC8vIGxvYWRzIGVtYmVkc1xuY29uc29sZS5sb2coZWwuY2xvbmVOb2RlKHRydWUpKSAvLyBkbyBzb21ldGhpbmcgd2l0aCBlbFxuY29tcC51bmxvYWQoKSAvLyB3aGVuIGRvbmUgd2l0aCBpdCB0byByZWxlYXNlIHJlc291cmNlc1xuKi9cbmF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMuYXBwLCBwYXJhZ3JhcGgsIHBhcmFncmFwaEVsLCBcIlwiLCB0ZW1wQ29tcG9uZW50KVxuXG5cbiAgICAgICAgICBcdFx0Lyphd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKFxuICAgICAgICAgIFx0XHRcdHBhcmFncmFwaCwgXG4gICAgICAgICAgXHRcdFx0cGFyYWdyYXBoRWwsIFxuICAgICAgICAgIFx0XHRcdGFjdGl2ZUZpbGUucGF0aCxcbiAgICAgICAgICBcdFx0XHQvL2ZpbGVQYXRoLCAvLycnLCBcbiAgICAgICAgICBcdFx0XHR0ZW1wQ29tcG9uZW50XG4gICAgICBcdFx0XHQpOyovXG5cbi8vY29uc29sZS5sb2coJ21hcmtkb3duIHJlbmRlciBzdW1tYXJ5JylcbiAgICAgICAgICBcdFx0XG4gICAgICAgICAgXHRcdGNvbnN0IHRpdGxlRWwgPSBjcmVhdGVFbCgnc3BhbicpO1xuICAgICAgICAgIFx0XHR0aXRsZUVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGFnc3VtbWFyeS1pdGVtLXRpdGxlJyk7XG5cbiAgICAgICAgICBcdFx0Ly8gTm90IGRvaW5nIHRoaXMgdW50aWwvd2hlbi9pZiB3ZSBldmVyIGNsZWFuIHVwIGFsbCB0aGUgY29weVRvIG1ldGhvZHNcbiAgICAgICAgICBcdFx0Ly8gYXMgZGVzY3JpYmVkIGluIHRoZSBnZXRTZWxlY3Rpb24gbWV0aG9kLlxuXHRcdFx0XHQvKnRpdGxlRWwuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VCbG9ja1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0cGFyc2VJbnQgKHBhcmFncmFwaEVsLmdldEF0dHJpYnV0ZSgnaW5kZXgnKSlcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCk7Ki9cblxuICAgICAgICAgIFx0XHR0aXRsZUVsLmFwcGVuZENoaWxkKHBhcmFncmFwaEVsLnF1ZXJ5U2VsZWN0b3IoJ3N0cm9uZycpLmNsb25lTm9kZSh0cnVlKSlcblx0Ly9jb25zb2xlLmxvZyhwYXJhZ3JhcGhFbC5vdXRlckhUTUwpXG4gICAgICAgICAgXHRcdC8vaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ1N1bW1hcnlCbG9ja0J1dHRvbnMpIFxuICAgICAgICAgIFx0XHRcdHBhcmFncmFwaEVsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgICAgICAgXHRcdHBhcmFncmFwaEVsLnF1ZXJ5U2VsZWN0b3IoJ3N0cm9uZycpLnJlcGxhY2VXaXRoKHRpdGxlRWwpXG4gICAgICAgICAgXHRcdC8vcGFyYWdyYXBoRWwuc2V0QXR0cmlidXRlKCdtZC1zb3VyY2UnLCBtZFBhcmFncmFwaClcblxuICAgICAgICAgIFx0XHRzdW1tYXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKHBhcmFncmFwaEVsKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcblx0XHRcblx0XHQvLyBBZGQgU3VtbWFyeVxuXHRcdGlmIChzdW1tYXJ5ICE9ICcnKSB7XG5cdFx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsgXG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3VtbWFyeUJ1dHRvbnMpIHtcblx0XHRcdFx0XHRzdW1tYXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKFxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VTdW1tYXJ5UmVmcmVzaEJ1dHRvbihcblx0XHRcdFx0XHRcdFx0c3VtbWFyeUNvbnRhaW5lclxuXHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdCk7XG5cdCAgICAgICAgXHRcdHN1bW1hcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoXG5cdCAgICAgICAgXHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VDb3B5U3VtbWFyeUJ1dHRvbihcblx0ICAgICAgICBcdFx0XHRcdHN1bW1hcnlcbiAgICAgICAgXHRcdFx0XHQpXG4gICAgICAgIFx0XHRcdCk7XG5cdCAgICAgICAgXHRcdHN1bW1hcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoXG5cdCAgICAgICAgXHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VTdW1tYXJ5Tm90ZUJ1dHRvbihcblx0ICAgICAgICBcdFx0XHRcdHRoaXMubWFrZVN1bW1hcnlCdG5IYW5kbGVyLmJpbmQodGhpcyksXG5cdCAgICAgICAgXHRcdFx0XHRzdW1tYXJ5LCBcblx0ICAgICAgICBcdFx0XHRcdHRhZ3NcbiAgICAgICAgXHRcdFx0XHQpXG4gICAgICAgIFx0XHRcdCk7XG5cdCAgICAgICAgXHRcdHN1bW1hcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoXG5cdCAgICAgICAgXHRcdFx0dGhpcy5wbHVnaW4uZ3VpLm1ha2VCYWtlQnV0dG9uKFxuXHQgICAgICAgIFx0XHRcdFx0dGhpcy5iYWtlU3VtbWFyeUJ0bkhhbmRsZXIuYmluZCh0aGlzKSxcblx0ICAgICAgICBcdFx0XHRcdHN1bW1hcnksIFxuXHQgICAgICAgIFx0XHRcdFx0c3VtbWFyeUNvbnRhaW5lciwgXG5cdCAgICAgICAgXHRcdFx0XHRhY3RpdmVGaWxlLnBhdGhcbiAgICAgICAgXHRcdFx0XHQpXG4gICAgICAgIFx0XHRcdCk7XG5cblx0ICAgICAgICBcdFx0c3VtbWFyeUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbCgnYnInKSk7IFxuXHRcdFx0XHR9IFxuXHRcdFx0XHQvL3N1bW1hcnlDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWwoJ2hyJykpOyBcblx0XHRcdH0sIDApO1xuXHRcdFx0c3VtbWFyeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXG5cdFx0XHRcdCdjb2RlYmxvY2stdGFncycsIFxuXHRcdFx0XHR0YWdzLmpvaW4oJywnKVxuXHRcdFx0KTtcblx0XHRcdHN1bW1hcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnY29kZWJsb2NrLXRhZ3MtaW5jbHVkZScsIFxuXHRcdFx0XHQoKGluY2x1ZGUubGVuZ3RoID4gMCkgPyBpbmNsdWRlLmpvaW4oJywnKSA6ICcnKVxuXHRcdFx0KTtcblx0XHRcdHN1bW1hcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnY29kZWJsb2NrLXRhZ3MtZXhjbHVkZScsIFxuXHRcdFx0XHQoKGV4Y2x1ZGUubGVuZ3RoID4gMCkgPyBleGNsdWRlLmpvaW4oJywnKSA6ICcnKVxuXHRcdFx0KTtcblx0XHRcdHN1bW1hcnlDb250YWluZXIuc2V0QXR0cmlidXRlKFxuXHRcdFx0XHQnY29kZWJsb2NrLXNlY3Rpb25zJywgXG5cdFx0XHRcdCgoc2VjdGlvbnMubGVuZ3RoID4gMCkgPyBzZWN0aW9ucy5qb2luKCcsJykgOiAnJylcblx0XHRcdCk7XG5cdFx0XHRzdW1tYXJ5Q29udGFpbmVyLnNldEF0dHJpYnV0ZShcblx0XHRcdFx0J2NvZGVibG9jay1tYXgnLCBcblx0XHRcdFx0bWF4XG5cdFx0XHQpO1xuXHRcdFx0c3VtbWFyeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXG5cdFx0XHRcdCdjb2RlYmxvY2stY29kZScsIFxuXHRcdFx0XHRtZFNvdXJjZVxuXHRcdFx0KTtcblxuXHRcdFx0ZWxlbWVudC5yZXBsYWNlV2l0aChzdW1tYXJ5Q29udGFpbmVyKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jcmVhdGVFbXB0eShcblx0XHRcdFx0ZWxlbWVudCwgXG5cdFx0XHRcdHRhZ3MgPyB0YWdzIDogW10sIFxuXHRcdFx0XHRpbmNsdWRlID8gaW5jbHVkZSA6IFtdLCBcblx0XHRcdFx0ZXhjbHVkZSA/IGV4Y2x1ZGUgOiBbXSwgXG5cdFx0XHRcdHNlY3Rpb25zID8gc2VjdGlvbnMgOiBbXSwgXG5cdFx0XHRcdG1heCA/IG1heCA6IFtdLCBcblx0XHRcdFx0JycsIFxuXHRcdFx0XHRtZFNvdXJjZVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGUgKFxuXHRcdHN1bW1hcnlFbDpIVE1MRWxlbWVudFxuXHQpOiB2b2lkIHtcblx0XHRcblx0XHRjb25zdCB0YWdzU3RyID0gc3VtbWFyeUVsLmdldEF0dHJpYnV0ZShcblx0XHRcdCdjb2RlYmxvY2stdGFncydcblx0XHQpO1xuXHRcdGNvbnN0IHRhZ3MgPSB0YWdzU3RyID8gdGFnc1N0ci5zcGxpdCgnLCcpIDogW107XG5cblx0XHRjb25zdCB0YWdzSW5jbHVkZVN0ciA9IHN1bW1hcnlFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLXRhZ3MtaW5jbHVkZSdcblx0XHQpO1xuXHRcdGNvbnN0IHRhZ3NJbmNsdWRlID0gdGFnc0luY2x1ZGVTdHIgPyB0YWdzSW5jbHVkZVN0ci5zcGxpdCgnLCcpIDogW107XG5cblx0XHRjb25zdCB0YWdzRXhjbHVkZVN0ciA9IHN1bW1hcnlFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLXRhZ3MtZXhjbHVkZSdcblx0XHQpO1xuXHRcdGNvbnN0IHRhZ3NFeGNsdWRlID0gdGFnc0V4Y2x1ZGVTdHIgPyB0YWdzRXhjbHVkZVN0ci5zcGxpdCgnLCcpIDogW107XG5cblx0XHRjb25zdCBzZWN0aW9uc1N0ciA9IHN1bW1hcnlFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLXNlY3Rpb25zJ1xuXHRcdFx0KTtcblx0XHRjb25zdCBzZWN0aW9ucyA9IHNlY3Rpb25zU3RyID8gc2VjdGlvbnNTdHIuc3BsaXQoJywnKSA6IFtdO1xuXG5cdFx0Y29uc3QgbWF4ID0gTnVtYmVyKHN1bW1hcnlFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnY29kZWJsb2NrLW1heCdcblx0XHQpKTtcblxuXHRcdGNvbnN0IG1kU291cmNlID0gc3VtbWFyeUVsLmdldEF0dHJpYnV0ZShcblx0XHRcdCdjb2RlYmxvY2stY29kZSdcblx0XHQpO1xuXG5cdFx0dGhpcy5jcmVhdGUoXG5cdFx0XHRzdW1tYXJ5RWwsIFxuXHRcdFx0dGFncywgXG5cdFx0XHR0YWdzSW5jbHVkZSwgXG5cdFx0XHR0YWdzRXhjbHVkZSwgXG5cdFx0XHRzZWN0aW9ucywgXG5cdFx0XHRtYXgsIFxuXHRcdFx0JycsIFxuXHRcdFx0bWRTb3VyY2UpO1xuXHR9XG5cblxuXHQvLyBOb3QgZmFjdG9yZWQgeWV0XG5cdGFzeW5jIGNvcHlUZXh0VG9TZWN0aW9uKFxuXHQgICAgdGV4dDogc3RyaW5nLCBcblx0ICAgIHNlY3Rpb246IHN0cmluZywgXG5cdCAgICBmaWxlUGF0aDogc3RyaW5nLFxuXHQgICAgYWRkTGluazogQm9vbGVhbiA9IHRydWUsXG5cdCAgICBzZWxlY3RlZEZpbGU6IFRGaWxlLFxuXHQgICAgZGV0ZWN0UHJlZml4OiBCb29sZWFuID0gdHJ1ZSlcblx0OlByb21pc2U8Ym9vbGVhbj57XG5cblx0ICAgIGNvbnN0IGZpbGUgPSBzZWxlY3RlZEZpbGUgPyBzZWxlY3RlZEZpbGUgOiAoYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk7XG5cdCAgICBsZXQgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHQgICAgY29uc3QgZmlsZUNvbnRlbnRMaW5lczogc3RyaW5nW10gPSBVdGlscy5nZXRMaW5lc0luU3RyaW5nKGZpbGVDb250ZW50KTtcblx0ICAgIGNvbnN0IG1kSGVhZGluZ3MgPSBVdGlscy5nZXRNYXJrZG93bkhlYWRpbmdzKGZpbGVDb250ZW50TGluZXMpO1xuXHQgICAgbGV0IHRhcmdldExpbmU7XG5cblx0ICAgIC8vaWYgKG1kSGVhZGluZ3MubGVuZ3RoIDw9IDAgfHwgc2VjdGlvbiA9PSAnZW5kJyB8fCBzZWN0aW9uID09ICd0b3AnIHx8IHNlY3Rpb24gPT0gJ25vdGUnIHx8IHNlY3Rpb24gPT0gJ25ld05vdGUnKSB7XG4gICAgXHRpZiAobWRIZWFkaW5ncy5sZW5ndGggPD0gMCB8fCBzZWN0aW9uID09ICdlbmQnIHx8IHNlY3Rpb24gPT0gJ3RvcCcpIHtcblxuXHQgICAgXHRpZiAoc2VjdGlvbiA9PSAndG9wJykge1x0ICAgIFx0XG5cdFx0ICAgIFx0dGFyZ2V0TGluZSA9IFV0aWxzLmZpbmRGaXJzdExpbmVBZnRlckZyb250TWF0dGVyKGZpbGVDb250ZW50KVxuXHRcdCAgICBcdGlmICh0YXJnZXRMaW5lID09IDApIGZpbGVDb250ZW50ID0gJ1xcbicgKyBmaWxlQ29udGVudFxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKHRhcmdldExpbmUpXG4gICAgXHRcdC8qfSBlbHNlIGlmIChzZWN0aW9uID09ICduZXdOb3RlJykge1xuXHRcdCAgICBcdHRoaXMubWFrZVN1bW1hcnlCdG5IYW5kbGVyICh0ZXh0LCBbXSwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0ICAgIFx0cmV0dXJuIHRydWU7XG5cdFx0ICAgIFx0Ki9cblx0XHQgICAgLy99IGVsc2UgaWYgKHNlY3Rpb24gPT0gJ2VuZCcgfHwgbWRIZWFkaW5ncy5sZW5ndGggPD0gMCB8fCBzZWN0aW9uID09ICdub3RlJykge1xuXHQgICAgXHR9IGVsc2UgaWYgKHNlY3Rpb24gPT0gJ2VuZCcpIHtcblx0XHQgICAgXHR0YXJnZXRMaW5lID0gZmlsZUNvbnRlbnRMaW5lcy5sZW5ndGggLSAxO1xuXHRcdCAgICAvL30gZWxzZSBpZiAobWRIZWFkaW5ncy5sZW5ndGggPD0gMCkge1xuXHRcdCAgICB9XG5cdCAgICB9IGVsc2UgaWYgKG1kSGVhZGluZ3MubGVuZ3RoID4gMCkgeyAvLyBpZiB0aGVyZSBhcmUgYW55IGhlYWRpbmdzXG5cdCAgICAgICAgY29uc3QgaGVhZGluZ09iaiA9IG1kSGVhZGluZ3MuZmluZChoZWFkaW5nID0+IGhlYWRpbmcudGV4dC50cmltKCkgPT09IHNlY3Rpb24pO1xuXHQgICAgICAgIGlmIChoZWFkaW5nT2JqKSB7XG5cdCAgICAgICAgXHR0YXJnZXRMaW5lID0gaGVhZGluZ09iai5saW5lO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5ldyBOb3RpY2UgKGAke3NlY3Rpb259IG5vdCBmb3VuZC5gKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgY29uc3QgbGluZVByZWZpeDogU3RyaW5nID0gZGV0ZWN0UHJlZml4ID8gVXRpbHMuZ2V0TGlzdFR5cGVGcm9tTGluZU51bWJlcihmaWxlQ29udGVudCwgdGFyZ2V0TGluZSsxKSA6ICcnO1xuICAgICAgICBsZXQgZmluYWxUZXh0O1xuICAgICAgICBpZiAoYWRkTGluaykgZmluYWxUZXh0ID0gbGluZVByZWZpeCArIHRleHQgKyBgIFtbJHtmaWxlUGF0aH18XHVEODNEXHVERDE3XV1gO1xuICAgICAgICBlbHNlIGZpbmFsVGV4dCA9IGxpbmVQcmVmaXggKyB0ZXh0O1xuICAgICAgICAvL2xldCBuZXdDb250ZW50ID0gdGhpcy5pbnNlcnRUZXh0QWZ0ZXJMaW5lKHRleHQsIGZpbGVDb250ZW50LCBoZWFkaW5nT2JqLmxpbmUpO1xuICAgICAgICBsZXQgbmV3Q29udGVudCA9IFV0aWxzLmluc2VydFRleHRBZnRlckxpbmUoZmluYWxUZXh0LCBmaWxlQ29udGVudCwgdGFyZ2V0TGluZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cdH1cblxuXHRhc3luYyByZWFkRmlsZXMoXG5cdFx0bGlzdEZpbGVzOiBURmlsZVtdXG5cdCk6IFByb21pc2U8W1RGaWxlLCBzdHJpbmddW10+IHtcblx0XHRcblx0XHRsZXQgbGlzdDogW1RGaWxlLCBzdHJpbmddW10gPSBbXTtcblx0XHRmb3IgKGxldCB0ID0gMDsgdCA8IGxpc3RGaWxlcy5sZW5ndGg7IHQgKz0gMSkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IGxpc3RGaWxlc1t0XTtcblx0XHRcdGxldCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRcdGxpc3QucHVzaChbZmlsZSwgY29udGVudF0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBsaXN0O1xuXHR9XG5cblx0aXNWYWxpZFRleHQoXG5cdCAgICBsaXN0VGFnczogc3RyaW5nW10sIFxuXHQgICAgdGFnczogc3RyaW5nW10sIFxuXHQgICAgaW5jbHVkZTogc3RyaW5nW10sIFxuXHQgICAgZXhjbHVkZTogc3RyaW5nW11cblx0KTogYm9vbGVhbiB7XG5cblx0ICAgIGxldCB2YWxpZCA9IHRydWU7XG5cblx0ICAgIC8vIENoZWNrIE9SICh0YWdzKVxuXHQgICAgaWYgKHRhZ3MubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHZhbGlkID0gdmFsaWQgJiYgdGFncy5zb21lKCh2YWx1ZSkgPT4gbGlzdFRhZ3MuaW5jbHVkZXModmFsdWUpKTtcblx0ICAgIH1cblx0ICAgIC8vIENoZWNrIEFORCAoaW5jbHVkZSlcblx0ICAgIGlmIChpbmNsdWRlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB2YWxpZCA9IHZhbGlkICYmIGluY2x1ZGUuZXZlcnkoKHZhbHVlKSA9PiBsaXN0VGFncy5pbmNsdWRlcyh2YWx1ZSkpO1xuXHQgICAgfVxuXHQgICAgLy8gQ2hlY2sgTk9UIChleGNsdWRlKVxuXHQgICAgaWYgKHZhbGlkICYmIGV4Y2x1ZGUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHZhbGlkID0gIWV4Y2x1ZGUuc29tZSgodmFsdWUpID0+IGxpc3RUYWdzLmluY2x1ZGVzKHZhbHVlKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsaWQ7ICAgICAgIFxuXHR9XG5cblx0c3RhdGljIGdldFRhZ3NUb0NoZWNrRnJvbUVsIChcblx0XHR0YWdTdW1tYXJ5RWw6IEhUTUxFbGVtZW50XG5cdCk6IEFycmF5IHtcblx0XHRjb25zdCB0YWdzU3RyID0gdGFnU3VtbWFyeUVsLmdldEF0dHJpYnV0ZSgnY29kZWJsb2NrLXRhZ3MnKTtcblx0XHRjb25zdCB0YWdzID0gdGFnc1N0ciA/IHRhZ3NTdHIuc3BsaXQoJywnKSA6IFtdO1xuXHRcdGNvbnN0IHRhZ3NJbmNsdWRlU3RyID0gdGFnU3VtbWFyeUVsLmdldEF0dHJpYnV0ZSgnY29kZWJsb2NrLXRhZ3MtaW5jbHVkZScpO1xuXHRcdGNvbnN0IHRhZ3NJbmNsdWRlID0gdGFnc0luY2x1ZGVTdHIgPyB0YWdzSW5jbHVkZVN0ci5zcGxpdCgnLCcpIDogW107XG5cdFx0cmV0dXJuIHRhZ3MuY29uY2F0KHRhZ3NJbmNsdWRlKTtcblx0fVxuXG5cdGFzeW5jIGdldEZpbGUgKFxuXHRcdGVsOiBIVE1MRWxlbWVudFxuXHQpOlRGaWxlIHtcblx0XHRjb25zdCBmaWxlUGF0aCA9IGVsLmdldEF0dHJpYnV0ZSgnZmlsZS1zb3VyY2UnKTsgXG5cdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0cmV0dXJuIGZpbGU7XG5cdH1cblxuXHR1cGRhdGVTZWxlY3Rpb24gKFxuXHRcdGluZGV4OiBOdW1iZXIsIFxuXHRcdGJvb2w6IEJvb2xlYW5cblx0KTogdm9pZCB7XG5cblx0XHQvLyBJZiBpc1NlbGVjdGVkIGlzIHRydWUsIGFkZCB0aGUgaW5kZXggaWYgaXQncyBub3QgYWxyZWFkeSBpbiB0aGUgYXJyYXlcblx0XHRpZiAoYm9vbCkge1xuXHRcdCAgICBpZiAoIXRoaXMuc2VsZWN0ZWRCbG9ja3MuaW5jbHVkZXMoaW5kZXgpKSB7XG5cdFx0ICAgICAgICB0aGlzLnNlbGVjdGVkQmxvY2tzLnB1c2goaW5kZXgpO1xuXHRcdCAgICB9XG5cdFx0fSBlbHNlIHtcblx0XHQgICAgLy8gSWYgaXNTZWxlY3RlZCBpcyBmYWxzZSwgcmVtb3ZlIHRoZSBpbmRleCBmcm9tIHRoZSBhcnJheVxuXHRcdCAgICB0aGlzLnNlbGVjdGVkQmxvY2tzID0gdGhpcy5zZWxlY3RlZEJsb2Nrcy5maWx0ZXIoaXRlbUluZGV4ID0+IGl0ZW1JbmRleCAhPT0gaW5kZXgpO1xuXHRcdH1cblxuLy9jb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkQmxvY2tzKVxuXG5cdH1cblxuXG5cdGdldFNlbGVjdGVkTWFya2Rvd25CbG9ja3MgKCk6IFN0cmluZ1tdIHtcblx0XHRcblx0XHQvLyBUaGlzIGlzIHRvbyBtZXNzeSB3aXRoIGN1cnJlbnQgaW1wbG1lbnRhdGlvbi5cblx0XHQvLyBUbyBtYWtlIHRoaXMgd29yaywgd2UgbmVlZCB0byBicmVhayBvdXQgYWxsIHRoZSBjb3B5VG8sIGdldFByZWZpeCwgYWRkTGluaywgZXRjIG1ldGhvZHMvcHJvcHNcblx0XHQvLyB3ZSBuZWVkIHRvIGJlIGJ1aWxkaW5nIHRoZSBjb250ZW50IGFzIHdlIHNlbGVjdC5cblxuXHRcdC8vIG1vdmU6IEkgZG9uJ3QgdGhpbmsgd2UgY2FuIHJlbW92ZSBpbiBidWxrPyBtYXliZSBqdXN0IGRvIGl0IHdpdGhvdXQgbW90aW9uLlxuXHRcdC8vIGJha2Ugc2hvdWxkIGJlIGVhc3lcblx0XHQvLyBjb3B5LCBlYXN5XG5cdFx0Ly8gbmV3IG5vdGVcblx0XHQvLyBjb3B5IHRvOiBlYXN5LCBidXQgbmVlZCB0byBhZGQgdGhlIGJ1bGxldCB0byBlYWNoXG5cdFx0Ly8gaSBndWVzcyBsaW5rIGlzIHRoZSBzYW1lIGVhc3lcblx0fVxuXG59XG5cbmNsYXNzIFRlbXBDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuXHRkb05vdFBvc3RQcm9jZXNzID0gdHJ1ZTtcblx0b25sb2FkKCkge31cblx0b251bmxvYWQoKSB7fVxufSIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duUmVuZGVyZXIsIE1hcmtkb3duUG9zdFByb2Nlc3NvciwgZGVib3VuY2UsIE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIENvbXBvbmVudCwgVEZpbGUsIGdldEFsbFRhZ3MsIE1hcmtkb3duUHJldmlld1ZpZXcsIE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVGFnQnVkZHkgZnJvbSBcIm1haW5cIjtcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVGFnUHJvY2Vzc29yIHtcblx0YXBwOiBBcHA7IFxuXHRwbHVnaW46IFRhZ0J1ZGR5O1xuXHRwcml2YXRlIG91dE9mU3luYzogYm9vbGVhbiA9IGZhbHNlO1xuXHRkZWJvdW5jZWRQcm9jZXNzQWN0aXZlRmlsZVRhZ0VsczogRnVuY3Rpb247XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsIFxuXHRcdHBsdWdpbjogVGFnQnVkZHlcblx0KSB7XG5cblx0XHR0aGlzLmFwcCA9IGFwcDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblxuXHRcdHRoaXMuZGVib3VuY2VkUHJvY2Vzc0FjdGl2ZUZpbGVUYWdFbHMgPSBkZWJvdW5jZSh0aGlzLnByb2Nlc3NBY3RpdmVGaWxlVGFncy5iaW5kKHRoaXMpLCA1MDApXG5cblx0XHR0aGlzLmRlYm91bmNlZFByb2Nlc3NBY3RpdmVGaWxlVGFnRWxzKCk7XG5cblx0fVxuXG5cdHJlc2V0KCkge1xuLy9jb25zb2xlLmxvZygndGFnIHByb2Nlc3NvciByZXNldCcpO1xuXHRcdHRoaXMub3V0T2ZTeW5jID0gZmFsc2U7XG5cdH1cblxuXHRmaWx0ZXJBY3RpdmVGaWxlVGFnRWxzIChcblx0XHR0YWdzOiBIVE1MRWxlbWVudFtdXG5cdCk6IEFycmF5IHtcdFx0XG4vL2NvbnNvbGUubG9nKHRhZ3MubGVuZ3RoKVxuXHRcdGNvbnN0IGZpbHRlcmVkVGFnRWxlbWVudHMgPSBBcnJheS5mcm9tKHRhZ3MpLmZpbHRlcih0YWcgPT4ge1xuXG5cdFx0ICAgIC8vIEV4Y2x1ZGUgdGFncyB0aGF0IGFyZSBkZXNjZW5kYW50cyBvZiAuZnJvbnRtYXR0ZXItc2VjdGlvbi1kYXRhXG5cdFx0ICAgIC8vIFRoaXMgaXMgYSBidWcgb24gbW9iaWxlLiBNb2JpbGUgaW5jbHVkZXMgdGhlIHlhbWwgdGFncyBpbiByZW5kZXJlZCBodG1sXG5cdFx0ICAgIGlmICh0YWcuY2xvc2VzdCgnLmZyb250bWF0dGVyLXNlY3Rpb24tZGF0YScpKSByZXR1cm4gZmFsc2U7XG5cblx0XHQgICAgLy8gRXhjbHVkZSB0YWdzIHRoYXQgYXJlIGRlc2NlbmRhbnRzIG9mIC5tYXJrZG93bi1lbWJlZFxuXHRcdCAgICBpZiAodGFnLnBhcmVudEVsZW1lbnQuY2xvc2VzdCgnLm1hcmtkb3duLWVtYmVkJykpIHJldHVybiBmYWxzZTtcblxuXHRcdCAgICAvLyBFeGNsdWRlIHRhZ3MgdGhhdCBhcmUgZGVzY2VuZGFudHMgb2YgLm1hcmtkb3duLWVtYmVkXG5cdFx0ICAgIGlmICh0YWcuY2xvc2VzdCgnLm1hcmtkb3duLWVtYmVkJykpIHJldHVybiBmYWxzZTtcblxuXHRcdCAgICAvLyBFeGNsdWRlIHRhZ3MgdGhhdCBhcmUgZGVzY2VuZGFudHMgb2YgLm1hcmtkb3duLWVtYmVkXG5cdFx0ICAgIC8vaWYgKHRhZy5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoJy5pbnRlcm5hbC1lbWJlZCcpKSByZXR1cm4gZmFsc2U7XG5cblx0XHQgICAgLy8gRXhjbHVkZSB0YWdzIHRoYXQgYXJlIGRlc2NlbmRhbnRzIG9mIC5tYXJrZG93bi1lbWJlZFxuXHRcdCAgICAvL2lmICh0YWcuY2xvc2VzdCgnLmludGVybmFsLWVtYmVkJykpIHJldHVybiBmYWxzZTtcblxuXHRcdCAgICAvLyBFeGNsdWRlIHRhZ3MgdGhhdCBhcmUgZGVzY2VuZGFudHMgb2YgLnRhZy1zdW1tYXJ5LWJsb2NrXG5cdFx0ICAgIGlmICh0YWcucGFyZW50RWxlbWVudC5jbG9zZXN0KCcudGFnLXN1bW1hcnktYmxvY2snKSkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0ICAgIHJldHVybiB0cnVlO1xuXHRcdH0pO1xuXG4vL2NvbnNvbGUubG9nKGZpbHRlcmVkVGFnRWxlbWVudHMubGVuZ3RoKVxuXHRcdHJldHVybiBmaWx0ZXJlZFRhZ0VsZW1lbnRzO1xuXHR9XG5cblx0YXN5bmMgcmVuZGVyUG9zdFByb2Nlc3NvciAoXG5cdFx0ZWw6IEhUTUxFbGVtZW50LCBcblx0XHRjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcblx0KTogdm9pZCB7XHRcblx0XHRjb25zdCBwcm9jZXNzaW5nRmlsZTogVEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY3R4LnNvdXJjZVBhdGgpO1xuXHRcdGNvbnN0IGFjdGl2ZUZpbGU6IFRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRjb25zdCBhY3RpdmVGaWxlUGF0aDogc3RyaW5nID0gYWN0aXZlRmlsZT8ucGF0aDtcblx0XHRcblx0XHRjb25zdCBuYXRpdmVFbWJlZEVsOiBIVE1MRWxlbWVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcm5hbC1lbWJlZCcpO1xuXHRcdGNvbnN0IHRhZ3M6IEhUTUxFbGVtZW50W10gPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCcudGFnJyk7XG5cblx0XHRpZiAoKG5hdGl2ZUVtYmVkRWwgJiYgY3R4LnNvdXJjZVBhdGggPT0gYWN0aXZlRmlsZVBhdGgpIC8vIGVtYmVkc1xuXHRcdFx0fHwgKGN0eC5zb3VyY2VQYXRoID09IGFjdGl2ZUZpbGVQYXRoICYmIHRhZ3MubGVuZ3RoID4gMCkgLy8gYWN0aXZlIGZpbGUgdGFnc1xuXHRcdFx0fHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YWctc3VtbWFyeS1wYXJhZ3JhcGgnKSAvLyBzdW1tYXJ5IHRhZ3Ncblx0XHQpIHtcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIGNvbnNvbGUubG9nKCdUYWcgQnVkZHk6IHJlbmRlclBvc3RQcm9jZXNzb3InKTsgXG5cdFx0fVxuXHRcdGVsc2UgeyByZXR1cm47IH1cblx0XG5cdFx0aWYgKG5hdGl2ZUVtYmVkRWwpIHtcblx0XHRcdC8vdGhpcy5uYXRpdmVFbWJlZHMucHVzaChuYXRpdmVFbWJlZEVsKTtcblx0XHRcdGxldCBuYXRpdmVFbWJlZE9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyO1xuXHRcdFx0bmF0aXZlRW1iZWRPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnNMaXN0KSA9PiB7XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHRhcmdldDogSFRNTEVsZW1lbnQgPSBtdXRhdGlvbnNMaXN0WzBdLnRhcmdldDtcblx0XHRcdFx0aWYgKHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKCcudGFnJykubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdG5hdGl2ZUVtYmVkT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0XHRcdHRoaXMucHJvY2Vzc05hdGl2ZUVtYmVkKHRhcmdldCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0bmF0aXZlRW1iZWRPYnNlcnZlci5vYnNlcnZlKG5hdGl2ZUVtYmVkRWwsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuXHRcdH1cblx0XG5cdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygndGFnLXN1bW1hcnktcGFyYWdyYXBoJykpIHtcblx0XHRcdHRoaXMucHJvY2Vzc1RhZ1N1bW1hcnlQYXJhZ3JhcGgoZWwpO1xuXHRcdFx0cmV0dXJuOyBcblx0XHR9IFxuXG5cdFx0dGhpcy5kZWJvdW5jZWRQcm9jZXNzQWN0aXZlRmlsZVRhZ0VscygpO1x0XG5cdH1cblxuXHRhc3luYyBwcm9jZXNzQWN0aXZlRmlsZVRhZ3MgKFxuXHRcdC8vdGFnczogSFRNTEVsZW1lbnRbXSxcblx0KTogdm9pZCB7XHRcdFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIGNvbnNvbGUubG9nKCdUYWcgQnVkZHk6IHByb2Nlc3NpbmcgYWN0aXZlIGZpbGUgdGFncycpXHRcdFxuXG5cdFx0Y29uc3QgdmlldyA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0Y29uc3QgbW9kZSA9IHZpZXc/LmdldE1vZGUoKTtcblx0XHQvL2NvbnN0IHByZVZpZXcgPSBhd2FpdCB2aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5tYXJrZG93bi1yZWFkaW5nLXZpZXcnKTtcblx0XHRpZiAobW9kZSA9PSAncHJldmlldycpIHtcblx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuXHRcdFx0Y29uc3Qgc2VjdGlvbnMgPSB2aWV3LmN1cnJlbnRNb2RlLnJlbmRlcmVyLnNlY3Rpb25zO1xuXHRcdFx0Y29uc3QgYWN0aXZlRmlsZVRhZ0VscyA9IFtdO1xuXG5cdFx0XHRjb25zdCBhY3RpdmVGaWxlVGFncyA9IGF3YWl0IHRoaXMuZ2V0TWFya2Rvd25UYWdzKFxuXHRcdFx0XHRhY3RpdmVGaWxlLCBcblx0XHRcdFx0ZmlsZUNvbnRlbnRcblx0XHRcdCk7XG5cblx0XHRcdHNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XG5cdFx0XHRcdEFycmF5LmZyb20oc2VjdGlvbi5lbC5xdWVyeVNlbGVjdG9yQWxsKCcudGFnJykpLmZvckVhY2godGFnID0+IHtcblx0XHRcdFx0XHRhY3RpdmVGaWxlVGFnRWxzLnB1c2godGFnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gRmlsdGVyIHRhZ3MgXG5cdFx0XHRjb25zdCBmaWx0ZXJlZFRhZ0VsZW1lbnRzID0gdGhpcy5maWx0ZXJBY3RpdmVGaWxlVGFnRWxzKGFjdGl2ZUZpbGVUYWdFbHMpO1xuXHRcdFx0XG5cdFx0XHRpZiAoZmlsdGVyZWRUYWdFbGVtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHRoaXMuYXNzaWduTWFya2Rvd25UYWdzKFxuXHRcdFx0XHRcdGFjdGl2ZUZpbGVUYWdzLCBcblx0XHRcdFx0XHRmaWx0ZXJlZFRhZ0VsZW1lbnRzLCAgXG5cdFx0XHRcdFx0MCwgLy9zdGFydEluZGV4LFxuXHRcdFx0XHRcdCdhY3RpdmUnXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgcHJvY2Vzc1RhZ1N1bW1hcnlQYXJhZ3JhcGggKFxuXHRcdHBhcmFncmFwaEVsOiBIVE1MRWxlbWVudCxcblx0KTp2b2lkIHtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKSBjb25zb2xlLmxvZygnVGFnIEJ1ZGR5OiBwcm9jZXNzVGFnU3VtbWFyeVBhcmFncmFwaCcpXG5cblx0XHRjb25zdCBmaWxlUGF0aCA9IHBhcmFncmFwaEVsLmdldEF0dHJpYnV0ZSgnZmlsZS1zb3VyY2UnKTtcblx0XHRjb25zdCBtYXJrZG93bkJsb2NrID0gcGFyYWdyYXBoRWwuZ2V0QXR0cmlidXRlKCdtZC1zb3VyY2UnKS50cmltKCk7XG5cdFx0Y29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IHN0YXJ0SW5kZXggPSBmaWxlQ29udGVudC5pbmRleE9mKG1hcmtkb3duQmxvY2spO1xuXHRcdGNvbnN0IG1kVGFncyA9IHRoaXMuZ2V0TWFya2Rvd25UYWdzKFxuXHRcdFx0ZmlsZSwgXG5cdFx0XHRmaWxlQ29udGVudFxuXHRcdCk7XG5cdFx0dGhpcy5hc3NpZ25NYXJrZG93blRhZ3MoXG5cdFx0XHRtZFRhZ3MsIFxuXHRcdFx0cGFyYWdyYXBoRWwucXVlcnlTZWxlY3RvckFsbCgnLnRhZycpLCBcblx0XHRcdHN0YXJ0SW5kZXgsIFxuXHRcdFx0J3BsdWdpbi1zdW1tYXJ5J1xuXHRcdCk7XG5cdH1cblxuXHQvLyBhZGFwdCB0aGlzIG1ldGhvZCB0byB1c2UgdGhlIGNhY2hlIHRhZyBpbmZvIChsaW5lLCBvZmZzZXQsIGV0Yylcblx0Z2V0TWFya2Rvd25UYWdzIChcblx0XHRmaWxlOiBURmlsZSwgIFxuXHRcdGZpbGVDb250ZW50OiBzdHJpbmcgXG5cdCk6IEFycmF5IHtcblxuXHRcdGNvbnN0IHRhZ1Bvc2l0aW9ucyA9IFtdO1xuXHRcdGxldCBtYXRjaDtcblx0XHQvLyBPYnNpZGlhbiB0YWcgc3BlYzogaHR0cHM6Ly9oZWxwLm9ic2lkaWFuLm1kL0VkaXRpbmcrYW5kK2Zvcm1hdHRpbmcvVGFncyNUYWcrZm9ybWF0XG5cdFx0Ly9jb25zdCByZWdleCA9IC8oPzpefFxccykjW15cXHMjXSt8YGBgL2c7IC8vIEJVRzogd3JvbmcgbWF0Y2guaW5kZXguIG1hdGNoZXMgdGhlIHNwYWNlIGJlZm9yZSB0aGUgdGFnLlxuXHRcdC8vY29uc3QgcmVnZXggPSAvKD88PV58XFxzKSNbXlxccyNdK3xgYGAvZyAvLyBGSVguIEJ1dCBzdGlsbCBtYXRjaGluZyBwdW5jdHVhdGlvbiBhZnRlclxuXHRcdC8vY29uc3QgcmVnZXggPSAvKD88PV58XFxzKSgjW15cXHMjLiw7IT86XSspKD89Wy4sOyE/Olxcc118JCl8YGBgL2cgIC8vIG1hdGNoZXMgcHVuY3R1YXRpb24gYWZ0ZXIsIGJ1dCBub3QgaW5jbHVkZWQgaW4gdGhlIG1hdGNoXG5cdFx0Ly9jb25zdCByZWdleCA9IC8oPzw9XnxcXHMpKCNbXlxccyMuLDshPzpdKykoPz1bLiw7IT86XFxzXXwkKXwoPzwhYClgYGAoPyFgKS9nOyAvLyBGaXggZm9yIG1hdGNoaW5nIGBgYGAgXG5cdFx0Ly9jb25zdCByZWdleCA9IC8oPzw9XnxcXHMpKCNbXlxccyMuJyw7IT86XSspKD89Wy4sOyE/OidcXHNdfCQpfCg/PCFgKWBgYCg/IWApL2c7IC8vIEZpeCBmb3IgbWF0Y2hpbmcgYnV0IGV4Y2x1ZGluZyAnJ3MnIGluICcjdGFnJ3MnXG5cdFx0Y29uc3QgcmVnZXggPSAvKD88PV58XFxzKSgjKD89W15cXHMjLidcdTIwMTksOyE/Ol0qW15cXGRcXHMjLidcdTIwMTksOyE/Ol0pW15cXHMjLidcdTIwMTksOyE/Ol0rKSg/PVsuLDshPzonXHUyMDE5XFxzXXwkKXwoPzwhYClgYGAoPyFgKS9nOyAvLyBmaXggZm9yIG51bWJlci1vbmx5IGFuZCB0eXBvZ3JhcGhpYyBhcG9zdHJvcGh5J3NcblxuXG5cblx0XHRsZXQgaW5zaWRlQ29kZUJsb2NrID0gZmFsc2U7XG5cblx0XHR3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XG5cdFx0ICAgIGlmIChtYXRjaFswXS50cmltKCkgPT09IFwiYGBgXCIpIHtcblx0XHQgICAgICAgIGluc2lkZUNvZGVCbG9jayA9ICFpbnNpZGVDb2RlQmxvY2s7IFxuXHRcdCAgICAgICAgY29udGludWU7IC8vIFJlamVjdCBpZiB0YWcgaW4gYSBjb2RlIGJsb2NrXG5cdFx0ICAgIH1cdCAgICBcblx0XHQgICAgaWYgKGluc2lkZUNvZGVCbG9jaykgY29udGludWU7XG5cdFx0ICAgIGNvbnN0IHRhZyA9IG1hdGNoWzBdLnRyaW0oKTtcblx0XHQgICAgdGFnUG9zaXRpb25zLnB1c2goe3RhZzp0YWcsIGluZGV4Om1hdGNoLmluZGV4LCBzb3VyY2U6ZmlsZS5uYW1lfSk7IFxuLy9jb25zb2xlLmxvZyh0YWcpXG5cdFx0fVxuXHRcdHJldHVybiB0YWdQb3NpdGlvbnM7XG5cdH1cblxuXHRhc3luYyBhc3NpZ25NYXJrZG93blRhZ3MgKFxuXHRcdHRhZ1Bvc2l0aW9uczpBcnJheSwgXG5cdFx0dGFnRWxlbWVudHM6IEhUTUxFbGVtZW50W10sXG5cdFx0c3RhcnRJbmRleDogbnVtYmVyLCBcblx0XHR0eXBlOiBzdHJpbmdcblx0KTogSFRNTEVsZW1lbnRbXSB7XG5cdFx0aWYgKHR5cGUgPT0gJ2FjdGl2ZScpIHtcblx0XHRcdC8vY29uc29sZS5sb2coc3RhcnRJbmRleCk7XG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKSB7XG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGVQYXRoID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5wYXRoO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0YWdQb3NpdGlvbnMubGVuZ3RoLCB0YWdFbGVtZW50cy5sZW5ndGgpIFxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKHRhZ1Bvc2l0aW9ucywgdGFnRWxlbWVudHMsIHRoaXMudGFnRmlsZU1hbmFnZXIuZ2V0VGFncyhhY3RpdmVGaWxlUGF0aCkpIFxuXHRcdFx0XHRjb25zdCB0ZW1wMSA9IFtdO1xuXHRcdFx0XHR0YWdQb3NpdGlvbnMuZm9yRWFjaChub2RlT2JqID0+IHsgdGVtcDEucHVzaChub2RlT2JqLnRhZykgfSk7XG5cdFx0XHRcdGNvbnN0IHRlbXAyID0gW107XG5cdFx0XHRcdHRhZ0VsZW1lbnRzLmZvckVhY2gobm9kZU9iaiA9PiB7IHRlbXAyLnB1c2gobm9kZU9iai5pbm5lclRleHQpIH0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZyh0ZW1wMSwgdGVtcDIpXG5cdFx0XHRcdC8vaWYgKHRhZ1Bvc2l0aW9ucy5sZW5ndGggIT0gdGFnRWxlbWVudHMubGVuZ3RoIHx8IHRhZ1Bvc2l0aW9ucy5sZW5ndGggIT0gdGhpcy50YWdGaWxlTWFuYWdlci5nZXRUYWdzKGFjdGl2ZUZpbGVQYXRoKS5sZW5ndGgpIHtcdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRhZ1Bvc2l0aW9ucy5sZW5ndGggIT0gdGFnRWxlbWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdHRoaXMub3V0T2ZTeW5jID0gdHJ1ZTtcblx0XHRcdFx0bmV3IE5vdGljZSgnVGFnIEJ1ZGR5OiBNYXJrZG93biBzb3VyY2UgYW5kIHByZXZpZXcgdGFncyBvdXQgb2Ygc3luYy4gVHJ5IHJlZnJlc2hpbmcgdGhpcyBzdW1tYXJ5LiBUaGVuIGNoZWNrIGZvciB0YWcgc3ludGF4IGVycm9ycyBvciBjb25mbGljdHMgaW4gbWV0YWRhdGEuIFBsZWFzZSByZXBvcnQgaWYgdGhpcyBlcnJvciBwZXJzaXN0cy4nLDEwMDAwKTtcblx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSkgdGhpcy5sb2dEaWZmZXJlbmNlcyh0YWdQb3NpdGlvbnMsIHRhZ0VsZW1lbnRzKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IHRhZ0VsO1xuXHRcdGNvbnN0IHRhZ0VsQXJyYXkgPSBBcnJheS5mcm9tKHRhZ0VsZW1lbnRzKTsgXG5cdFx0bGV0IHRhZ0VsSW5kZXggPSAwO1xuXHRcdGxldCB0YWdQb3M7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0YWdQb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHQvL3RhZ1Bvc2l0aW9ucy5mb3JFYWNoKCh0YWdQb3MsIGkpID0+IHtcblx0XHRcdHRhZ1BvcyA9IHRhZ1Bvc2l0aW9uc1tpXTtcbi8vY29uc29sZS5sb2codGFnRWxBcnJheVt0YWdFbEluZGV4XSlcblx0XHRcdGlmICh0YWdQb3MuaW5kZXggPj0gc3RhcnRJbmRleCkge1xuXHRcdFx0XHR0YWdFbCA9IHRhZ0VsQXJyYXlbdGFnRWxJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmICh0YWdFbCkge1xuLy9jb25zb2xlLmxvZyh0YWdFbCwgdGFnUG9zaXRpb25zW2ldLnRhZywgdGFnUG9zaXRpb25zW2ldLmluZGV4KTtcblx0XHRcdFx0XHRpZiAodGFnRWwuaW5uZXJUZXh0LnRyaW0oKSA9PSB0YWdQb3MudGFnLnRyaW0oKSkge1xuXHRcdCAgICBcdFx0XHR0YWdFbC5zZXRBdHRyaWJ1dGUoJ21kLWluZGV4JywgdGFnUG9zLmluZGV4KTtcblx0XHQgICAgXHRcdFx0dGFnRWwuc2V0QXR0cmlidXRlKCdmaWxlLXNvdXJjZScsIHRhZ1Bvcy5zb3VyY2UpO1xuXHRcdCAgICBcdFx0XHR0YWdFbC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCB0eXBlKTtcblx0XHQgICAgXHRcdFx0dGFnRWwuc2V0QXR0cmlidXRlKCdwb3MnLCBpKTtcblx0XHQgICAgXHRcdCAgICB0YWdFbEluZGV4Kys7XG5cdFx0ICAgIFx0XHR9IGVsc2Uge1xuXHRcdCAgICBcdFx0XHR0aGlzLm91dE9mU3luYyA9IHRydWU7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdUYWcgQnVkZHk6IE1hcmtkb3duIHNvdXJjZSBhbmQgcHJldmlldyB0YWdzIG91dCBvZiBzeW5jLiBUcnkgcmVmcmVzaGluZyB0aGlzIHN1bW1hcnkuIFRoZW4gY2hlY2sgZm9yIHRhZyBzeW50YXggZXJyb3JzIG9yIGNvbmZsaWN0cyBpbiBtZXRhZGF0YS4gUGxlYXNlIHJlcG9ydCBpZiB0aGlzIGVycm9yIHBlcnNpc3RzLicpO1xuLy9jb25zb2xlLmxvZyh0YWdQb3NpdGlvbnMsIHRhZ0VsZW1lbnRzKVxuXG5cdFx0XHRcdFx0XHR0aGlzLmxvZ0RpZmZlcmVuY2VzKHRhZ1Bvc2l0aW9ucywgdGFnRWxlbWVudHMpXG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0ICAgIFx0XHR9XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9IFxuXHRcdH07XG5cdFx0XG5cdFx0cmV0dXJuIHRhZ0VsQXJyYXk7IFxuXHR9XG5cblx0YXN5bmMgcHJvY2Vzc05hdGl2ZUVtYmVkIChcblx0XHQvL3RhZ3M6IEhUTUxFbGVtZW50W10gXG5cdFx0ZW1iZWQ6IEhUTUxFbGVtZW50LFxuXHRcdGNoZWNrRHVwbGljYXRlczogYm9vbGVhbiA9IGZhbHNlXG5cdCk6dm9pZCB7XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSkgY29uc29sZS5sb2coJ1RhZyBCdWRkeTogcHJvY2Vzc05hdGl2ZUVtYmVkJylcblx0XHRlbWJlZCA9IGVtYmVkLmNsb3Nlc3QoJy5tYXJrZG93bi1lbWJlZCcpO1xuIFx0XHRpZiAoZW1iZWQ/LmdldEF0dHJpYnV0ZSgnc3JjJykpIHtcblx0XHRcdGNvbnN0IGxpbmtFbGVtZW50ID0gZW1iZWQuZ2V0QXR0cmlidXRlKCdzcmMnKTtcblx0XHRcdGxldCBmaWxlUGF0aCA9IGVtYmVkLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cdFx0XHRjb25zdCBsaW5rQXJyYXkgPSBmaWxlUGF0aC5zcGxpdCgnIycpO1xuXHRcdFx0Y29uc3QgaGFzQW5jaG9yTGluayA9IGxpbmtBcnJheS5sZW5ndGggPiAxO1xuXHRcdFx0bGV0IGFuY2hvckxpbmtUeXBlID0gJyc7XG5cdFx0XHRsZXQgYW5jaG9yTGluaztcblx0XHRcdGlmIChoYXNBbmNob3JMaW5rKSB7XG5cdFx0XHRcdGFuY2hvckxpbmsgPSBsaW5rQXJyYXlbMV07XG5cdFx0XHRcdGFuY2hvckxpbmtUeXBlID0gYW5jaG9yTGluay5zdGFydHNXaXRoKCdeJykgPyAnYmxvY2snIDogJ2hlYWRlcic7XG5cdFx0XHR9XG5cdFx0XHRmaWxlUGF0aCA9IGxpbmtBcnJheVswXS50cmltKCkgKyAnLm1kJztcblx0XHRcdGNvbnN0IGZpbGUgPSBhd2FpdCBVdGlscy52YWxpZGF0ZUZpbGVQYXRoKGZpbGVQYXRoKVx0XHRcdFxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0XHRjb25zdCBlbWJlZGVkVGFnRmlsZSA9IGF3YWl0IHRoaXMuZ2V0TWFya2Rvd25UYWdzKGZpbGUsIGZpbGVDb250ZW50KTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChoYXNBbmNob3JMaW5rICYmIGFuY2hvckxpbmtUeXBlICE9ICcnKSB7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0YW5jaG9yTGlua1R5cGUgPT0gJ2hlYWRlcicgXG5cdFx0XHRcdFx0XHQmJiAhVXRpbHMuZmlsZUNvbnRhaW5zSGVhZGluZyhmaWxlQ29udGVudCwgYW5jaG9yTGluaylcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdGVtYmVkLnNldEF0dHJpYnV0ZSgnZW1iZWQtc3VjY2VzcycsICdmYWxzZScpO1xuXHRcdFx0XHRcdFx0cmV0dXJuOyAvLyBSZWplY3QgaWYgdGhpcyBpcyBhIG5hdGl2ZSBcImNhbid0IGZpbmQgI3NlY3Rpb25cIiBlcnJvclxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbWJlZC5zZXRBdHRyaWJ1dGUoJ2VtYmVkLXN1Y2Nlc3MnLCAndHJ1ZScpO1x0XG5cdFx0XHRcdFx0fSBcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHRlbXBDb21wb25lbnQgPSBuZXcgVGVtcENvbXBvbmVudCgpO1xuXHRcdFx0XHRjb25zdCB0ZW1wQ29udGFpbmVySFRNTCA9IGNyZWF0ZUVsKFwiZGl2XCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0YXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcblx0XHRcdFx0XHRmaWxlQ29udGVudCwgXG5cdFx0XHRcdFx0dGVtcENvbnRhaW5lckhUTUwsIFxuXHRcdFx0XHRcdCdub0ZpbGUnLCAvL2ZpbGUucGF0aCwgXG5cdFx0XHRcdFx0dGVtcENvbXBvbmVudFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgaW5uZXJUZXh0ID0gYXdhaXQgZW1iZWQucXVlcnlTZWxlY3RvcignLm1hcmtkb3duLWVtYmVkLWNvbnRlbnQnKS5pbm5lclRleHQ7XG5cdFx0XHRcdGNvbnN0IHN0YXJ0SW5kZXggPSB0ZW1wQ29udGFpbmVySFRNTC5pbm5lclRleHQuaW5kZXhPZihpbm5lclRleHQpO1xuXHRcdFx0XHRcblx0XHRcdFx0dGhpcy5hc3NpZ25NYXJrZG93blRhZ3MoXG5cdFx0XHRcdFx0ZW1iZWRlZFRhZ0ZpbGUsIFxuXHRcdFx0XHRcdGVtYmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWcnKSwgXG5cdFx0XHRcdFx0c3RhcnRJbmRleCwgXG5cdFx0XHRcdFx0J25hdGl2ZS1lbWJlZCdcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRsb2dEaWZmZXJlbmNlcyh0YWdQb3NpdGlvbnM6IEFycmF5LCB0YWdFbGVtZW50czogQXJyYXkpIHtcblx0XHQvLyBFeHRyYWN0IHRhZ3MgYW5kIGlubmVyVGV4dHMgaW50byBzZXBhcmF0ZSBhcnJheXNcblxuXHRcdGNvbnN0IHRhZ3MgPSB0YWdQb3NpdGlvbnMubWFwKGl0ZW0gPT4gaXRlbS50YWcpO1xuXHRcdGNvbnN0IGlubmVyVGV4dHMxID0gdGFnRWxlbWVudHMubWFwKGl0ZW0gPT4gaXRlbS5pbm5lclRleHQpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBhcnJheXMgdG8gc3RvcmUgdW5pcXVlIGVsZW1lbnRzXG5cdFx0bGV0IHVuaXF1ZVRvVGFnUG9zaXRpb25zID0gW107XG5cdFx0bGV0IHVuaXF1ZVRvVGFnRWxlbWVudHMgPSBbXTtcblxuXHRcdC8vIEhlbHBlciBmdW5jdGlvbiB0byBmaW5kIHVuaXF1ZSBlbGVtZW50cyBpbiBvbmUgYXJyYXkgY29tcGFyZWQgdG8gb3RoZXJzXG5cdFx0Y29uc3QgZmluZFVuaXF1ZSA9IChhcnIxLCBhcnIyKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXJyMS5maWx0ZXIoaXRlbSA9PiAhYXJyMi5pbmNsdWRlcyhpdGVtKSk7XG5cdFx0fTtcblxuXHRcdHVuaXF1ZVRvVGFnUG9zaXRpb25zID0gZmluZFVuaXF1ZSh0YWdzLCBpbm5lclRleHRzMSk7XG5cdFx0dW5pcXVlVG9UYWdFbGVtZW50cyA9IGZpbmRVbmlxdWUoaW5uZXJUZXh0czEsIHRhZ3MpO1xuXG5cdFx0Y29uc29sZS5sb2coJ2RpZmZlcmVuY2VzOicsIHVuaXF1ZVRvVGFnUG9zaXRpb25zLmxlbmd0aCwgdW5pcXVlVG9UYWdFbGVtZW50cy5sZW5ndGgpO1xuXHRcdC8vIExvZyB0aGUgZGlmZmVyZW5jZXNcblx0XHRpZiAodW5pcXVlVG9UYWdQb3NpdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIlVuaXF1ZSB0byB0YWdQb3NpdGlvbnMgYmFzZWQgb24gdGFnOlwiLCB1bmlxdWVUb1RhZ1Bvc2l0aW9ucyk7XG5cdFx0fVxuXHRcdGlmICh1bmlxdWVUb1RhZ0VsZW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJVbmlxdWUgdG8gdGFnRWxlbWVudHMgYmFzZWQgb24gaW5uZXJUZXh0OlwiLCB1bmlxdWVUb1RhZ0VsZW1lbnRzKTtcblx0XHR9XG5cdH1cblxufVxuXG5jbGFzcyBUZW1wQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcblx0b25sb2FkKCkge31cblx0b251bmxvYWQoKSB7fVxufSIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duUmVuZGVyZXIsIENvbXBvbmVudCwgVEZpbGUsIGdldEFsbFRhZ3MsIE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVGFnQnVkZHkgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IFRhZ1N1bW1hcnkgfSBmcm9tICcuL1RhZ1N1bW1hcnknO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5cblxuZXhwb3J0IGNsYXNzIFJlYWRpbmdNb2RlVGFnRWRpdG9yIHtcblx0YXBwOiBBcHA7IFxuXHRwbHVnaW46IFRhZ0J1ZGR5O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLCBcblx0XHRwbHVnaW46IFRhZ0J1ZGR5KSB7XG5cblx0XHR0aGlzLmFwcCA9IGFwcDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdC8vYXN5bmMgcmVuYW1lVGFnICh0YWcsIG5ld05hbWUsIGJhdGNoQWN0aW9uOiBzdHJpbmcgfCBudW1iZXIsIHNwZWNpZmljRmlsZTpURmlsZSA9IG51bGwpIHtcblx0YXN5bmMgcmVuYW1lVGFnICh0YWcsIG5ld05hbWUsIGJhdGNoQWN0aW9uOiBzdHJpbmcgfCBudW1iZXIsIGZpbGVQYXRoOiBzdHJpbmcgPSBudWxsLCB0YWdFbDogSFRNTEVsZW1lbnQpIHtcblx0XHRcblx0XHQvL2NvbnNvbGUubG9nIChuZXdOYW1lLCBiYXRjaEFjdGlvbiwgZmlsZVBhdGgpXG5cdFxuXHRcdC8vY29uc3QgdGFnQ29udGFpbmVyVHlwZSA9IHRhZ0VsLmdldEF0dHJpYnV0ZShcblx0XHQvL1x0J3R5cGUnXG5cdFx0Ly8pO1xuXHRcdC8vY29uc3QgaW5kZXggPSB0YWdFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0Ly9cdCdtZC1pbmRleCdcblx0XHQvLyk7XG5cdFx0Ly9jb25zdCBmaWxlUGF0aCA9IHRhZ0VsLmdldEF0dHJpYnV0ZShcblx0XHQvL1x0J2ZpbGUtc291cmNlJ1xuXHRcdC8vKTtcblx0XHRcblx0XHRjb25zdCBhY3RpdmVGaWxlOiBURmlsZSA9IGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0Y29uc3QgZmlsZTogVEZpbGUgPSBmaWxlUGF0aCA9PSBudWxsID8gYWN0aXZlRmlsZSA6IGF3YWl0IFV0aWxzLnZhbGlkYXRlRmlsZVBhdGgoZmlsZVBhdGgpO1xuXHRcdFxuXHRcdGlmICghZmlsZSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgZmlsZUNvbnRlbnQ6IHN0cmluZyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdFx0Ly9jb25zdCBmaWxlOiBURmlsZSA9IGF3YWl0IFV0aWxzLnZhbGlkYXRlRmlsZVBhdGgoZmlsZVBhdGgpO1xuXG5cdFx0aWYgKHR5cGVvZiBiYXRjaEFjdGlvbiA9PT0gJ251bWJlcicpIHtcblxuICAgICAgICBcdC8vY29uc3QgZmlsZTogVEZpbGUgPSBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgICAgIFx0Ly9jb25zdCBmaWxlQ29udGVudDogU3RyaW5nID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgXHRjb25zdCBuZXdGaWxlQ29udGVudCA9IHRoaXMucmVuYW1lVGFnSW5TdHJpbmdCeUluZGV4IChcbiAgICAgICAgXHRcdHRhZyxcbiAgICAgICAgXHRcdG5ld05hbWUsXG4gICAgICAgIFx0XHRwYXJzZUludChiYXRjaEFjdGlvbiksXG4gICAgICAgIFx0XHRmaWxlQ29udGVudFxuICAgIFx0XHQpXG4gICAgXHRcdHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdGaWxlQ29udGVudCk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChiYXRjaEFjdGlvbiA9PSAnbm90ZScpIHtcblxuICAgICAgICBcdC8vY29uc3QgZmlsZTogVEZpbGUgPSBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBcdHRoaXMucmVuYW1lVGFnc0luRmlsZUJ5SW5kZXggKFxuICAgICAgICBcdFx0dGFnLFxuICAgICAgICBcdFx0bmV3TmFtZSxcbiAgICAgICAgXHRcdGZpbGVcbiAgICBcdFx0KVxuXG4gICAgXHRcdFxuICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmIChiYXRjaEFjdGlvbiA9PSAndmF1bHQnKSB7XG4gICAgICAgIFx0XG5cdCAgICBcdHRoaXMucmVuYW1lVGFnc0luVmF1bHRCeUluZGV4IChcblx0ICAgIFx0XHR0YWcsXG5cdCAgICBcdFx0bmV3TmFtZVxuXHRcdFx0KVxuXG5cdFx0XHQvL2lmIChhY3RpdmVGaWxlICE9IGZpbGUpIHtcbiAgICAgICAgXHRcdC8vdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYucmVidWlsZFZpZXcoKVxuICAgICAgICBcdFx0Ly9uZXcgTm90aWNlICgnVGFncyBoYXZlIGJlZW4gdXBkYXRlZCBpbiBleHRlcm5hbCBub3Rlcy4gUGxlYXNlIHJlZnJlc2ggdGhpcyBzdW1tYXJ5IG9yIHJlbG9hZCB0aGlzIG5vdGUuJylcbiAgICAgICAgXHQvL31cbiAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aXZlRmlsZSAhPSBmaWxlICYmIHRhZ0VsKSB7XG4gICAgICAgIFx0XHQvL3RoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmLnJlYnVpbGRWaWV3KClcbiAgICAgICAgXHRcdG5ldyBOb3RpY2UgKCdSZWZyZXNoIHRoaXMgc3VtbWFyeSB0byBzZWUgY2hhbmdlcy4nLCA1MDAwKVxuICAgICAgICBcdC8vY29uc29sZS5sb2codGFnRWwuY2xvc2VzdCgnLnRhZy1zdW1tYXJ5LWJsb2NrJykpXG4gICAgICAgIFx0Ly90aGlzLnBsdWdpbi50YWdTdW1tYXJ5LnVwZGF0ZSh0YWdFbC5jbG9zZXN0KCcudGFnLXN1bW1hcnktYmxvY2snKSk7IFxuICAgIFx0fVxuICAgICAgICBcblxuICAgIH1cblxuICAgIGFzeW5jIHJlbmFtZVRhZ3NJblZhdWx0QnlJbmRleCAodGFnLCBuZXdOYW1lKSB7XG5cbiAgICBcdGNvbnN0IHZhbGlkVGFncyA9IFt0YWddXG5cdFx0bGV0IGxpc3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuXHRcdGxpc3RGaWxlcyA9IGxpc3RGaWxlcy5maWx0ZXIoKGZpbGUpID0+IHtcblx0XHRcdC8vIFJlbW92ZSBmaWxlcyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSB0YWdzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG5cdFx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXHRcdFx0Y29uc3QgdGFnc0luRmlsZSA9IGdldEFsbFRhZ3MoY2FjaGUpO1xuXG5cdFx0XHRpZiAodmFsaWRUYWdzLnNvbWUoKHZhbHVlKSA9PiB0YWdzSW5GaWxlPy5pbmNsdWRlcyh2YWx1ZSkpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbGlzdENvbnRlbnRzOiBbVEZpbGUsIHN0cmluZ11bXSA9IGF3YWl0IHRoaXMucGx1Z2luLnRhZ1N1bW1hcnkucmVhZEZpbGVzKGxpc3RGaWxlcyk7XG4gICAgICAgIC8vIGxpc3RDb250ZW50c1tuXVswXSBpcyB0aGUgZmlsZSwgbGlzdENvbnRlbnRzW25dW1sxXSBpcyB0aGUgZmlsZSBjb250ZW50XG4gICAgICAgIFxuICAgICAgICBsaXN0Q29udGVudHMuZm9yRWFjaChhc3luYyAobm90ZSkgPT4ge1xuICAgICAgICBcdC8vdGhpcy5yZW5hbWVUYWdJbkZpbGUgKHRhZywgbmV3TmFtZSwgbm90ZVswXSk7XG4gICAgICAgIFx0dGhpcy5yZW5hbWVUYWdzSW5GaWxlQnlJbmRleCAoXG4gICAgICAgIFx0XHR0YWcsXG4gICAgICAgIFx0XHRuZXdOYW1lLFxuICAgICAgICBcdFx0bm90ZVswXVxuXHRcdFx0KVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgYXN5bmMgcmVuYW1lVGFnc0luRmlsZUJ5SW5kZXggKFxuICAgIFx0dGFnOiBTdHJpbmcsIFxuICAgIFx0bmV3TmFtZTogU3RyaW5nLCBcbiAgICBcdGZpbGU6IFRGaWxlXG5cdCk6Vm9pZCB7XG5cbiAgICBcdGNvbnN0IGZpbGVDb250ZW50OiBTdHJpbmcgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICBsZXQgbmV3RmlsZUNvbnRlbnQ6IFN0cmluZyA9IGZpbGVDb250ZW50O1xuICAgIFx0Y29uc3QgdGFnUG9zaXRpb25zID0gdGhpcy5wbHVnaW4udGFnUHJvY2Vzc29yLmdldE1hcmtkb3duVGFncyAoZmlsZSwgZmlsZUNvbnRlbnQpO1xuICAgIFx0Ly8ge3RhZzp0YWcsIGluZGV4Om1hdGNoLmluZGV4LCBzb3VyY2U6ZmlsZS5uYW1lfVxuXG4gICAgXHRsZXQgZmlsdGVyZWRUYWdPYmpzID0gdGFnUG9zaXRpb25zLmZpbHRlcih0YWdPYmogPT4gdGFnT2JqLnRhZyA9PT0gdGFnKTtcblxuICAgIFx0aWYgKGZpbHRlcmVkVGFnT2Jqcy5sZW5ndGggPiAwKSB7XG5cbiAgICBcdFx0ZmlsdGVyZWRUYWdPYmpzLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcbiAgICBcdFx0bGV0IG9mZnNldCA9IDA7XG5cdFx0ICAgIGZpbHRlcmVkVGFnT2Jqcy5mb3JFYWNoKHRhZ09iaiA9PiB7XG5cdFx0ICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIG5ldyBpbmRleCBjb25zaWRlcmluZyB0aGUgb2Zmc2V0XG5cdFx0ICAgICAgICBjb25zdCBuZXdJbmRleDogTnVtYmVyID0gdGFnT2JqLmluZGV4ICsgb2Zmc2V0O1xuXHRcdCAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFnIGF0IHRoZSBjb3JyZWN0IHBvc2l0aW9uXG5cdFx0ICAgICAgICBuZXdGaWxlQ29udGVudCA9IG5ld0ZpbGVDb250ZW50LnN1YnN0cmluZygwLCBuZXdJbmRleCkgKyBuZXdOYW1lICsgbmV3RmlsZUNvbnRlbnQuc3Vic3RyaW5nKG5ld0luZGV4ICsgdGFnT2JqLnRhZy5sZW5ndGgpO1xuXHRcdCAgICAgICAgLy9uZXdGaWxlQ29udGVudCA9IHRoaXMucmVuYW1lVGFnSW5TdHJpbmdCeUluZGV4ICh0YWcsIG5ld05hbWUsIG5ld0luZGV4LCBmaWxlQ29udGVudClcblx0XHQgICAgICAgIC8vIFVwZGF0ZSB0aGUgb2Zmc2V0IGZvciB0aGUgbmV4dCBpdGVyYXRpb25cblx0XHQgICAgICAgIG9mZnNldCArPSBuZXdOYW1lLmxlbmd0aCAtIHRhZ09iai50YWcubGVuZ3RoO1xuXHRcdCAgICB9KTtcblxuICAgIFx0XHR0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3RmlsZUNvbnRlbnQpO1xuXG4gICAgXHR9IGVsc2Uge1xuICAgIFx0XHQvL25ldyBOb3RpY2UgKCdObyB0YWdzIHRvIHJlbmFtZS4nKVxuICAgIFx0fVxuICAgIH1cblxuICAgIHJlbmFtZVRhZ0luU3RyaW5nQnlJbmRleCAoXG4gICAgXHR0YWc6IFN0cmluZywgXG4gICAgXHRuZXdOYW1lOiBTdHJpbmcsIFxuICAgIFx0aW5kZXg6IE51bWJlcixcbiAgICBcdGZpbGVDb250ZW50OiBTdHJpbmdcblx0KTpTdHJpbmcge1xuICAgIFx0Ly9jb25zb2xlLmxvZyhmaWxlQ29udGVudClcbiAgICBcdGNvbnN0IG5ld0NvbnRlbnQ6IFN0cmluZyA9IGZpbGVDb250ZW50LnN1YnN0cmluZyAoMCwgcGFyc2VJbnQoaW5kZXgpKSArIG5ld05hbWUgKyBmaWxlQ29udGVudC5zdWJzdHJpbmcoKHBhcnNlSW50KGluZGV4KSArIHBhcnNlSW50KHRhZy5sZW5ndGgpKSlcbiAgICBcdC8vY29uc29sZS5sb2cobmV3Q29udGVudClcbiAgICBcdC8vY29uc29sZS5sb2coaW5kZXggKyB0YWcubGVuZ3RoKVxuICAgIFx0cmV0dXJuIChuZXdDb250ZW50KTtcbiAgICBcdC8vdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0ZpbGVDb250ZW50KTtcblxuICAgIH1cblxuXG5cdGFzeW5jIGFkZCAoXG5cdFx0dGFnOiBzdHJpbmcsIFxuXHRcdHg6IG51bWJlciwgXG5cdFx0eTogbnVtYmVyLy8sXG5cdFx0Ly9tb2JpbGVPYmo6IE9iamVjdFxuXHQpOnZvaWQge1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIHsgY29uc29sZS5sb2coJ1RhZyBCdWRkeSBhZGQgJyArIHRhZyArICcgYXQgKCcgKyB4ICsgJywgJyArIHkgKyAnKScpOyB9XG5cblx0XHRsZXQgZmlsZUNvbnRlbnQ6IHN0cmluZztcblx0XHRsZXQgZmlsZTogVEZpbGU7XG5cdFx0Y29uc3QgY2xpY2tlZFRleHRPYmogPSBVdGlscy5nZXRDbGlja2VkVGV4dE9iakZyb21Eb2MoeCwgeSk7XG5cdFx0Y29uc3QgY2xpY2tlZFRleHQ6IHN0cmluZyA9IGNsaWNrZWRUZXh0T2JqPy50ZXh0O1xuXHRcdGNvbnN0IGNsaWNrZWRUZXh0SW5kZXg6bnVtYmVyID0gY2xpY2tlZFRleHRPYmo/LmluZGV4OyAvLyB0aGlzIGlzIHRoZSBpbmRleCBpbiBkb2N1bWVudCwgZm9yIG5hcnJvd2luZyBkb3duIHRvIHRoZSBjbGlja2VkIHdvcmQuXG5cdFx0Y29uc3QgY2xpY2tlZFRleHRFbDogSFRNTEVsZW1lbnQgPSBjbGlja2VkVGV4dE9iaj8uZWw7XG5cdFx0bGV0IGNvbnRlbnRTb3VyY2VUeXBlOiBzdHJpbmcgPSBudWxsXG5cdFx0bGV0IHN1bW1hcnlFbDogSFRNTEVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdFx0bGV0IGVtYmVkRWw6IEhUTUxFbGVtZW50ID0gdW5kZWZpbmVkO1xuXG4vL2NvbnNvbGUubG9nKGNsaWNrZWRUZXh0T2JqKVx0XHRcblx0XHRpZiAoY2xpY2tlZFRleHRPYmopIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN1bW1hcnlFbCA9IGNsaWNrZWRUZXh0RWw/LmNsb3Nlc3QoJy50YWctc3VtbWFyeS1wYXJhZ3JhcGgnKTtcblx0XHRcdFx0ZW1iZWRFbCA9IGNsaWNrZWRUZXh0RWw/LmNsb3Nlc3QoJy5tYXJrZG93bi1lbWJlZCcpO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzdW1tYXJ5RWwpIHtcbi8vY29uc29sZS5sb2coJ2lzIHN1bW1hcnknKVxuXHRcdFx0XHRmaWxlID0gYXdhaXQgdGhpcy5wbHVnaW4udGFnU3VtbWFyeS5nZXRGaWxlKHN1bW1hcnlFbCk7XG5cdFx0XHRcdGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdFx0Y29udGVudFNvdXJjZVR5cGUgPSAncGx1Z2luLXN1bW1hcnknO1xuXHRcdFx0XHRcblx0XHRcdH0gZWxzZSBpZiAoZW1iZWRFbCkge1xuLy9jb25zb2xlLmxvZygnaXMgZW1iZWQnKVxuXHRcdFx0XHRmaWxlID0gYXdhaXQgVXRpbHMuZ2V0RW1iZWRGaWxlKGVtYmVkRWwpO1xuXHRcdFx0XHRmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdFx0XHRcdGNvbnRlbnRTb3VyY2VUeXBlID0gJ25hdGl2ZS1lbWJlZCc7XG5cblx0XHRcdH0gZWxzZSB7IFxuLy9jb25zb2xlLmxvZygnaXMgYWN0aXZlIGZpbGUnKVxuXHRcdFx0XHRmaWxlID0gYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0XHRjb250ZW50U291cmNlVHlwZSA9ICdhY3RpdmUnO1xuXHRcdFx0fSBcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgTm90aWNlICgnXHUyNkEwXHVGRTBGIENhblxcJ3QgZmluZCB0ZXh0IHBvc2l0aW9uIG9yIGFyZWEgdG9vIGJ1c3kuXFxuVHJ5IGEgYW5vdGhlciB0ZXh0IGFyZWEuJyk7XG5cdFx0ICAgIHJldHVybjtcblx0XHR9XG5cblxuXHRcdGlmIChjbGlja2VkVGV4dCkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyAoY2xpY2tlZFRleHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgTm90aWNlICgnXHUyNkEwXHVGRTBGIENhblxcJ3QgYWRkIHRhZy5cXG5UcnkgYSBkaWZmZXJlbnQgdGV4dCBhcmVhLicpXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgZXNjYXBlZENsaWNrZWRUZXh0ID0gVXRpbHMuZXNjYXBlUmVnRXhwKGNsaWNrZWRUZXh0KTtcblx0XHRjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlZENsaWNrZWRUZXh0LCBcImdcIik7ICBcblx0XHRjb25zdCBtYXRjaGVzID0gZmlsZUNvbnRlbnQubWF0Y2gocmVnZXgpO1xuXG5cdFx0aWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPiAxKSB7XG5cdFx0ICAgIG5ldyBOb3RpY2UgKCdcdTI2QTBcdUZFMEYgQ2FuXFwndCBhZGQgdGFnOiBDbGlja2VkIHRleHQgcmVwZWF0ZWQgaW4gbm90ZS4gVHJ5IGEgYW5vdGhlciB0ZXh0IGJsb2NrLicpO1xuXHRcdCAgICByZXR1cm47XG5cblx0XHR9IGVsc2UgaWYgKChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID09PSAwKSB8fCAhbWF0Y2hlcykge1xuXHRcdFx0bmV3IE5vdGljZSAoJ1x1MjZBMFx1RkUwRiBDYW5cXCd0IGZpbmQgdGV4dCBwb3NpdGlvbiBvciBhcmVhIHRvbyBidXN5LlxcblRyeSBhIGFub3RoZXIgdGV4dCBhcmVhLicpO1xuXHRcdCAgICByZXR1cm47XG5cdFx0fSBcblxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubG9ja1JlY2VudFRhZ3MpIHRoaXMucGx1Z2luLnNhdmVSZWNlbnRUYWcodGFnKTsgXG5cdFx0XG5cdFx0Y29uc3Qgc3RhcnRJbmRleCA9IHJlZ2V4LmV4ZWMoZmlsZUNvbnRlbnQpLmluZGV4OyAvLyB0aGlzIGlzIHRoZSBpbmRleCBpbiB0aGUgbWQgc291cmNlXG5cdFx0Y29uc3QgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgY2xpY2tlZFRleHQubGVuZ3RoOyAvLyB1c2UgdGhpcyB0byBhZGQgdGFnIGF0IGVuZCBvZiBibG9ja1xuXG5cdFx0Y29uc3QgY2xpY2tlZFdvcmRPYmogPSBVdGlscy5nZXRXb3JkT2JqRnJvbVN0cmluZyAoY2xpY2tlZFRleHQsIGNsaWNrZWRUZXh0SW5kZXgpO1xuXHRcdGNvbnN0IGNsaWNrZWRXb3JkID0gY2xpY2tlZFdvcmRPYmoudGV4dDtcblx0XHRjb25zdCBjbGlja2VkV29yZEluZGV4ID0gY2xpY2tlZFdvcmRPYmouaW5kZXg7XG5cdFx0bGV0IG5ld0NvbnRlbnQ7XG5cblx0XHRpZiAoY2xpY2tlZFdvcmQpIHtcblx0XHRcdGlmIChVdGlscy5pc1dvcmROZWFyRW5kKGNsaWNrZWRUZXh0LCBjbGlja2VkV29yZCkpIFxuXHRcdFx0XHRuZXdDb250ZW50ID0gVXRpbHMuaW5zZXJ0VGV4dEluU3RyaW5nKCcgJyArIHRhZywgZmlsZUNvbnRlbnQsIGVuZEluZGV4KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3Q29udGVudCA9IFV0aWxzLmluc2VydFRleHRJblN0cmluZyh0YWcsIGZpbGVDb250ZW50LCBzdGFydEluZGV4K2NsaWNrZWRXb3JkSW5kZXgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgTm90aWNlICgnXHUyNkEwXHVGRTBGIENhblxcJ3QgZmluZCBjbGlja2VkIHdvcmQuXFxuUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcblx0XHQgICAgcmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XG5cblx0XHRpZiAoY29udGVudFNvdXJjZVR5cGUgPT0gJ3BsdWdpbi1zdW1tYXJ5Jykge1xuXHRcdFx0Y29uc3Qgc3VtbWFyeUNvbnRhaW5lciA9IHN1bW1hcnlFbC5jbG9zZXN0KCcudGFnLXN1bW1hcnktYmxvY2snKVxuXHRcdFx0dGhpcy5wbHVnaW4udGFnU3VtbWFyeS51cGRhdGUoc3VtbWFyeUNvbnRhaW5lcik7IFxuXHRcdH0gZWxzZSBpZiAoY29udGVudFNvdXJjZVR5cGUgPT0gJ25hdGl2ZS1lbWJlZCcpIHtcblx0XHRcdC8vY29uc29sZS5sb2coJ2FkZGVkIHRvIG5hdGl2ZSBlbWJlZDonLCBlbWJlZEVsKVxuXHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7IFxuXHRcdFx0XHR0aGlzLnBsdWdpbi50YWdQcm9jZXNzb3IucHJvY2Vzc05hdGl2ZUVtYmVkKGVtYmVkRWwsIHRydWUpO1xuXHRcdFx0fSwgMjAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBlZGl0IChcblx0XHR0YWdFbDogSFRNTEVsZW1lbnQsIFxuXHRcdGV2ZW50OiBFdmVudCwgXG5cdFx0cHJhZ3JhcGhFbDogSFRNTEVsZW1lbnQsXG5cdFx0ZWRpdFR5cGU6IFN0cmluZyxcblx0XHRuZXdOYW1lOiBTdHJpbmdcblx0KTp2b2lkIHtcbi8vY29uc29sZS5sb2codGFnRWwpXG5cdFx0bGV0IHRhZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cdFx0Y29uc3QgdGFnQ29udGFpbmVyVHlwZSA9IHRhZ0VsLmdldEF0dHJpYnV0ZShcblx0XHRcdCd0eXBlJ1xuXHRcdCk7XG5cdFx0Y29uc3QgaW5kZXggPSB0YWdFbC5nZXRBdHRyaWJ1dGUoXG5cdFx0XHQnbWQtaW5kZXgnXG5cdFx0KTtcblx0XHRjb25zdCBmaWxlUGF0aCA9IHRhZ0VsLmdldEF0dHJpYnV0ZShcblx0XHRcdCdmaWxlLXNvdXJjZSdcblx0XHQpO1xuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1RhZyBCdWRkeSBlZGl0IHRhZzogJyArIHRhZ0VsLmlubmVyVGV4dCBcblx0XHRcdFx0KyAnXFxuSW4gZmlsZTogJyArIGZpbGVQYXRoKTtcblx0XHR9XG5cblx0XHRpZiAodGFnQ29udGFpbmVyVHlwZSA9PSAnbmF0aXZlLWVtYmVkJykgdGFnQ29udGFpbmVyID0gdGFnRWwuY2xvc2VzdCgnLm1hcmtkb3duLWVtYmVkJyk7XG5cdFx0ZWxzZSBpZiAodGFnQ29udGFpbmVyVHlwZSA9PSAncGx1Z2luLXN1bW1hcnknKSB0YWdDb250YWluZXIgPSB0YWdFbC5jbG9zZXN0KCcudGFnLXN1bW1hcnktcGFyYWdyYXBoJyk7XG5cdFx0ZWxzZSB0YWdDb250YWluZXIgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcubWFya2Rvd24tcmVhZGluZy12aWV3Jyk7XG5cdFx0XG5cdFx0aWYgKGZpbGVQYXRoKSB7XG4gXG5cdFx0XHRjb25zdCBmaWxlOiBURmlsZSA9IGF3YWl0IFV0aWxzLnZhbGlkYXRlRmlsZVBhdGgoZmlsZVBhdGgpO1xuXHRcdFx0bGV0IGZpbGVDb250ZW50OiBTdHJpbmc7XG5cdFx0XHRsZXQgZmlsZUNvbnRlbnRCYWNrdXA6IFN0cmluZztcblx0XHRcdGNvbnN0IHRhZzogc3RyaW5nID0gdGFnRWwuaW5uZXJUZXh0LnRyaW0oKTtcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0XHRmaWxlQ29udGVudEJhY2t1cCA9IGZpbGVDb250ZW50O1xuXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdUYWcgQnVkZHkgZmlsZSByZWFkIGVycm9yOlxcbicgKyBlcnJvci5tZXNzYWdlKTtcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBmaWxlIGhhcyBvbmx5IG9uZSB0YWcgbGVmdCAoYW5kIHRoYXQncyBhbGwgdGhhdHMgbGVmdCBpbiB0aGUgZmlsZSlcblx0XHRcdGxldCBzYWZlVG9FbXB0eUZpbGUgPSBmYWxzZTtcblx0XHRcdGNvbnN0IHRhZ1JlZ2V4ID0gL15cXHMqIyhcXHcrKVxccyokLztcblx0XHRcdGlmICh0YWdSZWdleC50ZXN0KGZpbGVDb250ZW50LnRyaW0oKSkpIHtcblx0XHQgICAgXHRzYWZlVG9FbXB0eUZpbGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRsZXQgYmVmb3JlVGFnID0gZmlsZUNvbnRlbnQuc3Vic3RyaW5nKDAsIGluZGV4KTtcblx0XHRcdC8vbGV0IGFmdGVyVGFnID0gZmlsZUNvbnRlbnQuc3Vic3RyaW5nKChOdW1iZXIoaW5kZXgpK051bWJlcih0YWcubGVuZ3RoKSsxKSk7XG5cdFx0XHRsZXQgYWZ0ZXJUYWcgPSBmaWxlQ29udGVudC5zdWJzdHJpbmcoXG5cdFx0XHRcdE51bWJlcihpbmRleCkgKyBOdW1iZXIodGFnLmxlbmd0aClcblx0XHRcdCk7XG5cblx0XHRcdC8vY29uc29sZS5sb2cgKEpTT04uc3RyaW5naWZ5KGJlZm9yZVRhZykpO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyAoSlNPTi5zdHJpbmdpZnkodGFnKSk7XG5cdFx0XHQvL2NvbnNvbGUubG9nIChKU09OLnN0cmluZ2lmeShhZnRlclRhZykpO1xuXG5cdFx0XHRsZXQgYWZ0ZXJUYWdDaHIgPSAnJztcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHQvLyBDYW4ndCByZW1lbWJlciB3aHkgSSBoYXZlIHRoaXMuLi5cblx0XHRcdC8vIG5lZWQgdG8gcmVmYWN0b3IgYWxsIHRoaXMgbGluZSBicmVhayBzcGFjZSBzdHVmZlxuXHRcdFx0aWYgKGZpbGVDb250ZW50W2luZGV4XSA9PT0gJ1xcbicpIGJlZm9yZVRhZyArPSAnXFxuJztcblx0XHRcdGxldCBuZXdDb250ZW50ID0gJyc7XG5cblx0XHRcdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XHRcdC8vIFRPLURPOiBSRUZBQ1RPUlxuXHRcdFx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cdFx0XHRpZiAoZWRpdFR5cGUgPT0gJ3JlbmFtZScpIHsgLy8gdGhpcyBvbmx5IGhhcHBlbnMgZnJvbSBlZGl0IG1vZGFsXG5cblx0XHRcdFx0Ly9uZXdDb250ZW50ID0gdGhpcy5yZW5hbWVUYWdJblN0cmluZ0J5SW5kZXggKCcjJyt0YWcsIG5ld05hbWUsIGluZGV4LCBmaWxlQ29udGVudCk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIWV2ZW50KSB7IC8vIHRoZW4gd2UncmUgY2FsbGluZyB0aGlzIG1ldGhvZCBmcm9tIGEgYnV0dG9uLiBuZWVkIHRvIHJldGhpbmsgaG93IHRoaXMgaXMgb3JnYW5pemVkLlxuXHRcdFx0XHRcblx0XHRcdFx0bmV3Q29udGVudCA9IGJlZm9yZVRhZyArIGFmdGVyVGFnQ2hyICsgYWZ0ZXJUYWc7XG5cblx0XHRcdH0gZWxzZSBpZiAoZWRpdFR5cGUgPT0gJ2hhc2gnKSB7IFxuXHRcdFx0XHQvLyBSZW1vdmUgdGhlIGhhc2ggb25seVxuXHRcdFx0XHRjb25zdCBub0hhc2ggPSB0YWcuc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHQvL25ld0NvbnRlbnQgPSBiZWZvcmVUYWcgKyAoIWJlZm9yZVRhZy5lbmRzV2l0aCgnICcpPycgJzonJykgKyBub0hhc2ggKyBhZnRlclRhZztcblx0XHRcdFx0bmV3Q29udGVudCA9IGJlZm9yZVRhZyArIG5vSGFzaCArIGFmdGVyVGFnQ2hyICsgYWZ0ZXJUYWc7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAodGhpcy5hcHAuaXNNb2JpbGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTm90aWNlcykgXG5cdFx0XHRcdFx0eyBuZXcgTm90aWNlICgnVGFnIEJ1ZGR5OiAnICsgdGFnICsgJyBjb252ZXJ0ZWQgdG8gdGV4dC4nKTsgfVxuXHRcdFx0XG5cdFx0XHQvKn0gZWxzZSBpZiAoKChldmVudC50eXBlID09ICd0b3VjaGVuZCcpIFxuXHRcdFx0XHR8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVUYWdTZWFyY2gpIFxuXHRcdFx0XHRcdHx8IChVdGlscy5jdHJsQ21kS2V5KGV2ZW50KSAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlT25DbGljaykgXG5cdFx0XHRcdFx0fHwgKCFVdGlscy5jdHJsQ21kS2V5KGV2ZW50KSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVPbkNsaWNrKVxuXHRcdFx0XHQpIFxuXHRcdFx0eyovXG5cdFx0XHR9IGVsc2UgaWYgKCgoZXZlbnQudHlwZSA9PSAndG91Y2hlbmQnKSBcblx0XHRcdFx0fHwgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlVGFnU2VhcmNoKSAvLyBkb24ndCBuZWVkIHRoaXMgY2hlY2sgYW55IG1vcmUuIFxuXHRcdFx0XHRcdHx8IChlZGl0VHlwZSA9PSAncmVtb3ZlJykgXG5cdFx0XHRcdCkgXG5cdFx0XHR7XG5cblx0XHRcdFx0Ly8gUmVtb3ZlIHRhZyAob3IgY2hpbGQgZmlyc3QsIGlmIGV4aXN0cylcblx0XHRcdFx0bGV0IHBhcmVudFRhZyA9ICcnO1xuXG5cdFx0XHRcdGlmICh0YWcuaW5jbHVkZXMoJy8nKSBcblxuXHRcdFx0XHRcdC8vJiYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZUNoaWxkVGFnc0ZpcnN0IFxuXHRcdFx0XHRcdC8vfHwgKGV2ZW50LnNoaWZ0S2V5IFxuXHRcdFx0XHRcdFx0Ly8mJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVtb3ZlQ2hpbGRUYWdzRmlyc3QpXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdCBcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxldCBwYXJ0cyA9IHRhZy5zcGxpdCgnLycpO1xuXHRcdFx0XHRcdGNvbnN0IHJlbW92ZWRDaGlsZCA9IHBhcnRzLnBvcCgpO1xuXHRcdFx0XHRcdHBhcmVudFRhZyA9IHBhcnRzLmpvaW4oJy8nKTtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gYmVmb3JlVGFnIFxuXHRcdFx0XHRcdFx0KyBwYXJlbnRUYWcgXG5cdFx0XHRcdFx0XHQrIGFmdGVyVGFnQ2hyIFxuXHRcdFx0XHRcdFx0KyBhZnRlclRhZztcblxuXHRcdFx0XHRcdGlmICh0aGlzLmFwcC5pc01vYmlsZSBcblx0XHRcdFx0XHRcdCYmIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5vdGljZXMpIFxuXHRcdFx0XHRcdHsgXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlICgnVGFnIEJ1ZGR5OiBcXCcnIFxuXHRcdFx0XHRcdFx0XHQrIHJlbW92ZWRDaGlsZCBcblx0XHRcdFx0XHRcdFx0KyAnXFwnIHJlbW92ZWQgZnJvbSBwYXJlbnQgdGFnLicpOyBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHJlbW92ZSBleHRyYSBzcGFjZVxuXHRcdFx0XHRcdFxuLy9jb25zb2xlLmxvZyAoJz4nICsgYmVmb3JlVGFnLnN1YnN0cmluZyhiZWZvcmVUYWcubGVuZ3RoLTEpICsgYWZ0ZXJUYWcuc3Vic3RyaW5nKDAsMSkgKyAnPCcpXG5cdFx0XHRcdFx0LyppZiAoYmVmb3JlVGFnLnN1YnN0cmluZyhiZWZvcmVUYWcubGVuZ3RoLTEpID09ICcgJyAmJiBhZnRlclRhZy5zdWJzdHJpbmcoMCwxKSA9PSAnICcpIHtcblx0XHRcdFx0XHRcdG5ld0NvbnRlbnQgPSBiZWZvcmVUYWcgKyBhZnRlclRhZy5zdWJzdHJpbmcoMSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ld0NvbnRlbnQgPSBiZWZvcmVUYWcgKyBhZnRlclRhZztcblx0XHRcdFx0XHR9Ki9cblxuXHRcdFx0XHRcdGNvbnN0IHN0YXJ0c1dpdGhQdW5jdHVhdGlvbiA9IC9eWy4sITo/O10vLnRlc3QoYWZ0ZXJUYWcudHJpbVN0YXJ0KClbMF0pO1xuLy9jb25zb2xlLmxvZygnPicrYWZ0ZXJUYWcudHJpbVN0YXJ0KClbMF0rJzwnKVxuXHRcdFx0XHRcdGlmIChiZWZvcmVUYWcuZW5kc1dpdGgoJyAnKSAmJiBhZnRlclRhZy5zdGFydHNXaXRoKCcgJykpIHtcblx0XHRcdFx0ICAgICAgICBuZXdDb250ZW50ID0gYmVmb3JlVGFnICsgYWZ0ZXJUYWcuc3Vic3RyaW5nKDEpO1xuXHRcdFx0XHQgICAgfSBlbHNlIGlmIChzdGFydHNXaXRoUHVuY3R1YXRpb24pIHtcblx0XHRcdFx0ICAgIFx0bmV3Q29udGVudCA9IGJlZm9yZVRhZy50cmltRW5kKCkgKyBhZnRlclRhZy50cmltU3RhcnQoKTtcblx0XHRcdFx0ICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgICAgLy8gSWYgdGhlcmUncyBubyBsZWFkaW5nIHNwYWNlIGluIGFmdGVyVGFnIG9yIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHB1bmN0dWF0aW9uIGlzbid0IG5lZWRlZCwgY29uY2F0ZW5hdGUgZGlyZWN0bHlcblx0XHRcdFx0ICAgICAgICBuZXdDb250ZW50ID0gYmVmb3JlVGFnICsgYWZ0ZXJUYWc7XG5cdFx0XHRcdCAgICB9XG5cblx0XHRcdFx0XHRpZiAodGhpcy5hcHAuaXNNb2JpbGUgXG5cdFx0XHRcdFx0XHQmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOb3RpY2VzKSB7IFxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSAoJ1RhZyBCdWRkeTogJyArIHRhZyArICcgcmVtb3ZlZC4nKTsgXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IFxuXHRcdFx0XG5cdFx0XHRpZiAodGFnRWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ3BsdWdpbi1zdW1tYXJ5Jykge1xuXHRcdFx0Ly8gY2FuIHdlIGJlIHVzaW5nIHRhZ0NvbnRhaW5lclR5cGUgZnJvbSBhYm92ZT9cblxuXHRcdFx0XHQvLyBTYWZldHkgY2hlY2sgMVxuXHRcdFx0XHRjb25zdCBzdW1tYXJ5RWwgPSB0YWdFbC5jbG9zZXN0KCcudGFnLXN1bW1hcnktcGFyYWdyYXBoJyk7XG5cdFx0XHRcdGNvbnN0IG1kU291cmNlID0gc3VtbWFyeUVsLmdldEF0dHJpYnV0ZSgnbWQtc291cmNlJykudHJpbSgpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgZXNjYXBlZFRleHQgPSBVdGlscy5lc2NhcGVSZWdFeHAobWRTb3VyY2UpO1xuXHRcdFx0XHRjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoZXNjYXBlZFRleHQsICdnJyk7XG5cdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSBmaWxlQ29udGVudC5tYXRjaChyZWdleCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0ICAgIG5ldyBOb3RpY2UgKCdcdTI2QTBcdUZFMEYgQ2FuXFwndCBzYWZlbHkgcmVtb3ZlL2VkaXQgdGFnOlxcblN1cnJvdW5kaW5nIHRleHQgcmVwZWF0ZWQgaW4gc291cmNlIG5vdGUuJyk7XG5cdFx0XHRcdCAgICByZXR1cm47XG5cblx0XHRcdFx0fSBlbHNlIGlmICgobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA9PT0gMCkgfHwgIW1hdGNoZXMpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlICgnXHUyNkEwXHVGRTBGIENhblxcJ3QgZmluZCB0YWcgaW4gc291cmNlIG5vdGUuXFxuJyk7XG5cdFx0XHRcdCAgICByZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTYWZldHkgY2hlY2sgMlxuXHRcdFx0XHRpZiAoKG5ld0NvbnRlbnQgPT0gJycgJiYgIXNhZmVUb0VtcHR5RmlsZSkgXG5cdFx0XHRcdFx0fHwgVXRpbHMuY29udGVudENoYW5nZWRUb29NdWNoKFxuXHRcdFx0XHRcdFx0ZmlsZUNvbnRlbnRCYWNrdXAsIFxuXHRcdFx0XHRcdFx0bmV3Q29udGVudCwgXG5cdFx0XHRcdFx0XHR0YWcsIFxuXHRcdFx0XHRcdFx0Milcblx0XHRcdFx0XHQpIFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnVGFnIEJ1ZGR5OiBGaWxlIGNoYW5nZSBlcnJvci4nKTtcblx0XHRcdFx0XHRuZXdDb250ZW50ID0gZmlsZUNvbnRlbnRCYWNrdXA7XG5cblx0XHRcdFx0fSBlbHNlIGlmIChuZXdDb250ZW50ID09ICcnICYmIHNhZmVUb0VtcHR5RmlsZSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1RhZyBCdWRkeTogVGFnIHJlbW92ZWQuIFRoZSBub3RlIGlzIGVtcHR5LicpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3QgdGFnUGFyYWdyYXBoRWwgPSB0YWdFbC5jbG9zZXN0KCcudGFnLXN1bW1hcnktcGFyYWdyYXBoJyk7XG5cdFx0XHRcdFx0Y29uc3QgdGFnU3VtbWFyeUJsb2NrID0gdGFnRWwuY2xvc2VzdCgnLnRhZy1zdW1tYXJ5LWJsb2NrJyk7XG5cdFx0XHRcdFx0Y29uc3QgdGFnc1RvQ2hlY2sgPSBUYWdTdW1tYXJ5LmdldFRhZ3NUb0NoZWNrRnJvbUVsKHRhZ1N1bW1hcnlCbG9jayk7XG5cdFx0XHRcdFx0Y29uc3QgdGFnc0luQ29udGVudCA9IFV0aWxzLnRhZ3NJblN0cmluZyh0YWdQYXJhZ3JhcGhFbC5pbm5lclRleHQpO1xuXG5cdFx0XHRcdFx0aWYgKHRhZ3NUb0NoZWNrLmluY2x1ZGVzKHRhZykpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHRhZ0NvdW50ID0gVXRpbHMuY291bnRPY2N1cnJlbmNlcyh0YWdzVG9DaGVjaywgdGFnc0luQ29udGVudClcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKHRhZ0NvdW50ID49IDIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFnU3VtbWFyeS51cGRhdGUodGFnU3VtbWFyeUJsb2NrKTsgXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCdsYXN0IG9uZSwgd2lsbCByZW1vdmUgcGFyYWdyYXBoJylcblx0XHRcdFx0XHRcdFx0Y29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSAodGFnICsgJyByZW1vdmVkIGZyb20gcGFyYWdyYXBoLlxcblx1RDgzRFx1REQxNyBPcGVuIHNvdXJjZSBub3RlLicsIDUwMDApO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZ3VpLnJlbW92ZUVsZW1lbnRXaXRoQW5pbWF0aW9uKFxuXHRcdFx0XHRcdFx0XHRcdHRhZ1BhcmFncmFwaEVsLCBcblx0XHRcdFx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHQgICAgXHRcdFx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4geyBcblx0XHRcdCAgICBcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWdTdW1tYXJ5LnVwZGF0ZSh0YWdTdW1tYXJ5QmxvY2spOyBcblx0XHRcdCAgICBcdFx0XHRcdFx0XHR0YWdQYXJhZ3JhcGhFbC5yZW1vdmUoKTsgXG5cdFx0ICAgIFx0XHRcdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRG9tRXZlbnQoXG5cdFx0XHRcdFx0XHRcdFx0bm90aWNlLm5vdGljZUVsLCBcblx0XHRcdFx0XHRcdFx0XHQnY2xpY2snLCBcblx0XHRcdFx0XHRcdFx0XHQoZTogRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdCBcdCBcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlUGF0aCwgJycpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWdTdW1tYXJ5LnVwZGF0ZSh0YWdTdW1tYXJ5QmxvY2spOyBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDIwMCk7XG5cblx0XHRcdH0gZWxzZSBpZiAodGFnRWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT0gJ25hdGl2ZS1lbWJlZCcpIHtcblxuXHRcdFx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsgXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFnUHJvY2Vzc29yLnByb2Nlc3NOYXRpdmVFbWJlZCh0YWdDb250YWluZXIsIHRydWUpO1xuXHRcdFx0XHR9LCAyMDApXG5cblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblxuIFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xuXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHRjb25zdCBiYWNrdXBGaWxlTmFtZSA9IFN0cmluZyhmaWxlLm5hbWUuc3Vic3RyaW5nKDAsIGZpbGUubmFtZS5pbmRleE9mKCcubWQnKSkgKyAnIEJBQ0tVUC5tZCcpO1xuXHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShiYWNrdXBGaWxlTmFtZSwgZmlsZUNvbnRlbnRCYWNrdXApO1xuXG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFRhZy9ub3RlIGVkaXRpbmcgZXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlICsgJ1xcbicgKyBiYWNrdXBGaWxlTmFtZSArICcgc2F2ZWQgdG8gdmF1bHQgcm9vdC4nLCAxMDAwMCk7XG5cdFx0XHRcdFxuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXG5cdFx0XHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZmlsZUNvbnRlbnRCYWNrdXApO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBUYWcvbm90ZSBlZGl0aW5nIGVycm9yOiAnICsgZXJyb3IubWVzc2FnZSArICdcXG5Ob3RlIGNvbnRlbnQgY29waWVkIHRvIGNsaXBib2FyZC4nLCAxMDAwMCk7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSBcblxuXHRcdFx0dGhpcy5wbHVnaW4udGFnUHJvY2Vzc29yLmRlYm91bmNlZFByb2Nlc3NBY3RpdmVGaWxlVGFnRWxzKCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENhblxcJ3QgaWRlbnRpZnkgdGFnIGxvY2F0aW9uLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuXHRcdH1cblx0fVxuXG59IiwgImltcG9ydCBUYWdCdWRkeSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgQXBwLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5cblxuZXhwb3J0IGNsYXNzIERvdWJsZVRhcEhhbmRsZXIge1xuXHRcblx0Y29uc3RydWN0b3IocGx1Z2luOiBUYWdCdWRkeSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNhbGxiYWNrOiBGdW5jdGlvbil7XG5cdCAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgLy8gU3RvcmUgdGhlIHBsdWdpbiBpbnN0YW5jZVxuXHQgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0ICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcblx0ICAgIHRoaXMubGFzdFRhcCA9IDA7XG5cdCAgICBcblx0ICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRG9tRXZlbnQoXG5cdCAgICBcdHRoaXMuZWxlbWVudCxcblx0ICAgIFx0J3RvdWNoZW5kJywgXG5cdCAgICBcdHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSwgXG5cdCAgICBcdHRydWVcbiAgICBcdCk7XG5cdCAgfVxuXG5cdCAgaGFuZGxlVG91Y2hFbmQoZXZlbnQ6IEV2ZW50KSB7XG5cdCAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgICAgY29uc3QgdGFwTGVuZ3RoID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUYXA7XG5cdCAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcblx0ICAgIGlmICh0YXBMZW5ndGggPCA1MDAgJiYgdGFwTGVuZ3RoID4gMCkge1xuXHQgICAgICB0aGlzLmNhbGxiYWNrKGV2ZW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHQgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuXHQgICAgICB9LCA1MDApO1xuXHQgICAgfVxuXHQgICAgdGhpcy5sYXN0VGFwID0gY3VycmVudFRpbWU7XG5cdCAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJpcGxlVGFwSGFuZGxlciB7XG5cdFxuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGNhbGxiYWNrOiBGdW5jdGlvbjtcbiAgcHJpdmF0ZSBsYXN0VGFwOiBudW1iZXI7XG4gIHByaXZhdGUgdGltZW91dDogYW55O1xuICBwcml2YXRlIHRhcENvdW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBhbnksIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjYWxsYmFjazogRnVuY3Rpb24pe1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luOyAvLyBTdG9yZSB0aGUgcGx1Z2luIGluc3RhbmNlXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5sYXN0VGFwID0gMDtcbiAgICB0aGlzLnRhcENvdW50ID0gMDsgLy8gSW5pdGlhbGl6ZSB0YXAgY291bnRcbiAgICBcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckRvbUV2ZW50KFxuICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgJ3RvdWNoZW5kJywgXG4gICAgICB0aGlzLmhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcyksIFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH1cblxuICBoYW5kbGVUb3VjaEVuZChldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IHRhcExlbmd0aCA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0VGFwO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgIFxuICAgIGlmICh0YXBMZW5ndGggPCA1MDAgJiYgdGFwTGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy50YXBDb3VudCsrOyAvLyBJbmNyZW1lbnQgdGFwIGNvdW50XG5cbiAgICAgIC8vIElmIHRyaXBsZSB0YXAgaXMgZGV0ZWN0ZWQsIHRyaWdnZXIgdGhlIGNhbGxiYWNrIGFuZCByZXNldCB0YXBDb3VudFxuICAgICAgaWYgKHRoaXMudGFwQ291bnQgPT09IDIpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhldmVudCk7XG4gICAgICAgIHRoaXMudGFwQ291bnQgPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhcENvdW50ID0gMDsgLy8gUmVzZXQgdGFwIGNvdW50IGlmIHRpbWUgYmV0d2VlbiB0YXBzIGlzIHRvbyBsb25nXG4gICAgfVxuXG4gICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgIHRoaXMudGFwQ291bnQgPSAwOyAvLyBSZXNldCB0YXAgY291bnQgd2hlbiB0aW1lb3V0IGlzIHJlYWNoZWRcbiAgICB9LCA1MDApO1xuXG4gICAgdGhpcy5sYXN0VGFwID0gY3VycmVudFRpbWU7XG4gIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgUHJlc3NBbmRIb2xkSGFuZGxlciB7XG5cdFxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwbHVnaW46IFRhZ0J1ZGR5LCBcblx0XHRlbGVtZW50OiBIVE1MRWxlbWVudCwgXG5cdFx0Y2FsbGJhY2s6IEZ1bmN0aW9uLCBcblx0XHRkdXJhdGlvbjogbnVtYmVyID0gNjAwXG5cdCl7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0dGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOyBcblx0XHR0aGlzLnRpbWVvdXQgPSBudWxsO1xuXG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJEb21FdmVudChcblx0XHRcdHRoaXMuZWxlbWVudCwgXG5cdFx0XHQndG91Y2hzdGFydCcsIFxuXHRcdFx0dGhpcy5oYW5kbGVUb3VjaFN0YXJ0LmJpbmQodGhpcyksIFxuXHRcdFx0dHJ1ZVxuXHRcdCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJEb21FdmVudChcblx0XHRcdHRoaXMuZWxlbWVudCwgXG5cdFx0XHQndG91Y2hlbmQnLCBcblx0XHRcdHRoaXMuaGFuZGxlVG91Y2hFbmQuYmluZCh0aGlzKSwgXG5cdFx0XHR0cnVlXG5cdFx0KTtcblx0fVxuXG5cdGhhbmRsZVRvdWNoU3RhcnQoZXZlbnQ6IEV2ZW50KSB7XG5cdFx0Ly9ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdC8vZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0dGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLmNhbGxiYWNrKGV2ZW50KTtcblx0XHRcdHRoaXMudGltZW91dCA9IG51bGw7XG5cdFx0fSwgdGhpcy5kdXJhdGlvbik7XG5cdH1cblxuXHRoYW5kbGVUb3VjaEVuZChldmVudDogRXZlbnQpIHtcblx0XHRpZiAodGhpcy50aW1lb3V0KSB7XG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcblx0XHRcdHRoaXMudGltZW91dCA9IG51bGw7XG5cdFx0fVxuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsb0JBQWdPOzs7QUNDaE8sc0JBQStDO0FBRXhDLElBQU0sZ0JBQU4sY0FBNEIsaUNBQWlCO0FBQUEsRUFHaEQsWUFBWUMsTUFBVSxRQUFrQjtBQUNwQyxVQUFNQSxNQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVBQWdCO0FBQ1osUUFBSSxFQUFFLFlBQVksSUFBSTtBQUN0QixnQkFBWSxNQUFNO0FBR2xCLGFBQVMsV0FBVyxLQUFLO0FBQ3JCLFlBQU0sYUFBYTtBQUNuQixhQUFPLFdBQVcsS0FBSyxHQUFHO0FBQUEsSUFDOUI7QUFFQSxhQUFTLGtCQUFrQixZQUFZO0FBQ25DLFlBQU0sWUFBWSxXQUFXLE1BQU0sSUFBSTtBQUN2QyxZ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QUFPLGlCQUFpQixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLFFBQVEsTUFBTSxFQUFFLENBQUM7QUFBQSxJQUM3RCxPQUFPO0FBQ04sYUFBTyxVQUFVLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLElBQUksUUFBUSxNQUFNLEVBQUUsQ0FBQztBQUFBLElBQ3pEO0FBQUEsRUFDUDtBQUFBLEVBRUEsY0FDQyxLQUNNO0FBRU4sUUFBVSxXQUFXLEtBQUssSUFBSSxHQUFHO0FBR2hDLFlBQU0sbUJBQW1CLEtBQUssU0FBUztBQUN2QyxVQUFJO0FBQ0osVUFBSSxvQkFBb0IsSUFBSTtBQUMzQixxQkFBYSxDQUFDO0FBQUEsTUFDZixXQUFXLGlCQUFpQixRQUFRLElBQUksR0FBRztBQUMxQyxxQkFBYSxLQUFLLFNBQVMsa0JBQWtCLE1BQU0sSUFBSTtBQUFBLE1BQ3hELE9BQU87QUFDTixxQkFBYSxDQUFDLEtBQUssU0FBUyxpQkFBaUI7QUFBQSxNQUM5QztBQUVBLFVBQUksV0FBVyxTQUFTLEdBQUcsR0FBRztBQUM3QixtQkFBVyxPQUFPLFdBQVcsUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUFBLE1BQzdDO0FBRUEsaUJBQVcsUUFBUSxJQUFJLEtBQUssQ0FBQztBQUM3QixtQkFBYSxXQUFXLE1BQU0sR0FBRyxDQUFDO0FBQ2xDLFdBQUssU0FBUyxvQkFBb0IsV0FBVyxLQUFLLElBQUk7QUFDdEQsV0FBSyxhQUFhO0FBQUEsSUFDbkIsT0FBTztBQUFBLElBRVA7QUFBQSxFQUNEO0FBQUEsRUFFQSxnQkFBdUI7QUFDdEIsVUFBTSxhQUNOLEtBQUssU0FBUyxxQkFBbUIsS0FBSyxDQUFDLElBQUksS0FBSyxTQUFTLGtCQUFrQixNQUFNLElBQUk7QUFDckYsV0FBTztBQUFBLEVBQ1I7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInBhcmFncmFwaEVsIiwgImFwcCIsICJhcHAiLCAiZmlsZVBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgInRhZ0VsIiwgImltcG9ydF9vYnNpZGlhbiIsICJTZWxlY3RGaWxlTW9kYWwiLCAiYXBwIiwgImFwcCIsICJ0YWdFbCIsICJwYXJhZ3JhcGhFbCIsICJTZWxlY3RGaWxlTW9kYWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJwYXJhZ3JhcGhFbCIsICJ0YWdFbCIsICJlIiwgIm5vdGljZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgInBhcmFncmFwaEVsIiwgInRhZ0VsIiwgIlRlbXBDb21wb25lbnQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJ0YWdFbCIsICJlcnJvciJdCn0K
